{
  "version": 3,
  "sources": ["../utils/dist/truetypeof.js", "../utils/dist/array.js", "../utils/dist/object.js", "../utils/dist/lodash.js", "../utils/dist/chain-promises.js", "../errors/dist/general-exception.js", "../errors/dist/validation-error.js", "../utils/dist/is-function.js", "../utils/dist/regex.js", "node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js", "node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js", "node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js", "src/base/string.ts", "src/base/boolean.ts", "src/base/number.ts", "src/base/any.ts", "src/base/array.ts", "src/constants.ts", "src/base/combine.ts", "src/base/object.ts", "src/base/union.ts", "src/lib/promisify.ts", "src/lib/len.ts", "src/plugins/more-than.ts", "src/plugins/less-than.ts", "src/plugins/between.ts", "src/plugins/email.ts", "src/plugins/float.ts", "src/plugins/int.ts", "src/plugins/less-than-equal.ts", "src/plugins/more-than-equal.ts", "src/plugins/uint.ts", "src/plugins/within.ts", "src/plugins/index.ts", "src/plugins/plugins.ts", "src/lib/common.ts", "src/validator-plugins.ts"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trueTypeOf = void 0;\n/*\n * More accurately check the type of a JavaScript object\n * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com\n */\nfunction trueTypeOf(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();\n}\nexports.trueTypeOf = trueTypeOf;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compact = exports.toArray = exports.inArray = void 0;\n/**\n * DIY in Array\n */\nconst inArray = (arr, value) => arr.includes(value);\nexports.inArray = inArray;\n// quick and dirty to turn non array to array\nconst toArray = (arg) => Array.isArray(arg) ? arg : [arg];\nexports.toArray = toArray;\n/**  remove nil-like-value from array */\nconst compact = (arr) => arr.filter(Boolean);\nexports.compact = compact;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readOnly = exports.objectHasKey = exports.arrToObj = exports.extend = exports.assign = exports.getConfigValue = exports.isClass = exports.isPlainObject = exports.isObject = void 0;\nconst array_1 = require(\"./array\");\nconst truetypeof_1 = require(\"./truetypeof\");\nfunction isObject(o) {\n    return (0, truetypeof_1.trueTypeOf)(o) === 'object';\n}\nexports.isObject = isObject;\n// move the isPlainObject method here\nfunction isPlainObject(o) {\n    if (isObject(o)) {\n        // If has modified constructor\n        const constr = o.constructor;\n        /* this check is pointless even {} has prototype\n        if (constr === undefined) {\n          return true\n        } */\n        const prot = constr.prototype;\n        const nullType = '[Object: null prototype]';\n        if (prot.toString().substring(0, nullType.length) === nullType) {\n            return true;\n        }\n        // If has modified prototype\n        if (isObject(prot) === false) {\n            return false;\n        }\n        return Reflect.apply(prot['hasOwnProperty'], prot, ['isPrototypeOf']);\n    }\n    return false;\n}\nexports.isPlainObject = isPlainObject;\n/** short hand of !isPlainObject */\nconst isClass = (o) => !isPlainObject(o);\nexports.isClass = isClass;\n/**\n * simple util method to get the value from the config object\n */\nconst getConfigValue = (name, obj) => (obj && isPlainObject(obj) ? ((name in obj) ? obj[name] : undefined) : undefined);\nexports.getConfigValue = getConfigValue;\n/**\n * Shorthand method for Object.assign\n */\nconst assign = (...args) => Reflect.apply(Object.assign, Object, args);\nexports.assign = assign;\nexports.extend = exports.assign; // alias\n/**\n  Array to object\n*/\nconst arrToObj = (args, processor, initValue = {}) => args.map(processor).reduce((a, b) => (0, exports.assign)(a, b), initValue);\nexports.arrToObj = arrToObj;\n/**\n * check if the key existing in an object\n */\nconst objectHasKey = (obj, key) => {\n    try {\n        const keys = Object.keys(obj);\n        return (0, array_1.inArray)(keys, key);\n    }\n    catch (e) {\n        // @_BUG when the obj is not an OBJECT we got some weird output\n        return false;\n    }\n};\nexports.objectHasKey = objectHasKey;\n/**\n * Shorthand method to turn config into immutatble (readonly)\n * was call freeze\n */\nconst readOnly = (config) => Object.freeze(config);\nexports.readOnly = readOnly;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isString = exports.flatMap = exports.merge = exports.curry = void 0;\nconst truetypeof_1 = require(\"./truetypeof\");\nconst object_1 = require(\"./object\");\n// DIY curry method\nconst curry = (fn, ...args) => (fn.length <= args.length) ?\n    fn(...args) :\n    (...more) => (0, exports.curry)(fn, ...args, ...more);\nexports.curry = curry;\n// import mapKeys from 'lodash-es/mapKeys'\n// import omitBy from 'lodash-es/omitBy'\n// import findKey from 'lodash-es/findKey'\nconst merge = (target, ...sources) => {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if ((0, object_1.isObject)(target) && (0, object_1.isObject)(source)) {\n        for (const key in source) {\n            if ((0, object_1.isObject)(source[key])) {\n                if (!target[key]) {\n                    Object.assign(target, {\n                        [key]: {}\n                    });\n                }\n                (0, exports.merge)(target[key], source[key]);\n            }\n            else {\n                Object.assign(target, {\n                    [key]: source[key]\n                });\n            }\n        }\n    }\n    return (0, exports.merge)(target, ...sources);\n};\nexports.merge = merge;\n// flatMap native\nfunction flatMap(arr, callback) {\n    if (!callback) {\n        callback = n => n;\n    }\n    return arr.flatMap(callback);\n}\nexports.flatMap = flatMap;\n// the lodash-es ESM module can not import from commonjs etc etc etc bug\n// so we get rip of most of them\nfunction isString(value) {\n    return (0, truetypeof_1.trueTypeOf)(value) === 'string';\n}\nexports.isString = isString;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.queuePromisesProcess = exports.chainProcessPromises = exports.chainPromises = void 0;\n// break it out on its own because\n// it's building from the lodash-es from scratch\n// according to this discussion https://github.com/lodash/lodash/issues/3298\nconst lodash_1 = require(\"./lodash\");\nconst object_1 = require(\"./object\");\n/**\n * previously we already make sure the order of the namespaces\n * and attach the auth client to it\n */\nfunction chainPromises(promises, asObject = false) {\n    return promises.reduce((promiseChain, currentTask) => (promiseChain.then(chainResults => (currentTask.then(currentResult => (asObject === false ?\n        [...chainResults, currentResult] :\n        (0, lodash_1.merge)(chainResults, currentResult)))))), Promise.resolve(asObject === false ? [] : ((0, object_1.isPlainObject)(asObject) ? asObject : {})));\n}\nexports.chainPromises = chainPromises;\n/**\n * This one return a different result from the chainPromises\n * it will be the same like chainFns that take one promise resolve as the next fn parameter\n */\nfunction chainProcessPromises(initPromise, ...promises) {\n    return (...args) => (promises.reduce((promiseChain, currentTask) => (promiseChain.then((chainResult) => (currentTask(chainResult)))), Reflect.apply(initPromise, null, args)));\n}\nexports.chainProcessPromises = chainProcessPromises;\n/**\n * This is a combine method to run the above chain process\n * cos sometime we don't want to have the process separate (see validator)\n */\nfunction queuePromisesProcess(queue, ...initValue) {\n    // we need to make sure the Array is actually flat array\n    const q = (0, lodash_1.flatMap)(queue);\n    const ex = Reflect.apply(chainProcessPromises, null, q);\n    return Reflect.apply(ex, null, initValue);\n}\nexports.queuePromisesProcess = queuePromisesProcess;\n", "\"use strict\";\n// this is a new Error class that is not part of the Jsonql\n// but we will use it in other external modules\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass GeneralException extends Error {\n    constructor(...args) {\n        super(...args);\n        this.message = args[0];\n        this.detail = args[1];\n        this.className = GeneralException.name;\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, GeneralException);\n        }\n    }\n}\nexports.default = GeneralException;\n", "\"use strict\";\n// custom validation error class\n// when validaton failed\n// should there also be a errors result somewhere\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(...args) {\n        super(...args);\n        this.message = args[0];\n        this.detail = args[1];\n        this.className = ValidationError.name;\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, ValidationError);\n        }\n    }\n}\nexports.default = ValidationError;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAsyncFunction = exports.isFunction = void 0;\nconst truetypeof_1 = require(\"./truetypeof\");\nconst expected = ['asyncfunction', 'function'];\n/**\n * Simple check if the prop is function\n * We found situtation where it report as an object but debug output show as [Function]\n */\nconst isFunction = function (prop, debug = false) {\n    const result = (0, truetypeof_1.trueTypeOf)(prop);\n    if (expected.includes(result)) {\n        return true;\n    }\n    if (debug) {\n        console.error(`Expect to be Function type! Got ${typeof prop}`);\n    }\n    return false;\n};\nexports.isFunction = isFunction;\n/** finally found a solution to check if something is an async function */\nfunction isAsyncFunction(prop) {\n    return (0, truetypeof_1.trueTypeOf)(prop) === expected[0];\n}\nexports.isAsyncFunction = isAsyncFunction;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRegex = exports.isRegExp = void 0;\nconst lodash_1 = require(\"./lodash\");\n/**\n * Just check if a pattern is an RegExp object\n */\nfunction isRegExp(pat) {\n    return pat instanceof RegExp;\n}\nexports.isRegExp = isRegExp;\n/**\n * Find from the array by matching the pattern\n */\nfunction getRegex(pattern) {\n    switch (true) {\n        case isRegExp(pattern):\n            return pattern;\n        case (0, lodash_1.isString)(pattern):\n            return new RegExp(pattern);\n        default:\n            return false;\n    }\n}\nexports.getRegex = getRegex;\n", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n", "/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n", "// validate string type\n\nimport { isString } from '@jsonql/utils/dist/lodash'\n/**\n * double check if its string\n */\nexport function checkString(value: unknown) {\n  return ((value+'').trim() !== '') ? isString(value) : false\n}\n", "// check for boolean\nimport { trueTypeOf } from '@jsonql/utils/dist/truetypeof'\n/**\n * if something is a boolean\n */\nexport function checkBoolean(value: unknown): boolean {\n  return trueTypeOf(value) === 'boolean'\n}\n", "// validator numbers\n// import { NUMBER_TYPES } from './constants';\nimport { trueTypeOf } from '@jsonql/utils/dist/truetypeof'\nconst expected = 'number'\n/**\n * Historical library\n * @2015-05-04 found a problem if the value is a number like string\n * it will pass, so add a check if it's string before we pass to next\n * @2022 completely rewritten from ground up\n */\nexport function checkNumber(value: number) {\n  return trueTypeOf(value) !== expected ? false : !isNaN(parseFloat(value + ''))\n}\n\n// Add more number type / value checking\nexport function checkInteger(value: unknown) {\n  return trueTypeOf(value) === expected && Number.isInteger(value as number)\n}\n\nexport function checkFloat(value: unknown) {\n  return trueTypeOf(value) === expected\n    && !isNaN(value as number)\n    && !Number.isInteger(value as number)\n}\n\nexport function checkUnsigned(value: unknown) {\n  return checkInteger(value) && (value as number) >= 0\n}\n", "/** validate any thing only check if there is something */\nexport function checkAny(value: unknown, checkNull = true): boolean {\n  if (value !== undefined && value !== '' && (value+'').trim() !== '') {\n    if (checkNull === false || (checkNull === true && value !== null)) {\n      return true\n    }\n  }\n  return false\n}\n", "// validate array type\nimport type { AnyType } from '@jsonql/utils/index'\nimport { isPlainObject } from '@jsonql/utils/dist/object'\nimport { combineCheck } from './combine'\nimport {\n  ARRAY_TYPE_LFT,\n  ARRAY_TYPE_RGT,\n  ARRAY_TS_TYPE_LFT,\n  ARRAY_TYPE,\n  OBJECT_TYPE,\n  OR_SEPERATOR\n} from '../constants'\nconst STYLES = {\n  ts: ARRAY_TS_TYPE_LFT,\n  jsdoc: ARRAY_TYPE_LFT\n}\n/**\n * check if its array or array like\n * why the type is a not a boolean?\n */\nexport function checkArray(\n  value: unknown,\n  type?: string | string[] // @TODO more combination\n) {\n  if (Array.isArray(value)) {\n    if (!type) {\n      return true\n    }\n    // we test it in reverse\n    // @TODO if the type is an array (OR) then what?\n    // we need to take into account this could be an array\n    let c: unknown[]\n    if (Array.isArray(type)) { // Union type\n      c = value.filter((v: unknown) => {\n        // only need one is correct\n        const ctn = type.length\n        for (let i = 0; i < ctn; ++i) {\n          const t = type[i]\n          if (\n            (t === ARRAY_TYPE && Array.isArray(v)) ||\n            (t === OBJECT_TYPE && isPlainObject(v)) ||\n            combineCheck(t)(v as number)\n          ) {\n            return false\n          }\n        }\n        return true\n      })\n    } else {\n      c = value.filter(v => !combineCheck(type)(v))\n    }\n    return !(c.length > 0)\n  }\n  return false\n}\n\n/** Take the string type like array.<T> or Array<T> apart */\nfunction destructArrayStr(type: string, syntax = 'ts'): Array<string> | boolean {\n  const left = STYLES[syntax]\n  if (!left) {\n    throw new Error(`Syntax not supported! ${Object.keys(STYLES)}`)\n  }\n  if (type.indexOf(left) > -1 && type.indexOf(ARRAY_TYPE_RGT) > -1) {\n    const _type = type.replace(left, '').replace(ARRAY_TYPE_RGT, '')\n    if (_type.indexOf(OR_SEPERATOR)) {\n      // return as array\n      return _type.split(OR_SEPERATOR)\n    }\n    // return as array\n    return [_type]\n  }\n  return false\n}\n\n/**\n * check if it matches the array.<T> pattern\n * This method will be deprecated soon - we are not using the jsdoc to get the type any more\n * @TODO 2022-04-23 Instead of deprecated this we need to expand this method to use the swc generated map\n * also make it compatible between the array.<T> and the array<T> style (jsdoc or ts)\n */\nexport function isArrayLike(type: string): boolean | string[] {\n  // debugFn(type)\n  // check ts first\n  const check1 = destructArrayStr(type)\n  if (!check1) {\n    return destructArrayStr(type, 'jsdoc')\n  }\n  /**\n  Todo read the swc generate map here\n\n  **/\n  return false\n}\n\n/**\n * we might encounter something like array.<T> then we need to take it apart\n @TODO_deprecated This method is no longer needed here\n */\nexport function arrayTypeHandler(p: AnyType, type: unknown[]): boolean {\n  const { arg } = p\n  // need a special case to handle the OR type\n  // we need to test the args instead of the type(s)\n  if (type.length > 1) {\n    return !arg.filter((v: unknown) => (\n      !(type.length > type.filter((t: unknown) => !combineCheck(t as string)(v as number)).length)\n    )).length\n  }\n  // type is array so this will be or!\n  return type.length > type.filter((t: unknown) => !checkArray(arg, t as string)).length\n}\n", "// ported from @jsonql/constants\n\nexport const OR_SEPERATOR = '|'\n\nexport const BOOLEAN_TYPE = 'boolean'\nexport const STRING_TYPE = 'string'\nexport const NUMBER_TYPE = 'number'\nexport const ARRAY_TYPE = 'array'\nexport const OBJECT_TYPE = 'object'\n// Legacy\nexport const ARRAY_TS_TYPE_LFT = 'Array<'\nexport const ARRAY_TYPE_LFT = 'array.<'\nexport const ARRAY_TYPE_RGT = '>'\n\n// local\nexport const VALIDATE_KEY = 'validate'\nexport const VALIDATE_ASYNC_KEY = 'validateAsync'\nexport const PLUGIN_KEY = 'plugin'\nexport const PLUGIN_FN_KEY = 'main'\nexport const PATTERN_KEY = 'pattern'\nexport const RULES_KEY = 'rules'\nexport const NAME_KEY = 'name'\nexport const PARAMS_KEY = 'params'\n\nexport const IDX_KEY = '$$idx'\nexport const VALUE_KEY = '$$value'\n\nexport const RESERVED_WORD_ERR = 'Your plugin config argument contains reserved keywords'\nexport const ARG_NOT_MATCH_ERR = \"Your params doesn't matching your main argument list\"\nexport const MAIN_NOT_FOUND_ERR = \"Can not find 'main' method in your plugin config\"\n\nexport const KEYWORDS = [\n  PARAMS_KEY,\n  PATTERN_KEY,\n  VALIDATE_KEY,\n  VALIDATE_ASYNC_KEY,\n  PLUGIN_KEY,\n  RULES_KEY,\n  'name',\n  'type',\n  'types',\n  'server',\n  'tstype',\n  'value',\n  'optional',\n  'tmp',\n  'pos',\n  'lastResult',\n]\n", "// primitive types\nimport { checkNumber } from './number'\nimport { checkString } from './string'\nimport { checkBoolean } from './boolean'\nimport { checkAny } from './any'\nimport { NUMBER_TYPE, STRING_TYPE, BOOLEAN_TYPE } from '../constants'\n\n/**\n * this is a wrapper method to call different one based on their type\n */\nexport function combineCheck(type: string) {\n  switch (type) {\n    case NUMBER_TYPE:\n      return checkNumber\n    case STRING_TYPE:\n      return checkString\n    case BOOLEAN_TYPE:\n      return checkBoolean\n    default:\n      return checkAny\n  }\n}\n", "// validate object type\nimport type { JsonqlCheckObjectKeys } from '../types'\nimport type { AnyType, AnyTypeArr } from '@jsonql/utils/index'\n\nimport { isPlainObject } from '@jsonql/utils/dist/object'\nimport { combineCheck } from './combine'\nimport { checkArray, isArrayLike, arrayTypeHandler } from './array'\n\n/**\n * check if the input is object also able to check if key(s) existed in that object\n @TODO need to rethink about how this checkObject keys should be\n */\nexport function checkObject(\n  value: AnyType,\n  keys?: string | Array<string> | Array<JsonqlCheckObjectKeys>\n) {\n  if (isPlainObject(value)) {\n    if (!keys) {\n      return true\n    }\n    // bs about ts\n    if (typeof keys === 'string') {\n      return keys in value\n    }\n    // @TODO we might have to break it up into a different method\n    else if (checkArray(keys)) {\n      if (typeof keys[0] === 'string') {\n        return checkIfKeysInObj(\n          value,\n          keys as unknown as Array<string>\n        )\n      }\n      return checkIfNameTypeInObj(\n        value,\n        keys as unknown as Array<JsonqlCheckObjectKeys>\n      )\n    }\n  }\n  return false\n}\n\n/** check if the keys existed in the object */\nfunction checkIfKeysInObj(\n  value: AnyType,\n  keys: Array<string>\n) {\n  return !keys.filter((key: string) => {\n    return !(key in value)\n  }).length\n}\n\n/** check if JsonqlCheckObjectKeys is in the object */\nfunction checkIfNameTypeInObj(\n  value: AnyType,\n  keys: Array<JsonqlCheckObjectKeys>\n) {\n  // please note we DON'T care if some is optional\n  // please refer to the contract.json for the keys\n  return !keys.filter((key: JsonqlCheckObjectKeys) => {\n    const _value = value[key.name]\n    return !(key.type.length > key.type.filter((type: unknown) => {\n      let tmp: unknown\n      if (_value !== undefined) {\n        if ((tmp = isArrayLike(type as string)) !== false) {\n          return !arrayTypeHandler({arg: _value}, tmp as AnyTypeArr)\n          // return tmp.filter(t => !checkArray(_value, t)).length;\n          // @TODO there might be an object within an object with keys as well :S\n        }\n        return !combineCheck(type as string)(_value)\n      }\n      return true\n    }).length)\n  }).length\n}\n\n/**\n * fold this into it's own function to handler different object type\n */\nexport const objectTypeHandler = function(p: AnyType) {\n  const { arg, param } = p\n  const _args = [arg]\n  if (Array.isArray(param.keys) && param.keys.length) {\n    _args.push(param.keys)\n  }\n  // just simple check\n  return Reflect.apply(checkObject, null, _args)\n}\n\n/** check if an object is empty */\nexport const isEmptyObject = function(value: AnyType) {\n  if (isPlainObject(value)) {\n    const keys = Object.keys(value)\n\n    return !keys.length\n  }\n  return false\n}\n", "// Union Type\nimport type { AnyType, AnyTypeArr } from '@jsonql/utils/index'\nimport { queuePromisesProcess } from '@jsonql/utils/dist/chain-promises'\nimport { combineCheck } from './combine'\nimport { checkArray } from './array'\nimport { checkObject } from './object'\n\nimport { ARRAY_TYPE, OBJECT_TYPE } from '../constants'\n\n\n/** wrap the or return result together */\nfunction typeAsFail(result: boolean, type: string) {\n  return result || type\n}\n\n/**\nWe use the chainProcessPromises fail and exit side effects to\naccomplish this task fast, because it's OR so only need to\nhave one of them pass that means all pass\nso if one pass we throw Error and it will exist\nif it fail we resolve it therefore the then is actually failed\n*/\nexport function generateReversePromisesFn(\n  value: AnyType,\n  types: Array<string>,\n  extended?: AnyTypeArr // this will be check keys\n) {\n  // we return it as a function therefore\n  // if the last one fail the next one no need to get exeucte\n  return types.map((type: string, i: number) => {\n    const args = [value]\n    if (extended && extended[i]) {\n      args.push(extended[i])\n    }\n    switch (type) {\n      case ARRAY_TYPE:\n        return () => typeAsFail(Reflect.apply(checkArray, null, args), type)\n      case OBJECT_TYPE:\n        return () => typeAsFail(Reflect.apply(checkObject, null, args), type)\n      default:\n        return () => typeAsFail(combineCheck(type)(value), type)\n    }\n  })\n  .map(fn => (\n    // this treat result in opposite way because once one pass\n    // then we want to exit the queue (it's OR just need one to pass)\n    async () => {\n      const result = fn()\n      // @TODO may be push them together in one array?\n      return result === true ? Promise.reject(true) : Promise.resolve(result)\n    }\n  ))\n}\n\n/**\n  because the union type is OR\n  therefore it has to be check in one rule\n*/\nexport async function checkUnion(\n  value: AnyType,\n  types: Array<string>,\n  extended?: AnyTypeArr\n): Promise<boolean> {\n  const ps = generateReversePromisesFn(value, types, extended)\n  // we wrap this in another promise to reverse the result\n  return new Promise((resolver, rejecter) => {\n    /**\n    There is a weird behavior here, if we call the catch first\n    the 'then' always get call, it might be a promise A behavior\n    */\n    queuePromisesProcess(ps, types[0])\n          .then((type: string) => {\n            // console.log('failed', type)\n            rejecter(type)\n          })\n          .catch((res: boolean) => {\n            // console.log('passed', res)\n            resolver(res)\n          })\n\n  })\n}\n\n/**\n * Create a sync version of checkUnion\n */\nexport function checkUnionSync(\n  value: AnyType,\n  types: Array<string>\n) {\n  const ctn = types.length\n  for (let i = 0; i < ctn; ++i) {\n    const type = types[i]\n    switch (type) {\n      case ARRAY_TYPE:\n        if (checkArray(value)) {\n          return true\n        }\n        break\n      case OBJECT_TYPE:\n        if (checkObject(value)) {\n          return true\n        }\n        break\n      default:\n        if (combineCheck(type)(value))  {\n          return true\n        }\n      }\n  }\n  return false\n}\n", "// create our own promisify method here\n// because there are many situation we want the validating method to be async\n/// also this define here because the result is in reverse not suitable\n// for general purpose use\n\nimport type { AnyType, AnyTypeArr } from '@jsonql/utils/index'\n\n/** it's quite annoying Typescript Function type is useless */\nexport function promisify(fn: AnyType) {\n\n  return async (...args: AnyTypeArr): Promise<boolean> => {\n    const result = await Reflect.apply(fn, null, args)\n\n    return result ? Promise.resolve(result) : Promise.reject(result)\n  }\n}\n\n/** When the result is true get rejected and vice vesa */\nexport function reversePromisifyResult(fn: AnyType) {\n\n  return async (...args: AnyTypeArr): Promise<boolean> => {\n    const result = await Reflect.apply(fn, null, args)\n\n    return result ? Promise.reject(result) : Promise.resolve(result)\n  }\n}\n", "// import { isString } from '@jsonql/utils/dist/lodash'\n// @NOTE can not use the isString method because stupid Typescript complaint it's not string\n// even you cast it again\nexport function len (value: number | string): number {\n\n  return typeof value === 'string'\n    ? value.length\n    : value\n}\n", "import { len } from '../lib/len'\n\nconst name = 'moreThan'\n\nfunction main(\n  num: number,\n  value: number | string\n): boolean {\n\n  return len(value) > num\n}\n\nexport default {\n  name,\n  main,\n  params: ['num']\n}\n", "import { len } from '../lib/len'\n\nconst name = \"lessThan\"\n\nfunction main(\n  num: number,\n  value: number | string\n): boolean {\n  return len(value) < num\n}\n\nexport default {\n  name,\n  main,\n  params: ['num']\n}\n", "// between\nimport moreThan from './more-than'\nimport lessThan from './less-than'\n\nconst name = 'between'\n\nfunction main(\n  max: number,\n  min: number,\n  value: number | string\n): boolean {\n\n  return lessThan.main(max, value) && moreThan.main(min, value)\n}\n\n// so when we register it, we know what param we should expect\nexport default {\n  main,\n  name,\n  params: ['max', 'min']\n}\n", "// email validator\n// this is an example how to create a plugin\n// one default export method accept one parameter value return boolean\n// then export a named export call name: string and that's it\n// or just return a string regex pattern: string\n\nconst name = 'email'\n\nfunction main(value: string): boolean {\n  const pattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\n  return pattern.test(value)\n}\n\nexport default {\n  main,\n  name,\n}\n", "// test for float\nimport { checkFloat } from '../base/number'\n\nexport const name = 'float'\n\nfunction main(value: number): boolean {\n  return checkFloat(value)\n}\n\nexport default {\n  name,\n  main,\n}\n", "// test for integer\nimport { checkInteger } from '../base/number'\n\nexport const name = 'int'\n\nfunction main(value: number): boolean {\n  return checkInteger(value)\n}\n\nexport default {\n  name,\n  main,\n}\n", "import { len } from '../lib/len'\n\nconst name = 'lessThanEqual'\n\nfunction main(\n  num: number,\n  value: number | string\n): boolean {\n  return len(value) <= num\n}\n\nexport default {\n  name,\n  main,\n  params: ['num']\n}\n", "import { len } from '../lib/len'\nconst name = 'moreThanEqual'\n\nfunction main(num: number, value: number | string): boolean {\n  return len(value) >= num\n}\n\nexport default {\n  name,\n  main,\n  params: ['num']\n}\n", "import { checkUnsigned } from '../base/number'\n\nconst name = \"unit\"\n\nfunction main(value: number): boolean {\n  return checkUnsigned(value)\n}\n\nexport default {\n  name,\n  main,\n}\n", "\n\nimport moreThanEqual from './more-than-equal'\nimport lessThanEqual from './less-than-equal'\n\nconst name = 'main'\n\nfunction main(\n  max: number,\n  min: number,\n  value: number | string\n): boolean {\n  return lessThanEqual.main(max, value) && moreThanEqual.main(min, value)\n}\n\nexport default {\n  name,\n  main,\n  params: ['max', 'min']\n}\n", "// This export files also will get build individually for the client side\n// and same thing could apply for the developer add rules\n\n// Here we only provide a list of files and dynamicly import it\n\nimport between from './between'\nimport email from './email'\nimport float from './float'\nimport int from './int'\nimport lessThanEqual from './less-than-equal'\nimport lessThan from './less-than'\nimport moreThanEqual from './more-than-equal'\nimport moreThan from './more-than'\nimport unit from './uint'\nimport within from './within'\n\nexport const plugins = [\n  between,\n  email,\n  float,\n  int,\n  lessThanEqual,\n  lessThan,\n  moreThanEqual,\n  moreThan,\n  unit,\n  within,\n]\n", "// it was in the index and should be on it's own file\n/** just make this clear where the plugins coming from */\nimport type {\n  JsonqlPluginConfig,\n  JsonqlValidateFn,\n  JsonqlPluginInput,\n} from '../types'\n\nimport { curry } from '@jsonql/utils/dist/lodash'\nimport GeneralException from '@jsonql/errors/dist/general-exception'\n\nimport { PARAMS_KEY } from '../constants'\nimport { plugins } from './index'\n/**\n  construct the curry plugin method\n  @0.5.0 we make this generic\n*/\nexport function curryPlugin(\n  input: JsonqlPluginInput,\n  pluginConfig: JsonqlPluginConfig\n): JsonqlValidateFn {\n  const { plugin } = input\n  if (plugin) {\n    const params = pluginConfig[PARAMS_KEY] // if we use pluginExport.params then TS complain!\n    if (params) {\n      // @BUG if the input missing the key then it wont throw for example\n      // we expect `arg` but pass the `min` then it will run but just failed\n      if (!checkArgKeys(input, params)) {\n        throw new GeneralException(`Expected params: ${params.join(',')} not found!`)\n      }\n      const args = params.map((param: string) => input[param])\n\n      return Reflect.apply(curry(pluginConfig.main), null, args)\n    } else {\n      throw new GeneralException(`This plugin ${pluginConfig.name} can not be curry`)\n    }\n  }\n  throw new GeneralException(`Unable to find plugin in config`)\n}\n\n/** check if the expected key presented in the config */\nfunction checkArgKeys(\n  config: JsonqlPluginInput,\n  params: Array<string>\n): boolean {\n  return params.filter(key => config[key]).length === params.length\n}\n\n/** @TODO it needs to be a js file then it must be after compile */\nexport function getPlugin(pluginName: string) {\n  let p = plugins[pluginName]\n  if (p) {\n    p = p === '_' ? pluginName : p\n    return import('./' + [p,'js'].join('.'))\n  }\n  throw new Error(`${pluginName} is not found`)\n}\n", "import type {\n  JsonqlValidateFn,\n  JsonqlGenericObject,\n  JsonqlPluginConfig\n} from '../types'\n\nimport ValidationError from '@jsonql/errors/dist/validation-error'\nimport GeneralException from '@jsonql/errors/dist/general-exception'\nimport {\n  IDX_KEY,\n  VALUE_KEY,\n  KEYWORDS,\n  PLUGIN_FN_KEY,\n  PARAMS_KEY,\n  RESERVED_WORD_ERR,\n} from '../constants'\nimport { toArray } from '@jsonql/utils/dist/array'\nimport { extend } from '@jsonql/utils/dist/object'\nimport { isFunction } from '@jsonql/utils/dist/is-function'\nimport { getRegex } from '@jsonql/utils/dist/regex'\n\nimport debugFn from 'debug'\nconst debug = debugFn('jsonql:validator-core:common')\n\n/** check plugin argument against keywords list */\nexport function checkPluginArg (params: Array<string>): boolean {\n  return !(params.filter(param => KEYWORDS.includes(param)).length > 0)\n}\n\n/** now simply it with just one prop check main */\nexport function pluginHasFunc (rule: Partial<JsonqlPluginConfig>): boolean {\n  return rule[PLUGIN_FN_KEY] && isFunction(rule[PLUGIN_FN_KEY])\n}\n\n/** Just take the keys without the value */\nfunction getArgsKey (rule: Partial<JsonqlPluginConfig>): Array<string> {\n  const params = extractFnArgs(rule.main.toString())\n  params.pop()\n  return params\n}\n\n/** instead of just checking the user params, we go one step further to extract it for them */\nexport function searchParamsKey (\n  rule: Partial<JsonqlPluginConfig>\n): Partial<JsonqlPluginConfig> {\n  const params = getArgsKey(rule)\n  const l = params.length\n  if (l === 0) {\n    return rule // nothing to do\n  }\n  // now we check if the params has reserved word\n  if (!checkPluginArg(params)) {\n    throw new GeneralException(RESERVED_WORD_ERR)\n  }\n  rule[PARAMS_KEY] = params\n  return rule\n}\n\n/** check if the params they provide is matching their main method */\nexport function paramMatches (rule: Partial<JsonqlPluginConfig>) {\n  const params = getArgsKey(rule)\n  const l = params.length\n  if (l === 0 && !rule[PARAMS_KEY]) {\n    return true // nothing to check\n  }\n  const _params = rule.params !== undefined && Array.isArray(rule.params)\n                ? rule.params : false\n  if (_params === false) {\n    return false\n  }\n  if (l > 0 && l === _params.length) {\n    if (!params.filter((param: string, i: number) => param !== _params[i]).length) {\n      return true\n    }\n  }\n  return false\n}\n\n/** take a function string and return its argument names */\nexport function extractFnArgs (fnStr: string): Array<string> {\n\n  return fnStr.split('(')[1]\n              .split(')')[0]\n              .split(',')\n              .map(t => t.trim())\n              .filter(t => t !== '')\n}\n\n\n/**\nthis will get re-use in the class to create method for the queue execution\n */\nexport function constructRuleCb (\n  argName: string,\n  ruleFn: JsonqlValidateFn,\n  ruleName?: string\n) {\n\n  return async (\n    value: unknown,\n    lastResult: JsonqlGenericObject,\n    pos: number[]\n  ) => {\n    // @NOTE keep getting problem with ruleFn is not a async funtion pass here\n    // so we need to first execute it then check if is thenable\n    return Reflect.apply(ruleFn, null, [value])\n      .then(\n        successThen(argName, value, lastResult, pos)\n      )\n      .catch((error: boolean) => {\n        debug('failed', argName, value, error, pos)\n        // the name should be the validator name - not the property name\n        // because the pos already indicator the property\n        return Promise.reject(new ValidationError(ruleName, pos))\n      })\n    }\n}\n\n/** This is taken out from the above then call for re-use when we want to fall through a rule */\nexport function successThen (\n  argName: string,\n  value: unknown,\n  lastResult: JsonqlGenericObject,\n  pos: number[] // for internal debug use only\n) {\n  return (result: unknown) => {\n    const idx = pos[0]\n    debug('passed', argName, value, result, pos)\n    debug('lastResult', lastResult)\n    const newResult = { [IDX_KEY]: idx, [VALUE_KEY]: value }\n    if (lastResult === undefined) { // init\n      return {[argName]: newResult }\n    }\n    // here is the problem with spread result - they have the same name\n    if (argName in lastResult) { // we need to check if the key exist this is import NOT VALUE check\n      const lr = lastResult[argName]\n      if (isResultPackage(lr) ) {\n        if (!lr.includes(newResult)) {\n          lastResult[argName].push(newResult)\n        }\n      } else if (lr[IDX_KEY] !== idx) {\n        lastResult[argName] = toArray(lastResult[argName]).concat([ newResult ])\n      }\n      // if it's the same then do nothing\n      return lastResult\n    }\n    // return the argument name with the value\n    return extend(lastResult, { [argName]: newResult })\n  }\n}\n\n/** check to see if the lastResult contain our lastResult package format or just their value */\nexport function isResultPackage (lastResult: unknown, key = IDX_KEY) {\n  try {\n    if (Array.isArray(lastResult)) {\n      return !!lastResult.filter(\n        (res: {[key: string]: unknown}) => key in res\n      ).length\n    }\n  } catch(e) { debug('isResultPackage', e) }\n\n  return false\n}\n\n/** If the plugin provide a pattern and we construct a function out of it */\nexport function patternPluginFanctory (\n  pattern: string\n): (value: string) => Promise<boolean> {\n  const regex = getRegex(pattern) as RegExp\n\n  return async (value: string) =>\n    regex.test(value) ? Promise.resolve(true) : Promise.reject(false)\n}\n", "/**\n  instead of loading pluign in each ValidatorFactory\n  we should create a base class that load all internal plugins\n  and each ValidatorFactory add their extra plugin into this to share\n*/\nimport type {\n  JsonqlPluginInput,\n  JsonqlPluginConfig,\n  JsonqlValidationPlugin,\n  JsonqlValidationRule,\n  JsonqlValidateFn,\n} from './types'\nimport GeneralException from '@jsonql/errors/dist/general-exception'\nimport {\n  VALIDATE_ASYNC_KEY,\n  PLUGIN_KEY,\n  PLUGIN_FN_KEY,\n  NAME_KEY,\n  PARAMS_KEY,\n  RESERVED_WORD_ERR,\n  ARG_NOT_MATCH_ERR,\n  MAIN_NOT_FOUND_ERR,\n} from './constants'\nimport {\n  curryPlugin,\n} from './plugins/plugins'\nimport {\n  promisify\n} from './lib/promisify'\nimport {\n  constructRuleCb,\n  checkPluginArg,\n  pluginHasFunc,\n  searchParamsKey,\n  paramMatches,\n} from './lib/common'\nimport {\n  plugins\n} from './plugins'\n\nimport debugFn from 'debug'\nconst debug = debugFn('jsonql:validator-core:validator-plugin')\n\n// main\nexport class ValidatorPlugins {\n\n  private _plugins = new Map<string, JsonqlValidationPlugin>()\n  private _internalPluginNames: string[] = []\n  /** with a idx to id this instance */\n  constructor(public $version?: number) {\n    // register internal plugins\n    plugins.forEach((plugin: JsonqlValidationPlugin) => {\n      // we don't do the convert here anymore, and wait until the look up\n      // then we store it back JIT\n      const name = plugin[NAME_KEY] as string\n      this._internalPluginNames.push(name)\n      this._registerPlugin(name, plugin, true)\n    })\n  }\n\n  /**\n  find the plugin internal or external\n  argName is the argument name\n  */\n  public lookupPlugin(\n    input: JsonqlValidationRule,\n    argName: string\n  ) {\n    const pluginName = input[PLUGIN_KEY]\n    if (pluginName && this._plugins.has(pluginName)) {\n      const pluginConfig = this._plugins.get(pluginName) as JsonqlValidationPlugin\n      // unconverted\n      if (pluginConfig[PLUGIN_FN_KEY] && !pluginConfig[PARAMS_KEY]) {\n        // let it fall to the next\n        pluginConfig[VALIDATE_ASYNC_KEY] = promisify(pluginConfig[PLUGIN_FN_KEY])\n      }\n      // already converted\n      if (pluginConfig && pluginConfig[VALIDATE_ASYNC_KEY] && !pluginConfig[PARAMS_KEY]) {\n        return constructRuleCb(\n          argName,\n          pluginConfig[VALIDATE_ASYNC_KEY] as JsonqlValidateFn,\n          pluginName,\n        )\n      }\n      // needs to curry\n      if (pluginConfig && pluginConfig[PARAMS_KEY]) {\n        debug('pluginConfig --->', pluginConfig)\n        debug('input----------->', input)\n        const _input = input as unknown as JsonqlPluginInput\n\n        return constructRuleCb(\n          argName,\n          promisify(\n            curryPlugin(_input, pluginConfig as unknown as JsonqlPluginConfig)\n          ),\n          pluginName\n        )\n      }\n    }\n    debug('lookupPlugin', 'unable to find', pluginName)\n    throw new GeneralException(`Unable to find plugin: ${pluginName}`)\n  }\n\n  /** The public api to register a plugin */\n  public registerPlugin(\n    name: string,\n    pluginConfig: JsonqlValidationPlugin\n  ): void {\n    this._registerPlugin(name, pluginConfig)\n  }\n\n  /** call this when loading external plugin, not allow to use directly */\n  protected _registerExternalPlugin(\n    name: string,\n    pluginConfig: JsonqlValidationPlugin\n  ): void {\n    this._registerPlugin(name, pluginConfig, false, true)\n  }\n\n  /** this is no longer in use and we change the usage to export list of names that can be add to contract */\n  public export(external = true) {\n    const plugins: JsonqlValidationPlugin[] = []\n    this._plugins.forEach((p: JsonqlValidationPlugin, n: string) => {\n      if (!this.isBuiltIn(n) && p.external === external) {\n        plugins.push(p)\n      }\n    })\n    return plugins\n  }\n\n  /** just check if this plugin is built-in */\n  public isBuiltIn(pluginName: string) {\n    return this._internalPluginNames.includes(pluginName)\n  }\n\n  // ------------------------- PRIVATE --------------------------//\n\n  /** register plugins */\n  protected _registerPlugin(\n    name: string,\n    pluginConfig: Partial<JsonqlPluginConfig>,\n    skipCheck = false, // when register internal plugin then skip it\n    external = false // new in 0.9.11\n  ): void {\n    if (!skipCheck) {\n      if (this._plugins.has(name)) {\n        throw new GeneralException(`plugin ${name} already existed!`)\n      }\n      if (!pluginHasFunc(pluginConfig)) {\n        debug('registerPlugin', MAIN_NOT_FOUND_ERR)\n        throw new GeneralException(MAIN_NOT_FOUND_ERR)\n      }\n      // Here we could extract the params instead of just checking\n      if (pluginConfig[PARAMS_KEY] === undefined) {\n        pluginConfig = searchParamsKey(pluginConfig)\n        debug('auto generate params for plugin', pluginConfig)\n      } else if (pluginConfig[PARAMS_KEY] !== undefined) { // if they provide the keys then we check\n        if (!checkPluginArg(pluginConfig[PARAMS_KEY] as string[])) {\n          debug('registerPlugin', RESERVED_WORD_ERR)\n          throw new GeneralException(RESERVED_WORD_ERR)\n        }\n        if (!paramMatches(pluginConfig)) {\n          debug('registerPlugin', ARG_NOT_MATCH_ERR)\n          throw new GeneralException(ARG_NOT_MATCH_ERR)\n        }\n      }\n    }\n    pluginConfig.name = name\n    pluginConfig.external = external\n    /**\n    At this point it should only contain a main (or plus params) so we\n    do nothing and just store it, we convert it only when they call it\n    */\n    this._plugins.set(name, pluginConfig)\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
