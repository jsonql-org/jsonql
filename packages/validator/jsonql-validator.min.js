(()=>{var ah=Object.create;var ha=Object.defineProperty;var ih=Object.getOwnPropertyDescriptor;var uh=Object.getOwnPropertyNames;var ch=Object.getPrototypeOf,sh=Object.prototype.hasOwnProperty;var va=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(a,r)=>(typeof require!="undefined"?require:a)[r]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var T=(i,a)=>()=>(a||i((a={exports:{}}).exports,a),a.exports);var lh=(i,a,r,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let u of uh(a))!sh.call(i,u)&&u!==r&&ha(i,u,{get:()=>a[u],enumerable:!(o=ih(a,u))||o.enumerable});return i};var D=(i,a,r)=>(r=i!=null?ah(ch(i)):{},lh(a||!i||!i.__esModule?ha(r,"default",{value:i,enumerable:!0}):r,i));var J=(i,a,r)=>new Promise((o,u)=>{var s=E=>{try{f(r.next(E))}catch(b){u(b)}},l=E=>{try{f(r.throw(E))}catch(b){u(b)}},f=E=>E.done?o(E.value):Promise.resolve(E.value).then(s,l);f((r=r.apply(i,a)).next())});var Xr=T((Vy,tr)=>{var ya,ma,Oa,ba,Aa,Pa,Ta,ga,Ra,Zt,zr,Na,Sa,ja,Ue,Ca,wa,Ia,Fa,Ma,qa,Ya,La,er;(function(i){var a=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(o){i(r(a,r(o)))}):typeof tr=="object"&&typeof tr.exports=="object"?i(r(a,r(tr.exports))):i(r(a));function r(o,u){return o!==a&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(s,l){return o[s]=u?u(s,l):l}}})(function(i){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(o[s]=u[s])};ya=function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(o,u);function s(){this.constructor=o}o.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)},ma=Object.assign||function(o){for(var u,s=1,l=arguments.length;s<l;s++){u=arguments[s];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Oa=function(o,u){var s={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&u.indexOf(l)<0&&(s[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,l=Object.getOwnPropertySymbols(o);f<l.length;f++)u.indexOf(l[f])<0&&Object.prototype.propertyIsEnumerable.call(o,l[f])&&(s[l[f]]=o[l[f]]);return s},ba=function(o,u,s,l){var f=arguments.length,E=f<3?u:l===null?l=Object.getOwnPropertyDescriptor(u,s):l,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,s,l);else for(var y=o.length-1;y>=0;y--)(b=o[y])&&(E=(f<3?b(E):f>3?b(u,s,E):b(u,s))||E);return f>3&&E&&Object.defineProperty(u,s,E),E},Aa=function(o,u){return function(s,l){u(s,l,o)}},Pa=function(o,u){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,u)},Ta=function(o,u,s,l){function f(E){return E instanceof s?E:new s(function(b){b(E)})}return new(s||(s=Promise))(function(E,b){function y(I){try{O(l.next(I))}catch(w){b(w)}}function v(I){try{O(l.throw(I))}catch(w){b(w)}}function O(I){I.done?E(I.value):f(I.value).then(y,v)}O((l=l.apply(o,u||[])).next())})},ga=function(o,u){var s={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},l,f,E,b;return b={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function y(O){return function(I){return v([O,I])}}function v(O){if(l)throw new TypeError("Generator is already executing.");for(;s;)try{if(l=1,f&&(E=O[0]&2?f.return:O[0]?f.throw||((E=f.return)&&E.call(f),0):f.next)&&!(E=E.call(f,O[1])).done)return E;switch(f=0,E&&(O=[O[0]&2,E.value]),O[0]){case 0:case 1:E=O;break;case 4:return s.label++,{value:O[1],done:!1};case 5:s.label++,f=O[1],O=[0];continue;case 7:O=s.ops.pop(),s.trys.pop();continue;default:if(E=s.trys,!(E=E.length>0&&E[E.length-1])&&(O[0]===6||O[0]===2)){s=0;continue}if(O[0]===3&&(!E||O[1]>E[0]&&O[1]<E[3])){s.label=O[1];break}if(O[0]===6&&s.label<E[1]){s.label=E[1],E=O;break}if(E&&s.label<E[2]){s.label=E[2],s.ops.push(O);break}E[2]&&s.ops.pop(),s.trys.pop();continue}O=u.call(o,s)}catch(I){O=[6,I],f=0}finally{l=E=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},Ra=function(o,u){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(u,s)&&er(u,o,s)},er=Object.create?function(o,u,s,l){l===void 0&&(l=s),Object.defineProperty(o,l,{enumerable:!0,get:function(){return u[s]}})}:function(o,u,s,l){l===void 0&&(l=s),o[l]=u[s]},Zt=function(o){var u=typeof Symbol=="function"&&Symbol.iterator,s=u&&o[u],l=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},zr=function(o,u){var s=typeof Symbol=="function"&&o[Symbol.iterator];if(!s)return o;var l=s.call(o),f,E=[],b;try{for(;(u===void 0||u-- >0)&&!(f=l.next()).done;)E.push(f.value)}catch(y){b={error:y}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(b)throw b.error}}return E},Na=function(){for(var o=[],u=0;u<arguments.length;u++)o=o.concat(zr(arguments[u]));return o},Sa=function(){for(var o=0,u=0,s=arguments.length;u<s;u++)o+=arguments[u].length;for(var l=Array(o),f=0,u=0;u<s;u++)for(var E=arguments[u],b=0,y=E.length;b<y;b++,f++)l[f]=E[b];return l},ja=function(o,u,s){if(s||arguments.length===2)for(var l=0,f=u.length,E;l<f;l++)(E||!(l in u))&&(E||(E=Array.prototype.slice.call(u,0,l)),E[l]=u[l]);return o.concat(E||Array.prototype.slice.call(u))},Ue=function(o){return this instanceof Ue?(this.v=o,this):new Ue(o)},Ca=function(o,u,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(o,u||[]),f,E=[];return f={},b("next"),b("throw"),b("return"),f[Symbol.asyncIterator]=function(){return this},f;function b(S){l[S]&&(f[S]=function(M){return new Promise(function(B,Ee){E.push([S,M,B,Ee])>1||y(S,M)})})}function y(S,M){try{v(l[S](M))}catch(B){w(E[0][3],B)}}function v(S){S.value instanceof Ue?Promise.resolve(S.value.v).then(O,I):w(E[0][2],S)}function O(S){y("next",S)}function I(S){y("throw",S)}function w(S,M){S(M),E.shift(),E.length&&y(E[0][0],E[0][1])}},wa=function(o){var u,s;return u={},l("next"),l("throw",function(f){throw f}),l("return"),u[Symbol.iterator]=function(){return this},u;function l(f,E){u[f]=o[f]?function(b){return(s=!s)?{value:Ue(o[f](b)),done:f==="return"}:E?E(b):b}:E}},Ia=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=o[Symbol.asyncIterator],s;return u?u.call(o):(o=typeof Zt=="function"?Zt(o):o[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(E){s[E]=o[E]&&function(b){return new Promise(function(y,v){b=o[E](b),f(y,v,b.done,b.value)})}}function f(E,b,y,v){Promise.resolve(v).then(function(O){E({value:O,done:y})},b)}},Fa=function(o,u){return Object.defineProperty?Object.defineProperty(o,"raw",{value:u}):o.raw=u,o};var r=Object.create?function(o,u){Object.defineProperty(o,"default",{enumerable:!0,value:u})}:function(o,u){o.default=u};Ma=function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&er(u,o,s);return r(u,o),u},qa=function(o){return o&&o.__esModule?o:{default:o}},Ya=function(o,u,s,l){if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?o!==u||!l:!u.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?l:s==="a"?l.call(o):l?l.value:u.get(o)},La=function(o,u,s,l,f){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof u=="function"?o!==u||!f:!u.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?f.call(o,s):f?f.value=s:u.set(o,s),s},i("__extends",ya),i("__assign",ma),i("__rest",Oa),i("__decorate",ba),i("__param",Aa),i("__metadata",Pa),i("__awaiter",Ta),i("__generator",ga),i("__exportStar",Ra),i("__createBinding",er),i("__values",Zt),i("__read",zr),i("__spread",Na),i("__spreadArrays",Sa),i("__spreadArray",ja),i("__await",Ue),i("__asyncGenerator",Ca),i("__asyncDelegator",wa),i("__asyncValues",Ia),i("__makeTemplateObject",Fa),i("__importStar",Ma),i("__importDefault",qa),i("__classPrivateFieldGet",Ya),i("__classPrivateFieldSet",La)})});var ge=T((xy,Da)=>{Da.exports={EXPORT_TYPE:"ExportDeclaration",EXPORT_DEFAULT_TYPE:"ExportDefaultDeclaration",DECLARATION_NAME:"declaration",DECLARATION_SHORT_NAME:"decl",ANNOTATION_NAME:"typeAnnotation",PARAMETER_NAME:"Parameter",CLASS_TYPE:"ClassDeclaration",CLASS_METHOD:"ClassMethod",CLASS_EXP:"ClassExpression",FUNC_EXP:"FunctionExpression",ASSIGN_PATTERN:"AssignmentPattern",OBJ_EXP:"ObjectExpression",ARR_EXP:"ArrayExpression",BOO_LIT:"BooleanLiteral",NUM_LIT:"NumericLiteral",STR_LIT:"StringLiteral",ELEM_TYPE:"elemType",TYPE_NAME:"typeName",TYPE_PARAMS:"typeParams",TS_KEY_TYPE:"TsKeywordType",TS_UNION_TYPE:"TsUnionType",TS_ARRAY_TYPE:"TsArrayType",TS_ANNO_NAME:"TsTypeAnnotation",TS_TYPE_LIT:"TsTypeLiteral",TS_TYPE_REF:"TsTypeReference",TS_TYPE_NAME:"tstype",SPREAD_ARG_TYPE:"RestElement",EXT:"js",TS_EXT:"ts",HELLO:"Hello world!",HELLO_FN:"helloWorld",HEADERS_KEY:"headers",JSONQL_PATH:"jsonql",CONTENT_TYPE:"application/vnd.api+json",CHARSET:"charset=utf-8",DEFAULT_HEADER:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+jsoncharset=utf-8"},DEFAULT_TYPE:"any",DEFAULT_RESOLVER_LIST_FILE_NAME:"resolver.js",DEFAULT_RESOLVER_IMPORT_FILE_NAME:"import.js",MODULE_TYPE:"module",SCRIPT_TYPE:"script",QUERY_NAME:"query",MUTATION_NAME:"mutation",SOCKET_NAME:"socket",SOCKET_AUTH_NAME:"socket-auth",EXTERNAL_NAME:"external",INTERCEPTOR_NAME:"interceptor",PLUGIN_NAME:"plugin",CONTRACT_NAME:"contract",MIDDLEWARE_NAME:"middleware",RESOLVER_TYPES:["query","mutation","socket","socket-auth"],PAYLOAD_PARAM_NAME:"payload",CONDITION_PARAM_NAME:"condition",RESOLVER_PARAM_NAME:"resolverName",QUERY_ARG_NAME:"args",TIMESTAMP_PARAM_NAME:"TS",MUTATION_ARGS:["resolverName","payload","condition"],JSONP_CALLBACK_NAME:"jsonqlJsonpCallback",API_REQUEST_METHODS:["POST","PUT"],CONTRACT_REQUEST_METHODS:["GET","HEAD"],KEY_WORD:"continue",PUBLIC_KEY:"public",PRIVATE_KEY:"private",AUTH_TYPE:"auth",AUTH_NAME:"auth",LOGIN_FN_NAME:"login",LOGOUT_FN_NAME:"logout",VALIDATOR_FN_NAME:"validator",DISCONNECT_FN_NAME:"disconnect",SWITCH_USER_FN_NAME:"switch-user",AUTH_HEADER:"Authorization",AUTH_CHECK_HEADER:"authorization",BEARER:"Bearer",CREDENTIAL_STORAGE_KEY:"jsonqlcredential",CLIENT_STORAGE_KEY:"jsonqlstore",CLIENT_AUTH_KEY:"jsonqlauthkey",INDEX_KEY:"index",CONTRACT_KEY_NAME:"X-JSONQL-CV-KEY",SHOW_CONTRACT_DESC_PARAM:{desc:"y"},DEFAULT_RESOLVER_DIR:"resolvers",DEFAULT_CONTRACT_DIR:"contracts",DEFAULT_KEYS_DIR:"keys",CJS_TYPE:"cjs",ES_TYPE:"es",TS_TYPE:"ts",ACCEPTED_JS_TYPES:["cjs","es"],RETURN_AS_FILE:"file",RETURN_AS_JSON:"json",RETURN_AS_ENUM:["file","json"],NO_ERROR_MSG:"No message",NO_STATUS_CODE:-1,SUCCESS_STATUS:200,UNAUTHORIZED_STATUS:401,FORBIDDEN_STATUS:403,NOT_FOUND_STATUS:404,NOT_ACCEPTABLE_STATUS:406,SERVER_INTERNAL_STATUS:500,DEFAULT_PORT_NUM:6557,CSRF_HEADER_KEY:"X-CSRF-Token",ORIGIN_HEADER_KEYS:["Origin"],WILD_CARD_CHAR:"*",DATA_KEY:"data",ERROR_KEY:"error",META_KEY:"meta",JSONQL_NAME:"jsonql",REST_NAME:"rest",AVAILABLE_FORMATS:["jsonql","rest"],DEFAULT_CONTRACT_FILE_NAME:"contract.json",PUBLIC_CONTRACT_FILE_NAME:"public-contract.json",TYPE_KEY:"type",OPTIONAL_KEY:"optional",ENUM_KEY:"enumv",ARGS_KEY:"args",CHECKER_KEY:"checker",ALIAS_KEY:"alias",CHECKED_KEY:"__checked__",APP_DIR_PROP_KEY:"appDir",AUTH_TO_PROP_KEY:"authTimeout",ENABLE_AUTH_PROP_KEY:"enableAuth",USE_JWT_PROP_KEY:"useJwt",RESOLVER_DIR_PROP_KEY:"resolverDir",CONTRACT_DIR_PROP_KEY:"contractDir",INIT_CONNECTION_FN_NAME_PROP_KEY:"initConnectionHandlerName",LOGIN_FN_NAME_PROP_KEY:"loginHandlerName",LOGOUT_FN_NAME_PROP_KEY:"logoutHandlerName",DISCONNECT_FN_NAME_PROP_KEY:"disconnectHandlerName",SWITCH_USER_FN_NAME_PROP_KEY:"switchUserHandlerName",PUBLIC_FN_DIR_PROP_KEY:"publicResolverDir",PRIVATE_FN_DIR_DROP_KEY:"privateResolverDir",ALGORITHM_PROP_KEY:"algorithm",KEYS_DIR_PROP_KEY:"keysDir",SOCKET_IO_AUTH_TYPE_PROP_KEY:"socketIoAuthType",SERVER_INIT_OPT_PROP_KEY:"serverInitOption",SOCKET_TYPE_PROP_KEY:"serverType",SOCKET_TYPE_CLIENT_ALIAS:"socketClientType",SOCKET_TYPE_SERVER_ALIAS:"socketServerType",CSRF_PROP_KEY:"csrf",ALLOW_ORIGIN_PROP_KEY:"allowOrigin",STANDALONE_PROP_KEY:"standalone",DEBUG_ON_PROP_KEY:"debugOn",HOSTNAME_PROP_KEY:"hostname",NAMESAPCE_PROP_KEY:"namespace",FILE_PROP_KEY:"file",WS_OPT_PROP_KEY:"wsOptions",CONTRACT_PROP_KEY:"contract",TOKEN_PROP_KEY:"token",INIT_CLIENT_PROP_KEY:"nodeClient",INIT_CONTRACT_PROP_KEY:"initContract",CONTENT_TYPE_PROP_KEY:"contentType",RETURN_AS_PROP_KEY:"returnAs",NAME_PROP_KEY:"appName",EXPIRED_PROP_KEY:"expired",APP_ROOT_DIR_PROP_KEY:"appRootDir",JWT_TOKEN_OPT_PROP_KEY:"jwtTokenOption",ENABLE_JSONP_PROP_KEY:"enableJsonp",CONTRACT_WITH_DESC_PROP_KEY:"contractWithDesc",WITH_PUBLIC_CONTRACT_PROP_KEY:"withPublicContract",PUBLIC_KEY_NAME_PROP_KEY:"publicKeyFileName",PRIVATE_KEY_NAME_PROP_KEY:"privateKeyFileName",PUBLIC_NAMESPACE_PROP_KEY:"publicNamespace",PRIVATE_NAMESPACE_PROP_KEY:"privateNamespace",SECRET_PROP_KEY:"secret",NSP_INFO_PROP_KEY:"nspInfo",RSA_MODULE_LEN_PROP_KEY:"rsaModulusLength",JSONQL_PATH_PROP_KEY:"jsonqlPath",CONTRACT_KEY_PROP_KEY:"contractKey",CONTRACT_KEY_NAME_PROP_KEY:"contractKeyName",ENABLE_WEB_CONSOLE_PROP_KEY:"enableWebConsole",JS_TYPE_PROP_KEY:"jsType",EXPOSE_ERR_PROP_KEY:"exposeError",CLIENT_CONFIG_PROP_KEY:"clientConfig",AUTO_CONTRACT_PROP_KEY:"autoCreateContract",VALIDATE_RETURNS_PROP_KEY:"validateReturns",ENABLE_UPLOAD_PROP_KEY:"enableFileUpload",FILE_UPLOAD_NAME_PROP_KEY:"fileUploadName",FILE_UPLOAD_DIST_PROP_KEY:"fileUploadDist",FILE_HANDLER_FN_NAME_PROP_KEY:"fileHandlerName",ENABLE_SPLIT_TASK_PROP_KEY:"enableSplitTask",CONNECTED_PROP_KEY:"connected",CACHE_STORE_PROP_KEY:"cacheStore",EVENT_EMITTER_PROP_KEY:"eventEmitter",SUSPEND_EVENT_PROP_KEY:"suspendOnStart",ENABLE_CACHE_RESOLVER_PROP_KEY:"enableCacheResolver",TOKEN_DELIVER_LOCATION_PROP_KEY:"tokenDeliverLocation",COOKIE_PROP_KEY:"cookie",IS_READY_PROP_KEY:"isReady",IS_LOGIN_PROP_KEY:"isLogin",SOCKET_PING_EVENT_NAME:"__ping__",SWITCH_USER_EVENT_NAME:"__switch__",LOGIN_EVENT_NAME:"__login__",LOGOUT_EVENT_NAME:"__logout__",SA_LOGIN_EVENT_NAME:"__standalone_login__",SOCKET_CLIENT_ID_KEY:"__socket_client_id_key__",SOCKET_CLIENT_TS_KEY:"__socket_client_ts_key__",CONNECT_EVENT_NAME:"__connect__",CONNECTED_EVENT_NAME:"__connected__",DISCONNECT_EVENT_NAME:"__disconnect__",INTERCOM_RESOLVER_NAME:"__intercom__",INTER_COM_EVENT_NAMES:["__connect__","__switch__","__disconnect__"],WS_REPLY_TYPE:"__reply__",WS_EVT_NAME:"__event__",WS_DATA_NAME:"__data__",WS_IS_REPLY_KEYS:["__reply__","__event__","__data__"],ON_MESSAGE_FN_NAME:"onMessage",ON_RESULT_FN_NAME:"onResult",ON_ERROR_FN_NAME:"onError",ON_READY_FN_NAME:"onReady",ON_LOGIN_FN_NAME:"onLogin",SEND_MSG_FN_NAME:"send",EMIT_MSG_FN_NAME:"emit",ON_MSG_FN_NAME:"on",TO_MSG_FN_NAME:"to",CLIENT_PROP_NAME:"client",USERDATA_PROP_NAME:"userdata",EMIT_REPLY_TYPE:"emit_reply",EMIT_SEND_TYPE:"emit_send",ACKNOWLEDGE_REPLY_TYPE:"emit_acknowledge",INTER_EMIT_SEND_TYPE:"inter_emit_send",INTER_EMIT_REPLY_TYPE:"inter_emit_reply",NSP_GROUP:"nspGroup",PUBLIC_NAMESPACE:"publicNamespace",JS_WS_SOCKET_IO_NAME:"socket.io",JS_WS_NAME:"ws",JS_PRIMUS_NAME:"primus",GO_WS_COOLPY7_NAME:"coolpy7",DEFAULT_WS_WAIT_TIME:5e3,DEFAULT_RETRY_TIME:3e3,TIMEOUT_ERR_MSG:"timeout",NOT_LOGIN_ERR_MSG:"NOT LOGIN",BASE64_FORMAT:"base64",HEX_FORMAT:"hex",UTF8_FORMAT:"utf8",RSA_FORMATS:["base64","hex"],RSA_ALGO:"RS256",HSA_ALGO:"HS256",JWT_SUPPORT_ALGOS:["RS256","HS256"],RSA_PRIVATE_KEY_HEADER:"BEGIN RSA PRIVATE KEY",RSA_MIN_MODULE_LEN:1024,RSA_MAX_MODULE_LEN:4096,TOKEN_PARAM_NAME:"token",IO_ROUNDTRIP_LOGIN:"roundtip",IO_HANDSHAKE_LOGIN:"handshake",IO_LOGIN_METHODS:["roundtip","handshake"],PEM_EXT:"pem",PUBLIC_KEY_NAME:"publicKey",PRIVATE_KEY_NAME:"privateKey",DEFAULT_PUBLIC_KEY_FILE:"publicKey.pem",DEFAULT_PRIVATE_KEY_FILE:"privateKey.pem",NSP_AUTH_CLIENT:"nspAuthClient",NSP_CLIENT:"nspClient",TOKEN_IN_HEADER:"header",TOKEN_IN_URL:"url",OR_SEPERATOR:"|",BOOLEAN_TYPE:"boolean",STRING_TYPE:"string",NUMBER_TYPE:"number",ARRAY_TYPE:"array",OBJECT_TYPE:"object",FUNCTION_TYPE:"function",ANY_TYPE:"any",BASED_PRIMITIVE_TYPES:["number","string","array","object"],NUMBER_TYPES:["int","integer","float","double","decimal"],SUPPORTED_TYPES:["number","string","boolean","array","object","any"],ARRAY_TS_TYPE_LFT:"Array<",ARRAY_TYPE_LFT:"array.<",ARRAY_TYPE_RGT:">",DEFAULT_VALUE:"defaultvalue"}});var W=T(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.JSONQL_ERRORS_INFO=U.UNKNOWN_ERROR=U.NO_ERROR_MSG=U.NO_STATUS_CODE=U.SERVER_INTERNAL_STATUS=U.NOT_FOUND_STATUS=U.FORBIDDEN_STATUS=U.UNAUTHORIZED_STATUS=U.NOT_ACCEPTABLE_STATUS=void 0;var Re=ge();Object.defineProperty(U,"NOT_ACCEPTABLE_STATUS",{enumerable:!0,get:function(){return Re.NOT_ACCEPTABLE_STATUS}});Object.defineProperty(U,"UNAUTHORIZED_STATUS",{enumerable:!0,get:function(){return Re.UNAUTHORIZED_STATUS}});Object.defineProperty(U,"FORBIDDEN_STATUS",{enumerable:!0,get:function(){return Re.FORBIDDEN_STATUS}});Object.defineProperty(U,"NOT_FOUND_STATUS",{enumerable:!0,get:function(){return Re.NOT_FOUND_STATUS}});Object.defineProperty(U,"SERVER_INTERNAL_STATUS",{enumerable:!0,get:function(){return Re.SERVER_INTERNAL_STATUS}});Object.defineProperty(U,"NO_STATUS_CODE",{enumerable:!0,get:function(){return Re.NO_STATUS_CODE}});Object.defineProperty(U,"NO_ERROR_MSG",{enumerable:!0,get:function(){return Re.NO_ERROR_MSG}});var _h="unknown_error";U.UNKNOWN_ERROR=_h;var fh="__PLACEHOLDER__";U.JSONQL_ERRORS_INFO=fh});var Ua=T(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var ph=W(),Ke=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Ke.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}static get statusCode(){return ph.NOT_ACCEPTABLE_STATUS}};Qr.default=Ke});var Ka=T(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var Eh=W(),Je=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Je.name,Error.captureStackTrace&&Error.captureStackTrace(this,Je)}static get statusCode(){return Eh.SERVER_INTERNAL_STATUS}};Zr.default=Je});var Ja=T(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var dh=W(),ke=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=ke.name,Error.captureStackTrace&&Error.captureStackTrace(this,ke)}static get statusCode(){return dh.FORBIDDEN_STATUS}};en.default=ke});var ka=T(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var hh=W(),Ve=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Ve.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ve)}static get statusCode(){return hh.UNAUTHORIZED_STATUS}};tn.default=Ve});var Va=T(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var vh=W(),xe=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=xe.name,Error.captureStackTrace&&Error.captureStackTrace(this,xe)}static get statusCode(){return vh.UNAUTHORIZED_STATUS}};rn.default=xe});var xa=T(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var yh=W(),Ge=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Ge.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ge)}static get statusCode(){return yh.SERVER_INTERNAL_STATUS}};nn.default=Ge});var Ga=T(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var mh=W(),Be=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Be.name,Error.captureStackTrace&&Error.captureStackTrace(this,Be)}static get statusCode(){return mh.NOT_FOUND_STATUS}};on.default=Be});var Ba=T(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var He=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=He.name,Error.captureStackTrace&&Error.captureStackTrace(this,He)}};an.default=He});var Ha=T(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var We=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=We.name,Error.captureStackTrace&&Error.captureStackTrace(this,We)}};un.default=We});var Wa=T(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var $e=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=$e.name,Error.captureStackTrace&&Error.captureStackTrace(this,$e)}};cn.default=$e});var $a=T(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var ze=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=ze.name,Error.captureStackTrace&&Error.captureStackTrace(this,ze)}};sn.default=ze});var za=T(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});var Oh=W(),Xe=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Xe.name,Error.captureStackTrace&&Error.captureStackTrace(this,Xe)}static get statusCode(){return Oh.NO_STATUS_CODE}};ln.default=Xe});var Xa=T(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var bh=W(),Ot=class extends Error{constructor(a,r){super(r),this.statusCode=a,this.className=Ot.name}static get statusCode(){return bh.SERVER_INTERNAL_STATUS}};_n.default=Ot});var Qa=T(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var Qe=class extends Error{constructor(...a){super(...a),this.message=a[0],this.detail=a[1],this.className=Qe.name,Error.captureStackTrace&&Error.captureStackTrace(this,Qe)}};fn.default=Qe});var pn=T(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.GeneralError=C.JsonqlServerError=C.JsonqlError=C.JsonqlValidationError=C.JsonqlCheckerError=C.JsonqlTypeError=C.JsonqlEnumError=C.JsonqlResolverNotFoundError=C.JsonqlResolverAppError=C.JsonqlContractAuthError=C.JsonqlAuthorisationError=C.JsonqlForbiddenError=C.Jsonql500Error=C.Jsonql406Error=void 0;var $=Xr(),Ah=$.__importDefault(Ua());C.Jsonql406Error=Ah.default;var Ph=$.__importDefault(Ka());C.Jsonql500Error=Ph.default;var Th=$.__importDefault(Ja());C.JsonqlForbiddenError=Th.default;var gh=$.__importDefault(ka());C.JsonqlAuthorisationError=gh.default;var Rh=$.__importDefault(Va());C.JsonqlContractAuthError=Rh.default;var Nh=$.__importDefault(xa());C.JsonqlResolverAppError=Nh.default;var Sh=$.__importDefault(Ga());C.JsonqlResolverNotFoundError=Sh.default;var jh=$.__importDefault(Ba());C.JsonqlEnumError=jh.default;var Ch=$.__importDefault(Ha());C.JsonqlTypeError=Ch.default;var wh=$.__importDefault(Wa());C.JsonqlCheckerError=wh.default;var Ih=$.__importDefault($a());C.JsonqlValidationError=Ih.default;var Fh=$.__importDefault(za());C.JsonqlError=Fh.default;var Mh=$.__importDefault(Xa());C.JsonqlServerError=Mh.default;var qh=$.__importDefault(Qa());C.GeneralError=qh.default});var Za=T(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var F=pn(),Yh=W();function Lh(i){if(Array.isArray(i))throw new F.JsonqlValidationError("",i);let a=i.message||Yh.NO_ERROR_MSG,r=i.detail||i;switch(!0){case i instanceof F.Jsonql406Error:throw new F.Jsonql406Error(a,r);case i instanceof F.Jsonql500Error:throw new F.Jsonql500Error(a,r);case i instanceof F.JsonqlForbiddenError:throw new F.JsonqlForbiddenError(a,r);case i instanceof F.JsonqlAuthorisationError:throw new F.JsonqlAuthorisationError(a,r);case i instanceof F.JsonqlContractAuthError:throw new F.JsonqlContractAuthError(a,r);case i instanceof F.JsonqlResolverAppError:throw new F.JsonqlResolverAppError(a,r);case i instanceof F.JsonqlResolverNotFoundError:throw new F.JsonqlResolverNotFoundError(a,r);case i instanceof F.JsonqlEnumError:throw new F.JsonqlEnumError(a,r);case i instanceof F.JsonqlTypeError:throw new F.JsonqlTypeError(a,r);case i instanceof F.JsonqlCheckerError:throw new F.JsonqlCheckerError(a,r);case i instanceof F.JsonqlValidationError:throw new F.JsonqlValidationError(a,r);case i instanceof F.JsonqlServerError:throw new F.JsonqlServerError(a,r);default:throw new F.JsonqlError(a,r)}}En.default=Lh});var ei=T(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var bt=W();function Dh(i,a=!1){switch(i){case bt.UNAUTHORIZED_STATUS:return a?"JsonqlContractAuthError":"JsonqlAuthorisationError";case bt.FORBIDDEN_STATUS:return"JsonqlForbiddenError";case bt.NOT_FOUND_STATUS:return"JsonqlResolverNotFoundError";case bt.NOT_ACCEPTABLE_STATUS:return"Jsonql406Error";case bt.SERVER_INTERNAL_STATUS:return"Jsonql500Error";default:return"JsonqlError"}}dn.default=Dh});var ni=T(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getErrorNameByInstanceWithDefault=Ze.getErrorNameByInstance=void 0;var ti=W();function Uh(i,a){return i.filter(r=>a instanceof r).map(r=>r.name)}function ri(i,a){let r=Uh(i,a);return r.length?r[0]:ti.UNKNOWN_ERROR}Ze.getErrorNameByInstance=ri;function Kh(i,a){let r=ri(i,a);return r===ti.UNKNOWN_ERROR?"JsonqlError":r}Ze.getErrorNameByInstanceWithDefault=Kh});var oi=T(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.templateErrorObject=void 0;rr.templateErrorObject={message:"",detail:"",className:"",name:""}});var nr=T(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.templateErrorObject=g.getErrorNameByInstance=g.getErrorNameByInstanceWithDefault=g.getErrorByStatus=g.finalCatch=g.JSONQL_ERRORS_INFO=g.UNKNOWN_ERROR=g.GeneralError=g.JsonqlServerError=g.JsonqlError=g.JsonqlValidationError=g.JsonqlCheckerError=g.JsonqlTypeError=g.JsonqlEnumError=g.JsonqlResolverNotFoundError=g.JsonqlResolverAppError=g.JsonqlContractAuthError=g.JsonqlAuthorisationError=g.JsonqlForbiddenError=g.Jsonql500Error=g.Jsonql406Error=void 0;var ai=Xr(),z=pn();Object.defineProperty(g,"Jsonql406Error",{enumerable:!0,get:function(){return z.Jsonql406Error}});Object.defineProperty(g,"Jsonql500Error",{enumerable:!0,get:function(){return z.Jsonql500Error}});Object.defineProperty(g,"JsonqlForbiddenError",{enumerable:!0,get:function(){return z.JsonqlForbiddenError}});Object.defineProperty(g,"JsonqlAuthorisationError",{enumerable:!0,get:function(){return z.JsonqlAuthorisationError}});Object.defineProperty(g,"JsonqlContractAuthError",{enumerable:!0,get:function(){return z.JsonqlContractAuthError}});Object.defineProperty(g,"JsonqlResolverAppError",{enumerable:!0,get:function(){return z.JsonqlResolverAppError}});Object.defineProperty(g,"JsonqlResolverNotFoundError",{enumerable:!0,get:function(){return z.JsonqlResolverNotFoundError}});Object.defineProperty(g,"JsonqlEnumError",{enumerable:!0,get:function(){return z.JsonqlEnumError}});Object.defineProperty(g,"JsonqlTypeError",{enumerable:!0,get:function(){return z.JsonqlTypeError}});Object.defineProperty(g,"JsonqlCheckerError",{enumerable:!0,get:function(){return z.JsonqlCheckerError}});Object.defineProperty(g,"JsonqlValidationError",{enumerable:!0,get:function(){return z.JsonqlValidationError}});Object.defineProperty(g,"JsonqlError",{enumerable:!0,get:function(){return z.JsonqlError}});Object.defineProperty(g,"JsonqlServerError",{enumerable:!0,get:function(){return z.JsonqlServerError}});Object.defineProperty(g,"GeneralError",{enumerable:!0,get:function(){return z.GeneralError}});var ii=W();Object.defineProperty(g,"UNKNOWN_ERROR",{enumerable:!0,get:function(){return ii.UNKNOWN_ERROR}});Object.defineProperty(g,"JSONQL_ERRORS_INFO",{enumerable:!0,get:function(){return ii.JSONQL_ERRORS_INFO}});var Jh=ai.__importDefault(Za());g.finalCatch=Jh.default;var kh=ai.__importDefault(ei());g.getErrorByStatus=kh.default;var ui=ni();Object.defineProperty(g,"getErrorNameByInstanceWithDefault",{enumerable:!0,get:function(){return ui.getErrorNameByInstanceWithDefault}});Object.defineProperty(g,"getErrorNameByInstance",{enumerable:!0,get:function(){return ui.getErrorNameByInstance}});var Vh=oi();Object.defineProperty(g,"templateErrorObject",{enumerable:!0,get:function(){return Vh.templateErrorObject}})});var Ne=T((Z,ee)=>{(()=>{var i=typeof global=="object"&&global&&global.Object===Object&&global,a=i,r=typeof self=="object"&&self&&self.Object===Object&&self,o=a||r||Function("return this")(),u=o,s=u.Symbol,l=s,f=Object.prototype,E=f.hasOwnProperty,b=f.toString,y=l?l.toStringTag:void 0;function v(e){var t=E.call(e,y),n=e[y];try{e[y]=void 0;var c=!0}catch{}var _=b.call(e);return c&&(t?e[y]=n:delete e[y]),_}var O=v,I=Object.prototype,w=I.toString;function S(e){return w.call(e)}var M=S,B="[object Null]",Ee="[object Undefined]",wt=l?l.toStringTag:void 0;function we(e){return e==null?e===void 0?Ee:B:wt&&wt in Object(e)?O(e):M(e)}var ce=we;function lt(e){return e!=null&&typeof e=="object"}var Q=lt,It="[object Number]";function Ar(e){return typeof e=="number"||Q(e)&&ce(e)==It}var bu=Ar;function Au(e){return bu(e)&&e!=+e}var Pu=Au,Tu=Array.isArray,H=Tu,gu="[object String]";function Ru(e){return typeof e=="string"||!H(e)&&Q(e)&&ce(e)==gu}var Hn=Ru;function Nu(e,t){return function(n){return e(t(n))}}var Wn=Nu,Su=Wn(Object.getPrototypeOf,Object),$n=Su,ju="[object Object]",Cu=Function.prototype,wu=Object.prototype,zn=Cu.toString,Iu=wu.hasOwnProperty,Fu=zn.call(Object);function Mu(e){if(!Q(e)||ce(e)!=ju)return!1;var t=$n(e);if(t===null)return!0;var n=Iu.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&zn.call(n)==Fu}var Ft=Mu;function qu(){this.__data__=[],this.size=0}var Yu=qu;function Lu(e,t){return e===t||e!==e&&t!==t}var _t=Lu;function Du(e,t){for(var n=e.length;n--;)if(_t(e[n][0],t))return n;return-1}var Mt=Du,Uu=Array.prototype,Ku=Uu.splice;function Ju(e){var t=this.__data__,n=Mt(t,e);if(n<0)return!1;var c=t.length-1;return n==c?t.pop():Ku.call(t,n,1),--this.size,!0}var ku=Ju;function Vu(e){var t=this.__data__,n=Mt(t,e);return n<0?void 0:t[n][1]}var xu=Vu;function Gu(e){return Mt(this.__data__,e)>-1}var Bu=Gu;function Hu(e,t){var n=this.__data__,c=Mt(n,e);return c<0?(++this.size,n.push([e,t])):n[c][1]=t,this}var Wu=Hu;function Ie(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}Ie.prototype.clear=Yu,Ie.prototype.delete=ku,Ie.prototype.get=xu,Ie.prototype.has=Bu,Ie.prototype.set=Wu;var qt=Ie;function $u(){this.__data__=new qt,this.size=0}var zu=$u;function Xu(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Qu=Xu;function Zu(e){return this.__data__.get(e)}var ec=Zu;function tc(e){return this.__data__.has(e)}var rc=tc;function nc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ae=nc,oc="[object AsyncFunction]",ac="[object Function]",ic="[object GeneratorFunction]",uc="[object Proxy]";function cc(e){if(!ae(e))return!1;var t=ce(e);return t==ac||t==ic||t==oc||t==uc}var Pr=cc,sc=u["__core-js_shared__"],Tr=sc,Xn=function(){var e=/[^.]+$/.exec(Tr&&Tr.keys&&Tr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lc(e){return!!Xn&&Xn in e}var _c=lc,fc=Function.prototype,pc=fc.toString;function Ec(e){if(e!=null){try{return pc.call(e)}catch{}try{return e+""}catch{}}return""}var be=Ec,dc=/[\\^$.*+?()[\]{}|]/g,hc=/^\[object .+?Constructor\]$/,vc=Function.prototype,yc=Object.prototype,mc=vc.toString,Oc=yc.hasOwnProperty,bc=RegExp("^"+mc.call(Oc).replace(dc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ac(e){if(!ae(e)||_c(e))return!1;var t=Pr(e)?bc:hc;return t.test(be(e))}var Pc=Ac;function Tc(e,t){return e?.[t]}var gc=Tc;function Rc(e,t){var n=gc(e,t);return Pc(n)?n:void 0}var Ae=Rc,Nc=Ae(u,"Map"),ft=Nc,Sc=Ae(Object,"create"),pt=Sc;function jc(){this.__data__=pt?pt(null):{},this.size=0}var Cc=jc;function wc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ic=wc,Fc="__lodash_hash_undefined__",Mc=Object.prototype,qc=Mc.hasOwnProperty;function Yc(e){var t=this.__data__;if(pt){var n=t[e];return n===Fc?void 0:n}return qc.call(t,e)?t[e]:void 0}var Lc=Yc,Dc=Object.prototype,Uc=Dc.hasOwnProperty;function Kc(e){var t=this.__data__;return pt?t[e]!==void 0:Uc.call(t,e)}var Jc=Kc,kc="__lodash_hash_undefined__";function Vc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pt&&t===void 0?kc:t,this}var xc=Vc;function Fe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}Fe.prototype.clear=Cc,Fe.prototype.delete=Ic,Fe.prototype.get=Lc,Fe.prototype.has=Jc,Fe.prototype.set=xc;var Qn=Fe;function Gc(){this.size=0,this.__data__={hash:new Qn,map:new(ft||qt),string:new Qn}}var Bc=Gc;function Hc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Wc=Hc;function $c(e,t){var n=e.__data__;return Wc(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Yt=$c;function zc(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t}var Xc=zc;function Qc(e){return Yt(this,e).get(e)}var Zc=Qc;function es(e){return Yt(this,e).has(e)}var ts=es;function rs(e,t){var n=Yt(this,e),c=n.size;return n.set(e,t),this.size+=n.size==c?0:1,this}var ns=rs;function Me(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}Me.prototype.clear=Bc,Me.prototype.delete=Xc,Me.prototype.get=Zc,Me.prototype.has=ts,Me.prototype.set=ns;var Lt=Me,os=200;function as(e,t){var n=this.__data__;if(n instanceof qt){var c=n.__data__;if(!ft||c.length<os-1)return c.push([e,t]),this.size=++n.size,this;n=this.__data__=new Lt(c)}return n.set(e,t),this.size=n.size,this}var is=as;function qe(e){var t=this.__data__=new qt(e);this.size=t.size}qe.prototype.clear=zu,qe.prototype.delete=Qu,qe.prototype.get=ec,qe.prototype.has=rc,qe.prototype.set=is;var Et=qe,us=function(){try{var e=Ae(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Dt=us;function cs(e,t,n){t=="__proto__"&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var gr=cs;function ss(e,t,n){(n!==void 0&&!_t(e[t],n)||n===void 0&&!(t in e))&&gr(e,t,n)}var Rr=ss;function ls(e){return function(t,n,c){for(var _=-1,p=Object(t),h=c(t),d=h.length;d--;){var m=h[e?d:++_];if(n(p[m],m,p)===!1)break}return t}}var _s=ls,fs=_s(),Zn=fs,eo=typeof Z=="object"&&Z&&!Z.nodeType&&Z,to=eo&&typeof ee=="object"&&ee&&!ee.nodeType&&ee,ps=to&&to.exports===eo,ro=ps?u.Buffer:void 0,no=ro?ro.allocUnsafe:void 0;function Es(e,t){if(t)return e.slice();var n=e.length,c=no?no(n):new e.constructor(n);return e.copy(c),c}var ds=Es,hs=u.Uint8Array,Ut=hs;function vs(e){var t=new e.constructor(e.byteLength);return new Ut(t).set(new Ut(e)),t}var ys=vs;function ms(e,t){var n=t?ys(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Os=ms;function bs(e,t){var n=-1,c=e.length;for(t||(t=Array(c));++n<c;)t[n]=e[n];return t}var Nr=bs,oo=Object.create,As=function(){function e(){}return function(t){if(!ae(t))return{};if(oo)return oo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Kt=As,Ps=Object.prototype;function Ts(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ps;return e===n}var Sr=Ts;function gs(e){return typeof e.constructor=="function"&&!Sr(e)?Kt($n(e)):{}}var Rs=gs,Ns="[object Arguments]";function Ss(e){return Q(e)&&ce(e)==Ns}var ao=Ss,io=Object.prototype,js=io.hasOwnProperty,Cs=io.propertyIsEnumerable,ws=ao(function(){return arguments}())?ao:function(e){return Q(e)&&js.call(e,"callee")&&!Cs.call(e,"callee")},dt=ws,Is=9007199254740991;function Fs(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Is}var jr=Fs;function Ms(e){return e!=null&&jr(e.length)&&!Pr(e)}var Ye=Ms;function qs(e){return Q(e)&&Ye(e)}var Ys=qs;function Ls(){return!1}var Ds=Ls,uo=typeof Z=="object"&&Z&&!Z.nodeType&&Z,co=uo&&typeof ee=="object"&&ee&&!ee.nodeType&&ee,Us=co&&co.exports===uo,so=Us?u.Buffer:void 0,Ks=so?so.isBuffer:void 0,Js=Ks||Ds,Jt=Js,ks="[object Arguments]",Vs="[object Array]",xs="[object Boolean]",Gs="[object Date]",Bs="[object Error]",Hs="[object Function]",Ws="[object Map]",$s="[object Number]",zs="[object Object]",Xs="[object RegExp]",Qs="[object Set]",Zs="[object String]",el="[object WeakMap]",tl="[object ArrayBuffer]",rl="[object DataView]",nl="[object Float32Array]",ol="[object Float64Array]",al="[object Int8Array]",il="[object Int16Array]",ul="[object Int32Array]",cl="[object Uint8Array]",sl="[object Uint8ClampedArray]",ll="[object Uint16Array]",_l="[object Uint32Array]",q={};q[nl]=q[ol]=q[al]=q[il]=q[ul]=q[cl]=q[sl]=q[ll]=q[_l]=!0,q[ks]=q[Vs]=q[tl]=q[xs]=q[rl]=q[Gs]=q[Bs]=q[Hs]=q[Ws]=q[$s]=q[zs]=q[Xs]=q[Qs]=q[Zs]=q[el]=!1;function fl(e){return Q(e)&&jr(e.length)&&!!q[ce(e)]}var pl=fl;function El(e){return function(t){return e(t)}}var dl=El,lo=typeof Z=="object"&&Z&&!Z.nodeType&&Z,ht=lo&&typeof ee=="object"&&ee&&!ee.nodeType&&ee,hl=ht&&ht.exports===lo,Cr=hl&&a.process,vl=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||Cr&&Cr.binding&&Cr.binding("util")}catch{}}(),_o=vl,fo=_o&&_o.isTypedArray,yl=fo?dl(fo):pl,wr=yl;function ml(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ir=ml,Ol=Object.prototype,bl=Ol.hasOwnProperty;function Al(e,t,n){var c=e[t];(!(bl.call(e,t)&&_t(c,n))||n===void 0&&!(t in e))&&gr(e,t,n)}var Pl=Al;function Tl(e,t,n,c){var _=!n;n||(n={});for(var p=-1,h=t.length;++p<h;){var d=t[p],m=c?c(n[d],e[d],d,n,e):void 0;m===void 0&&(m=e[d]),_?gr(n,d,m):Pl(n,d,m)}return n}var gl=Tl;function Rl(e,t){for(var n=-1,c=Array(e);++n<e;)c[n]=t(n);return c}var Nl=Rl,Sl=9007199254740991,jl=/^(?:0|[1-9]\d*)$/;function Cl(e,t){var n=typeof e;return t=t??Sl,!!t&&(n=="number"||n!="symbol"&&jl.test(e))&&e>-1&&e%1==0&&e<t}var kt=Cl,wl=Object.prototype,Il=wl.hasOwnProperty;function Fl(e,t){var n=H(e),c=!n&&dt(e),_=!n&&!c&&Jt(e),p=!n&&!c&&!_&&wr(e),h=n||c||_||p,d=h?Nl(e.length,String):[],m=d.length;for(var A in e)(t||Il.call(e,A))&&!(h&&(A=="length"||_&&(A=="offset"||A=="parent")||p&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||kt(A,m)))&&d.push(A);return d}var po=Fl;function Ml(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var ql=Ml,Yl=Object.prototype,Ll=Yl.hasOwnProperty;function Dl(e){if(!ae(e))return ql(e);var t=Sr(e),n=[];for(var c in e)c=="constructor"&&(t||!Ll.call(e,c))||n.push(c);return n}var Ul=Dl;function Kl(e){return Ye(e)?po(e,!0):Ul(e)}var Eo=Kl;function Jl(e){return gl(e,Eo(e))}var kl=Jl;function Vl(e,t,n,c,_,p,h){var d=Ir(e,n),m=Ir(t,n),A=h.get(m);if(A){Rr(e,n,A);return}var P=p?p(d,m,n+"",e,t,h):void 0,R=P===void 0;if(R){var N=H(m),j=!N&&Jt(m),Y=!N&&!j&&wr(m);P=m,N||j||Y?H(d)?P=d:Ys(d)?P=Nr(d):j?(R=!1,P=ds(m,!0)):Y?(R=!1,P=Os(m,!0)):P=[]:Ft(m)||dt(m)?(P=d,dt(d)?P=kl(d):(!ae(d)||Pr(d))&&(P=Rs(m))):R=!1}R&&(h.set(m,P),_(P,m,c,p,h),h.delete(m)),Rr(e,n,P)}var xl=Vl;function ho(e,t,n,c,_){e!==t&&Zn(t,function(p,h){if(_||(_=new Et),ae(p))xl(e,t,h,n,ho,c,_);else{var d=c?c(Ir(e,h),p,h+"",e,t,_):void 0;d===void 0&&(d=p),Rr(e,h,d)}},Eo)}var Gl=ho;function Bl(e){return e}var Vt=Bl;function Hl(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Fr=Hl,vo=Math.max;function Wl(e,t,n){return t=vo(t===void 0?e.length-1:t,0),function(){for(var c=arguments,_=-1,p=vo(c.length-t,0),h=Array(p);++_<p;)h[_]=c[t+_];_=-1;for(var d=Array(t+1);++_<t;)d[_]=c[_];return d[t]=n(h),Fr(e,this,d)}}var $l=Wl;function zl(e){return function(){return e}}var Xl=zl,Ql=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:Xl(t),writable:!0})}:Vt,Zl=Ql,e_=800,t_=16,r_=Date.now;function n_(e){var t=0,n=0;return function(){var c=r_(),_=t_-(c-n);if(n=c,_>0){if(++t>=e_)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var yo=n_,o_=yo(Zl),mo=o_;function a_(e,t){return mo($l(e,t,Vt),e+"")}var i_=a_;function u_(e,t,n){if(!ae(n))return!1;var c=typeof t;return(c=="number"?Ye(n)&&kt(t,n.length):c=="string"&&t in n)?_t(n[t],e):!1}var c_=u_;function s_(e){return i_(function(t,n){var c=-1,_=n.length,p=_>1?n[_-1]:void 0,h=_>2?n[2]:void 0;for(p=e.length>3&&typeof p=="function"?(_--,p):void 0,h&&c_(n[0],n[1],h)&&(p=_<3?void 0:p,_=1),t=Object(t);++c<_;){var d=n[c];d&&e(t,d,c,p)}return t})}var l_=s_,__=l_(function(e,t,n){Gl(e,t,n)}),f_=__,p_=Ae(u,"WeakMap"),vt=p_,E_=vt&&new vt,xt=E_,d_=xt?function(e,t){return xt.set(e,t),e}:Vt,Oo=d_;function h_(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Kt(e.prototype),c=e.apply(n,t);return ae(c)?c:n}}var yt=h_,v_=1;function y_(e,t,n){var c=t&v_,_=yt(e);function p(){var h=this&&this!==u&&this instanceof p?_:e;return h.apply(c?n:this,arguments)}return p}var m_=y_,O_=Math.max;function b_(e,t,n,c){for(var _=-1,p=e.length,h=n.length,d=-1,m=t.length,A=O_(p-h,0),P=Array(m+A),R=!c;++d<m;)P[d]=t[d];for(;++_<h;)(R||_<p)&&(P[n[_]]=e[_]);for(;A--;)P[d++]=e[_++];return P}var bo=b_,A_=Math.max;function P_(e,t,n,c){for(var _=-1,p=e.length,h=-1,d=n.length,m=-1,A=t.length,P=A_(p-d,0),R=Array(P+A),N=!c;++_<P;)R[_]=e[_];for(var j=_;++m<A;)R[j+m]=t[m];for(;++h<d;)(N||_<p)&&(R[j+n[h]]=e[_++]);return R}var Ao=P_;function T_(e,t){for(var n=e.length,c=0;n--;)e[n]===t&&++c;return c}var g_=T_;function R_(){}var Mr=R_,N_=4294967295;function Gt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N_,this.__views__=[]}Gt.prototype=Kt(Mr.prototype),Gt.prototype.constructor=Gt;var qr=Gt;function S_(){}var j_=S_,C_=xt?function(e){return xt.get(e)}:j_,Po=C_,w_={},To=w_,I_=Object.prototype,F_=I_.hasOwnProperty;function M_(e){for(var t=e.name+"",n=To[t],c=F_.call(To,t)?n.length:0;c--;){var _=n[c],p=_.func;if(p==null||p==e)return _.name}return t}var q_=M_;function Bt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Bt.prototype=Kt(Mr.prototype),Bt.prototype.constructor=Bt;var Yr=Bt;function Y_(e){if(e instanceof qr)return e.clone();var t=new Yr(e.__wrapped__,e.__chain__);return t.__actions__=Nr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var L_=Y_,D_=Object.prototype,U_=D_.hasOwnProperty;function Ht(e){if(Q(e)&&!H(e)&&!(e instanceof qr)){if(e instanceof Yr)return e;if(U_.call(e,"__wrapped__"))return L_(e)}return new Yr(e)}Ht.prototype=Mr.prototype,Ht.prototype.constructor=Ht;var K_=Ht;function J_(e){var t=q_(e),n=K_[t];if(typeof n!="function"||!(t in qr.prototype))return!1;if(e===n)return!0;var c=Po(n);return!!c&&e===c[0]}var k_=J_,V_=yo(Oo),go=V_,x_=/\{\n\/\* \[wrapped with (.+)\] \*/,G_=/,? & /;function B_(e){var t=e.match(x_);return t?t[1].split(G_):[]}var H_=B_,W_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function $_(e,t){var n=t.length;if(!n)return e;var c=n-1;return t[c]=(n>1?"& ":"")+t[c],t=t.join(n>2?", ":" "),e.replace(W_,`{
/* [wrapped with `+t+`] */
`)}var z_=$_;function X_(e,t){for(var n=-1,c=e==null?0:e.length;++n<c&&t(e[n],n,e)!==!1;);return e}var Q_=X_;function Z_(e,t,n,c){for(var _=e.length,p=n+(c?1:-1);c?p--:++p<_;)if(t(e[p],p,e))return p;return-1}var ef=Z_;function tf(e){return e!==e}var rf=tf;function nf(e,t,n){for(var c=n-1,_=e.length;++c<_;)if(e[c]===t)return c;return-1}var of=nf;function af(e,t,n){return t===t?of(e,t,n):ef(e,rf,n)}var uf=af;function cf(e,t){var n=e==null?0:e.length;return!!n&&uf(e,t,0)>-1}var sf=cf,lf=1,_f=2,ff=8,pf=16,Ef=32,df=64,hf=128,vf=256,yf=512,mf=[["ary",hf],["bind",lf],["bindKey",_f],["curry",ff],["curryRight",pf],["flip",yf],["partial",Ef],["partialRight",df],["rearg",vf]];function Of(e,t){return Q_(mf,function(n){var c="_."+n[0];t&n[1]&&!sf(e,c)&&e.push(c)}),e.sort()}var bf=Of;function Af(e,t,n){var c=t+"";return mo(e,z_(c,bf(H_(c),n)))}var Ro=Af,Pf=1,Tf=2,gf=4,Rf=8,No=32,So=64;function Nf(e,t,n,c,_,p,h,d,m,A){var P=t&Rf,R=P?h:void 0,N=P?void 0:h,j=P?p:void 0,Y=P?void 0:p;t|=P?No:So,t&=~(P?So:No),t&gf||(t&=~(Pf|Tf));var K=[e,t,_,j,R,Y,N,d,m,A],V=n.apply(void 0,K);return k_(e)&&go(V,K),V.placeholder=c,Ro(V,e,t)}var jo=Nf;function Sf(e){var t=e;return t.placeholder}var Co=Sf,jf=Math.min;function Cf(e,t){for(var n=e.length,c=jf(t.length,n),_=Nr(e);c--;){var p=t[c];e[c]=kt(p,n)?_[p]:void 0}return e}var wf=Cf,wo="__lodash_placeholder__";function If(e,t){for(var n=-1,c=e.length,_=0,p=[];++n<c;){var h=e[n];(h===t||h===wo)&&(e[n]=wo,p[_++]=n)}return p}var Wt=If,Ff=1,Mf=2,qf=8,Yf=16,Lf=128,Df=512;function Io(e,t,n,c,_,p,h,d,m,A){var P=t&Lf,R=t&Ff,N=t&Mf,j=t&(qf|Yf),Y=t&Df,K=N?void 0:yt(e);function V(){for(var x=arguments.length,L=Array(x),Le=x;Le--;)L[Le]=arguments[Le];if(j)var Te=Co(V),De=g_(L,Te);if(c&&(L=bo(L,c,_,j)),p&&(L=Ao(L,p,h,j)),x-=De,j&&x<A){var oh=Wt(L,Te);return jo(e,t,Io,V.placeholder,n,L,oh,d,m,A-x)}var da=R?n:this,$r=N?da[e]:e;return x=L.length,d?L=wf(L,d):Y&&x>1&&L.reverse(),P&&m<x&&(L.length=m),this&&this!==u&&this instanceof V&&($r=K||yt($r)),$r.apply(da,L)}return V}var Fo=Io;function Uf(e,t,n){var c=yt(e);function _(){for(var p=arguments.length,h=Array(p),d=p,m=Co(_);d--;)h[d]=arguments[d];var A=p<3&&h[0]!==m&&h[p-1]!==m?[]:Wt(h,m);if(p-=A.length,p<n)return jo(e,t,Fo,_.placeholder,void 0,h,A,void 0,void 0,n-p);var P=this&&this!==u&&this instanceof _?c:e;return Fr(P,this,h)}return _}var Kf=Uf,Jf=1;function kf(e,t,n,c){var _=t&Jf,p=yt(e);function h(){for(var d=-1,m=arguments.length,A=-1,P=c.length,R=Array(P+m),N=this&&this!==u&&this instanceof h?p:e;++A<P;)R[A]=c[A];for(;m--;)R[A++]=arguments[++d];return Fr(N,_?n:this,R)}return h}var Vf=kf,Mo="__lodash_placeholder__",Lr=1,xf=2,Gf=4,qo=8,mt=128,Yo=256,Bf=Math.min;function Hf(e,t){var n=e[1],c=t[1],_=n|c,p=_<(Lr|xf|mt),h=c==mt&&n==qo||c==mt&&n==Yo&&e[7].length<=t[8]||c==(mt|Yo)&&t[7].length<=t[8]&&n==qo;if(!(p||h))return e;c&Lr&&(e[2]=t[2],_|=n&Lr?0:Gf);var d=t[3];if(d){var m=e[3];e[3]=m?bo(m,d,t[4]):d,e[4]=m?Wt(e[3],Mo):t[4]}return d=t[5],d&&(m=e[5],e[5]=m?Ao(m,d,t[6]):d,e[6]=m?Wt(e[5],Mo):t[6]),d=t[7],d&&(e[7]=d),c&mt&&(e[8]=e[8]==null?t[8]:Bf(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=_,e}var Wf=Hf,$f=/\s/;function zf(e){for(var t=e.length;t--&&$f.test(e.charAt(t)););return t}var Xf=zf,Qf=/^\s+/;function Zf(e){return e&&e.slice(0,Xf(e)+1).replace(Qf,"")}var ep=Zf,tp="[object Symbol]";function rp(e){return typeof e=="symbol"||Q(e)&&ce(e)==tp}var $t=rp,Lo=0/0,np=/^[-+]0x[0-9a-f]+$/i,op=/^0b[01]+$/i,ap=/^0o[0-7]+$/i,ip=parseInt;function up(e){if(typeof e=="number")return e;if($t(e))return Lo;if(ae(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ae(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ep(e);var n=op.test(e);return n||ap.test(e)?ip(e.slice(2),n?2:8):np.test(e)?Lo:+e}var cp=up,Do=1/0,sp=17976931348623157e292;function lp(e){if(!e)return e===0?e:0;if(e=cp(e),e===Do||e===-Do){var t=e<0?-1:1;return t*sp}return e===e?e:0}var _p=lp;function fp(e){var t=_p(e),n=t%1;return t===t?n?t-n:t:0}var Uo=fp,pp="Expected a function",Ko=1,Ep=2,Dr=8,Ur=16,Kr=32,Jo=64,ko=Math.max;function dp(e,t,n,c,_,p,h,d){var m=t&Ep;if(!m&&typeof e!="function")throw new TypeError(pp);var A=c?c.length:0;if(A||(t&=~(Kr|Jo),c=_=void 0),h=h===void 0?h:ko(Uo(h),0),d=d===void 0?d:Uo(d),A-=_?_.length:0,t&Jo){var P=c,R=_;c=_=void 0}var N=m?void 0:Po(e),j=[e,t,n,c,_,P,R,p,h,d];if(N&&Wf(j,N),e=j[0],t=j[1],n=j[2],c=j[3],_=j[4],d=j[9]=j[9]===void 0?m?0:e.length:ko(j[9]-A,0),!d&&t&(Dr|Ur)&&(t&=~(Dr|Ur)),!t||t==Ko)var Y=m_(e,t,n);else t==Dr||t==Ur?Y=Kf(e,t,d):(t==Kr||t==(Ko|Kr))&&!_.length?Y=Vf(e,t,n,c):Y=Fo.apply(void 0,j);var K=N?Oo:go;return Ro(K(Y,j),e,t)}var hp=dp,vp=8;function Jr(e,t,n){t=n?void 0:t;var c=hp(e,vp,void 0,void 0,void 0,void 0,void 0,t);return c.placeholder=Jr.placeholder,c}Jr.placeholder={};var yy=Jr;function yp(e,t){for(var n=-1,c=t.length,_=e.length;++n<c;)e[_+n]=t[n];return e}var Vo=yp,xo=l?l.isConcatSpreadable:void 0;function mp(e){return H(e)||dt(e)||!!(xo&&e&&e[xo])}var Op=mp;function Go(e,t,n,c,_){var p=-1,h=e.length;for(n||(n=Op),_||(_=[]);++p<h;){var d=e[p];t>0&&n(d)?t>1?Go(d,t-1,n,c,_):Vo(_,d):c||(_[_.length]=d)}return _}var bp=Go;function Ap(e,t){for(var n=-1,c=e==null?0:e.length,_=Array(c);++n<c;)_[n]=t(e[n],n,e);return _}var Bo=Ap,Pp="__lodash_hash_undefined__";function Tp(e){return this.__data__.set(e,Pp),this}var gp=Tp;function Rp(e){return this.__data__.has(e)}var Np=Rp;function zt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Lt;++t<n;)this.add(e[t])}zt.prototype.add=zt.prototype.push=gp,zt.prototype.has=Np;var Sp=zt;function jp(e,t){for(var n=-1,c=e==null?0:e.length;++n<c;)if(t(e[n],n,e))return!0;return!1}var Cp=jp;function wp(e,t){return e.has(t)}var Ip=wp,Fp=1,Mp=2;function qp(e,t,n,c,_,p){var h=n&Fp,d=e.length,m=t.length;if(d!=m&&!(h&&m>d))return!1;var A=p.get(e),P=p.get(t);if(A&&P)return A==t&&P==e;var R=-1,N=!0,j=n&Mp?new Sp:void 0;for(p.set(e,t),p.set(t,e);++R<d;){var Y=e[R],K=t[R];if(c)var V=h?c(K,Y,R,t,e,p):c(Y,K,R,e,t,p);if(V!==void 0){if(V)continue;N=!1;break}if(j){if(!Cp(t,function(x,L){if(!Ip(j,L)&&(Y===x||_(Y,x,n,c,p)))return j.push(L)})){N=!1;break}}else if(!(Y===K||_(Y,K,n,c,p))){N=!1;break}}return p.delete(e),p.delete(t),N}var Ho=qp;function Yp(e){var t=-1,n=Array(e.size);return e.forEach(function(c,_){n[++t]=[_,c]}),n}var Lp=Yp;function Dp(e){var t=-1,n=Array(e.size);return e.forEach(function(c){n[++t]=c}),n}var Up=Dp,Kp=1,Jp=2,kp="[object Boolean]",Vp="[object Date]",xp="[object Error]",Gp="[object Map]",Bp="[object Number]",Hp="[object RegExp]",Wp="[object Set]",$p="[object String]",zp="[object Symbol]",Xp="[object ArrayBuffer]",Qp="[object DataView]",Wo=l?l.prototype:void 0,kr=Wo?Wo.valueOf:void 0;function Zp(e,t,n,c,_,p,h){switch(n){case Qp:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xp:return!(e.byteLength!=t.byteLength||!p(new Ut(e),new Ut(t)));case kp:case Vp:case Bp:return _t(+e,+t);case xp:return e.name==t.name&&e.message==t.message;case Hp:case $p:return e==t+"";case Gp:var d=Lp;case Wp:var m=c&Kp;if(d||(d=Up),e.size!=t.size&&!m)return!1;var A=h.get(e);if(A)return A==t;c|=Jp,h.set(e,t);var P=Ho(d(e),d(t),c,_,p,h);return h.delete(e),P;case zp:if(kr)return kr.call(e)==kr.call(t)}return!1}var eE=Zp;function tE(e,t,n){var c=t(e);return H(e)?c:Vo(c,n(e))}var rE=tE;function nE(e,t){for(var n=-1,c=e==null?0:e.length,_=0,p=[];++n<c;){var h=e[n];t(h,n,e)&&(p[_++]=h)}return p}var oE=nE;function aE(){return[]}var iE=aE,uE=Object.prototype,cE=uE.propertyIsEnumerable,$o=Object.getOwnPropertySymbols,sE=$o?function(e){return e==null?[]:(e=Object(e),oE($o(e),function(t){return cE.call(e,t)}))}:iE,lE=sE,_E=Wn(Object.keys,Object),fE=_E,pE=Object.prototype,EE=pE.hasOwnProperty;function dE(e){if(!Sr(e))return fE(e);var t=[];for(var n in Object(e))EE.call(e,n)&&n!="constructor"&&t.push(n);return t}var hE=dE;function vE(e){return Ye(e)?po(e):hE(e)}var Vr=vE;function yE(e){return rE(e,Vr,lE)}var zo=yE,mE=1,OE=Object.prototype,bE=OE.hasOwnProperty;function AE(e,t,n,c,_,p){var h=n&mE,d=zo(e),m=d.length,A=zo(t),P=A.length;if(m!=P&&!h)return!1;for(var R=m;R--;){var N=d[R];if(!(h?N in t:bE.call(t,N)))return!1}var j=p.get(e),Y=p.get(t);if(j&&Y)return j==t&&Y==e;var K=!0;p.set(e,t),p.set(t,e);for(var V=h;++R<m;){N=d[R];var x=e[N],L=t[N];if(c)var Le=h?c(L,x,N,t,e,p):c(x,L,N,e,t,p);if(!(Le===void 0?x===L||_(x,L,n,c,p):Le)){K=!1;break}V||(V=N=="constructor")}if(K&&!V){var Te=e.constructor,De=t.constructor;Te!=De&&"constructor"in e&&"constructor"in t&&!(typeof Te=="function"&&Te instanceof Te&&typeof De=="function"&&De instanceof De)&&(K=!1)}return p.delete(e),p.delete(t),K}var PE=AE,TE=Ae(u,"DataView"),xr=TE,gE=Ae(u,"Promise"),Gr=gE,RE=Ae(u,"Set"),Br=RE,Xo="[object Map]",NE="[object Object]",Qo="[object Promise]",Zo="[object Set]",ea="[object WeakMap]",ta="[object DataView]",SE=be(xr),jE=be(ft),CE=be(Gr),wE=be(Br),IE=be(vt),Pe=ce;(xr&&Pe(new xr(new ArrayBuffer(1)))!=ta||ft&&Pe(new ft)!=Xo||Gr&&Pe(Gr.resolve())!=Qo||Br&&Pe(new Br)!=Zo||vt&&Pe(new vt)!=ea)&&(Pe=function(e){var t=ce(e),n=t==NE?e.constructor:void 0,c=n?be(n):"";if(c)switch(c){case SE:return ta;case jE:return Xo;case CE:return Qo;case wE:return Zo;case IE:return ea}return t});var ra=Pe,FE=1,na="[object Arguments]",oa="[object Array]",Xt="[object Object]",ME=Object.prototype,aa=ME.hasOwnProperty;function qE(e,t,n,c,_,p){var h=H(e),d=H(t),m=h?oa:ra(e),A=d?oa:ra(t);m=m==na?Xt:m,A=A==na?Xt:A;var P=m==Xt,R=A==Xt,N=m==A;if(N&&Jt(e)){if(!Jt(t))return!1;h=!0,P=!1}if(N&&!P)return p||(p=new Et),h||wr(e)?Ho(e,t,n,c,_,p):eE(e,t,m,n,c,_,p);if(!(n&FE)){var j=P&&aa.call(e,"__wrapped__"),Y=R&&aa.call(t,"__wrapped__");if(j||Y){var K=j?e.value():e,V=Y?t.value():t;return p||(p=new Et),_(K,V,n,c,p)}}return N?(p||(p=new Et),PE(e,t,n,c,_,p)):!1}var YE=qE;function ia(e,t,n,c,_){return e===t?!0:e==null||t==null||!Q(e)&&!Q(t)?e!==e&&t!==t:YE(e,t,n,c,ia,_)}var ua=ia,LE=1,DE=2;function UE(e,t,n,c){var _=n.length,p=_,h=!c;if(e==null)return!p;for(e=Object(e);_--;){var d=n[_];if(h&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++_<p;){d=n[_];var m=d[0],A=e[m],P=d[1];if(h&&d[2]){if(A===void 0&&!(m in e))return!1}else{var R=new Et;if(c)var N=c(A,P,m,e,t,R);if(!(N===void 0?ua(P,A,LE|DE,c,R):N))return!1}}return!0}var KE=UE;function JE(e){return e===e&&!ae(e)}var ca=JE;function kE(e){for(var t=Vr(e),n=t.length;n--;){var c=t[n],_=e[c];t[n]=[c,_,ca(_)]}return t}var VE=kE;function xE(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var sa=xE;function GE(e){var t=VE(e);return t.length==1&&t[0][2]?sa(t[0][0],t[0][1]):function(n){return n===e||KE(n,e,t)}}var BE=GE,HE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WE=/^\w*$/;function $E(e,t){if(H(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||$t(e)?!0:WE.test(e)||!HE.test(e)||t!=null&&e in Object(t)}var Hr=$E,zE="Expected a function";function Wr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(zE);var n=function(){var c=arguments,_=t?t.apply(this,c):c[0],p=n.cache;if(p.has(_))return p.get(_);var h=e.apply(this,c);return n.cache=p.set(_,h)||p,h};return n.cache=new(Wr.Cache||Lt),n}Wr.Cache=Lt;var XE=Wr,QE=500;function ZE(e){var t=XE(e,function(c){return n.size===QE&&n.clear(),c}),n=t.cache;return t}var ed=ZE,td=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rd=/\\(\\)?/g,nd=ed(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(td,function(n,c,_,p){t.push(_?p.replace(rd,"$1"):c||n)}),t}),od=nd,ad=1/0,la=l?l.prototype:void 0,_a=la?la.toString:void 0;function fa(e){if(typeof e=="string")return e;if(H(e))return Bo(e,fa)+"";if($t(e))return _a?_a.call(e):"";var t=e+"";return t=="0"&&1/e==-ad?"-0":t}var id=fa;function ud(e){return e==null?"":id(e)}var cd=ud;function sd(e,t){return H(e)?e:Hr(e,t)?[e]:od(cd(e))}var pa=sd,ld=1/0;function _d(e){if(typeof e=="string"||$t(e))return e;var t=e+"";return t=="0"&&1/e==-ld?"-0":t}var Qt=_d;function fd(e,t){t=pa(t,e);for(var n=0,c=t.length;e!=null&&n<c;)e=e[Qt(t[n++])];return n&&n==c?e:void 0}var Ea=fd;function pd(e,t,n){var c=e==null?void 0:Ea(e,t);return c===void 0?n:c}var Ed=pd;function dd(e,t){return e!=null&&t in Object(e)}var hd=dd;function vd(e,t,n){t=pa(t,e);for(var c=-1,_=t.length,p=!1;++c<_;){var h=Qt(t[c]);if(!(p=e!=null&&n(e,h)))break;e=e[h]}return p||++c!=_?p:(_=e==null?0:e.length,!!_&&jr(_)&&kt(h,_)&&(H(e)||dt(e)))}var yd=vd;function md(e,t){return e!=null&&yd(e,t,hd)}var Od=md,bd=1,Ad=2;function Pd(e,t){return Hr(e)&&ca(t)?sa(Qt(e),t):function(n){var c=Ed(n,e);return c===void 0&&c===t?Od(n,e):ua(t,c,bd|Ad)}}var Td=Pd;function gd(e){return function(t){return t?.[e]}}var Rd=gd;function Nd(e){return function(t){return Ea(t,e)}}var Sd=Nd;function jd(e){return Hr(e)?Rd(Qt(e)):Sd(e)}var Cd=jd;function wd(e){return typeof e=="function"?e:e==null?Vt:typeof e=="object"?H(e)?Td(e[0],e[1]):BE(e):Cd(e)}var Id=wd;function Fd(e,t){return e&&Zn(e,t,Vr)}var Md=Fd;function qd(e,t){return function(n,c){if(n==null)return n;if(!Ye(n))return e(n,c);for(var _=n.length,p=t?_:-1,h=Object(n);(t?p--:++p<_)&&c(h[p],p,h)!==!1;);return n}}var Yd=qd,Ld=Yd(Md),Dd=Ld;function Ud(e,t){var n=-1,c=Ye(e)?Array(e.length):[];return Dd(e,function(_,p,h){c[++n]=t(_,p,h)}),c}var Kd=Ud;function Jd(e,t){var n=H(e)?Bo:Kd;return n(e,Id(t,3))}var kd=Jd;function Vd(e,t){return bp(kd(e,t),1)}var xd=Vd;function Gd(e,t=!1){let n=parseFloat(e);if(!Pu(n))return n;if(t)throw new Error(`${e} is not number like`);return e}function my(e,t=!1){let n=e.toLowerCase();if(n==="false")return!1;if(n==="true")return!0;if(t)throw new Error(`${e} is not boolean like`);return e}function Oy(e,t){if(t.indexOf(".")>-1){let n=t.split(".").map(p=>Gd(p)),c=n.length,_=null;for(let p=0;p<c;++p){let h=n[p];_!==null?_=_[h]:_=e[h]}return _}return e[t]}var Bd=(e,t)=>!!e.filter(n=>n===t).length,Hd=e=>Array.isArray(e)?e:[e],Wd=e=>e&&Object.keys(e).length===0&&e.constructor===Object,by=(e,t=!0)=>{try{return Hn(e)?JSON.parse(e):JSON.parse(JSON.stringify(e))}catch(n){if(t)return e;throw n}},Ay=(e,t)=>{try{let n=Object.keys(e);return Bd(n,t)}catch{return!1}},Py=(...e)=>e.join("_"),Ty=(e,t)=>t&&Ft(t)&&e in t?t[e]:void 0,$d=e=>e!=null&&(e+"").trim()!=="";function zd(e,t=!1){return Array.isArray(e)?t?!!e.length:!1:Ft(e)?t?!Wd(e):!1:$d(e)}var gy=(e,t)=>!zd(e,t),Ry=e=>typeof e=="function"?!0:(console.error(`Expect to be Function type! Got ${typeof e}`),!1),Ny=(...e)=>Reflect.apply(Object.assign,Object,e),Sy=()=>!1,jy=e=>Object.freeze(e),Cy=e=>{console.dir(e,{depth:null})};function wy(e,...t){return e.replace(/{([0-9]+)}/g,(n,c)=>typeof t[c]>"u"?n:t[c])}var Iy=(e,...t)=>(...n)=>t.reduce((c,_)=>Reflect.apply(_,null,Hd(c)),Reflect.apply(e,null,n));function Fy(e,t=!1){return e.reduce((n,c)=>n.then(_=>c.then(p=>t===!1?[..._,p]:f_(_,p))),Promise.resolve(t===!1?[]:Ft(t)?t:{}))}function Xd(e,...t){return(...n)=>t.reduce((c,_)=>c.then(p=>_(p)),Reflect.apply(e,null,n))}function My(e,...t){let n=xd(e),c=Reflect.apply(Xd,null,n);return Reflect.apply(c,null,t)}var qy=e=>Qd(e.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()),Qd=e=>{let t=e.substring(0,1);return t!=="_"&&t!=="-"?e:e.substring(1)};function Yy(...e){try{window&&window.DEBUG&&Reflect.apply(console.log,console,e)}catch{}}var Ly=e=>{let t=[e];return(...n)=>{try{window&&window.JSONQL_DEBUG&&Reflect.apply(console.info,console,t.concat(n))}catch{}}};function Dy(e,t,n,c=null){return Object.getOwnPropertyDescriptor(e,t)===void 0&&Object.defineProperty(e,t,{set:n,get:c===null?function(){return null}:c}),e}function Zd(e,t){let n=Object.getOwnPropertyDescriptor(e,t);return n!==void 0&&n.value?n.value:n}function Uy(e,t,n,c=!1){let _=Zd(e,t);return c===!1&&_!==void 0||Object.defineProperty(e,t,{value:n,writable:c}),e}function eh(e){return e instanceof RegExp}function Ky(e){switch(!0){case eh(e)===!0:return e;case Hn(e)===!0:return new RegExp(e);default:return!1}}var th=(e=!1)=>{let t=Date.now();return e?Math.floor(t/1e3):t},rh=(e,t)=>{let n=[];for(let c in t)n.push([c,t[c]].join("="));return[e,n.join("&")].join("?")},Jy=e=>rh(e,nh()),nh=()=>({_cb:th()})})()});var Pt=T(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.merge=ne.isFunction=ne.isPlainObject=ne.isString=ne.isNaN=void 0;var At=Ne();Object.defineProperty(ne,"isNaN",{enumerable:!0,get:function(){return At.isNaN}});Object.defineProperty(ne,"isString",{enumerable:!0,get:function(){return At.isString}});Object.defineProperty(ne,"isPlainObject",{enumerable:!0,get:function(){return At.isPlainObject}});Object.defineProperty(ne,"isFunction",{enumerable:!0,get:function(){return At.isFunction}});Object.defineProperty(ne,"merge",{enumerable:!0,get:function(){return At.merge}})});var hn=T(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.checkString=void 0;var xh=Pt();function Gh(i){return(i+"").trim()!==""?(0,xh.isString)(i):!1}or.checkString=Gh});var vn=T(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.checkBoolean=void 0;function Bh(i){return i!=null&&typeof i=="boolean"}ar.checkBoolean=Bh});var yn=T(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.checkUnsigned=se.checkFloat=se.checkInteger=se.checkNumber=void 0;var ci=Pt();function Hh(i){return(0,ci.isString)(i)?!1:!(0,ci.isNaN)(parseFloat(i+""))}se.checkNumber=Hh;function Wh(i){console.log("@TODO checkInteger",i)}se.checkInteger=Wh;function $h(i){console.log("@TODO checkFloat",i)}se.checkFloat=$h;function zh(i){console.log("@TODO check unsigned",i)}se.checkUnsigned=zh});var mn=T(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.checkAny=void 0;function Xh(i,a=!0){return i!==void 0&&i!==""&&(i+"").trim()!==""&&(a===!1||a===!0&&i!==null)}ir.checkAny=Xh});var Tt=T(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.combineCheck=void 0;var Qh=yn(),Zh=hn(),ev=vn(),tv=mn(),On=ge();function rv(i){switch(i){case On.NUMBER_TYPE:return Qh.checkNumber;case On.STRING_TYPE:return Zh.checkString;case On.BOOLEAN_TYPE:return ev.checkBoolean;default:return tv.checkAny}}ur.combineCheck=rv});var cr=T(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.arrayTypeHandler=he.isArrayLike=he.checkArray=void 0;var nv=Pt(),bn=Tt(),de=ge(),si={ts:de.ARRAY_TS_TYPE_LFT,jsdoc:de.ARRAY_TYPE_LFT};function _i(i,a){if(Array.isArray(i)){if(!a)return!0;let r;return Array.isArray(a)?r=i.filter(o=>{let u=a.length;for(let s=0;s<u;++s){let l=a[s];if(l===de.ARRAY_TYPE&&Array.isArray(o)||l===de.OBJECT_TYPE&&(0,nv.isPlainObject)(o)||(0,bn.combineCheck)(l)(o))return!1}return!0}):r=i.filter(o=>!(0,bn.combineCheck)(a)(o)),!(r.length>0)}return!1}he.checkArray=_i;function li(i,a="ts"){let r=si[a];if(!r)throw new Error(`Syntax not supported! ${Object.keys(si)}`);if(i.indexOf(r)>-1&&i.indexOf(de.ARRAY_TYPE_RGT)>-1){let o=i.replace(r,"").replace(de.ARRAY_TYPE_RGT,"");return o.indexOf(de.OR_SEPERATOR)?o.split(de.OR_SEPERATOR):[o]}return!1}function ov(i){return li(i)?!1:li(i,"jsdoc")}he.isArrayLike=ov;function av(i,a){let{arg:r}=i;return a.length>1?!r.filter(o=>!(a.length>a.filter(u=>!(0,bn.combineCheck)(u)(o)).length)).length:a.length>a.filter(o=>!_i(r,o)).length}he.arrayTypeHandler=av});var Pn=T(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.isEmptyObject=ve.objectTypeHandler=ve.checkObject=void 0;var fi=Pt(),iv=Tt(),An=cr();function pi(i,a){if((0,fi.isPlainObject)(i)){if(!a)return!0;if(typeof a=="string")return a in i;if((0,An.checkArray)(a))return typeof a[0]=="string"?uv(i,a):cv(i,a)}return!1}ve.checkObject=pi;function uv(i,a){return!a.filter(r=>!(r in i)).length}function cv(i,a){return!a.filter(r=>{let o=i[r.name];return!(r.type.length>r.type.filter(u=>{let s;return o!==void 0?(s=(0,An.isArrayLike)(u))!==!1?!(0,An.arrayTypeHandler)({arg:o},s):!(0,iv.combineCheck)(u)(o):!0}).length)}).length}var sv=function(i){let{arg:a,param:r}=i,o=[a];return Array.isArray(r.keys)&&r.keys.length&&o.push(r.keys),Reflect.apply(pi,null,o)};ve.objectTypeHandler=sv;var lv=function(i){return(0,fi.isPlainObject)(i)?!Object.keys(i).length:!1};ve.isEmptyObject=lv});var tt=T((Om,lr)=>{var Ei,di,hi,vi,yi,mi,Oi,bi,Ai,sr,Tn,Pi,Ti,et,gi,Ri,Ni,Si,ji,Ci,wi,Ii,Fi;(function(i){var a=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(o){i(r(a,r(o)))}):typeof lr=="object"&&typeof lr.exports=="object"?i(r(a,r(lr.exports))):i(r(a));function r(o,u){return o!==a&&(typeof Object.create=="function"?Object.defineProperty(o,"__esModule",{value:!0}):o.__esModule=!0),function(s,l){return o[s]=u?u(s,l):l}}})(function(i){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var u in o)o.hasOwnProperty(u)&&(r[u]=o[u])};Ei=function(r,o){a(r,o);function u(){this.constructor=r}r.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)},di=Object.assign||function(r){for(var o,u=1,s=arguments.length;u<s;u++){o=arguments[u];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])}return r},hi=function(r,o){var u={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&o.indexOf(s)<0&&(u[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)o.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(u[s[l]]=r[s[l]]);return u},vi=function(r,o,u,s){var l=arguments.length,f=l<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,u):s,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,o,u,s);else for(var b=r.length-1;b>=0;b--)(E=r[b])&&(f=(l<3?E(f):l>3?E(o,u,f):E(o,u))||f);return l>3&&f&&Object.defineProperty(o,u,f),f},yi=function(r,o){return function(u,s){o(u,s,r)}},mi=function(r,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,o)},Oi=function(r,o,u,s){function l(f){return f instanceof u?f:new u(function(E){E(f)})}return new(u||(u=Promise))(function(f,E){function b(O){try{v(s.next(O))}catch(I){E(I)}}function y(O){try{v(s.throw(O))}catch(I){E(I)}}function v(O){O.done?f(O.value):l(O.value).then(b,y)}v((s=s.apply(r,o||[])).next())})},bi=function(r,o){var u={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,l,f,E;return E={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function b(v){return function(O){return y([v,O])}}function y(v){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,l&&(f=v[0]&2?l.return:v[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,v[1])).done)return f;switch(l=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return u.label++,{value:v[1],done:!1};case 5:u.label++,l=v[1],v=[0];continue;case 7:v=u.ops.pop(),u.trys.pop();continue;default:if(f=u.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){u=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){u.label=v[1];break}if(v[0]===6&&u.label<f[1]){u.label=f[1],f=v;break}if(f&&u.label<f[2]){u.label=f[2],u.ops.push(v);break}f[2]&&u.ops.pop(),u.trys.pop();continue}v=o.call(r,u)}catch(O){v=[6,O],l=0}finally{s=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Fi=function(r,o,u,s){s===void 0&&(s=u),r[s]=o[u]},Ai=function(r,o){for(var u in r)u!=="default"&&!o.hasOwnProperty(u)&&(o[u]=r[u])},sr=function(r){var o=typeof Symbol=="function"&&Symbol.iterator,u=o&&r[o],s=0;if(u)return u.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},Tn=function(r,o){var u=typeof Symbol=="function"&&r[Symbol.iterator];if(!u)return r;var s=u.call(r),l,f=[],E;try{for(;(o===void 0||o-- >0)&&!(l=s.next()).done;)f.push(l.value)}catch(b){E={error:b}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(E)throw E.error}}return f},Pi=function(){for(var r=[],o=0;o<arguments.length;o++)r=r.concat(Tn(arguments[o]));return r},Ti=function(){for(var r=0,o=0,u=arguments.length;o<u;o++)r+=arguments[o].length;for(var s=Array(r),l=0,o=0;o<u;o++)for(var f=arguments[o],E=0,b=f.length;E<b;E++,l++)s[l]=f[E];return s},et=function(r){return this instanceof et?(this.v=r,this):new et(r)},gi=function(r,o,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=u.apply(r,o||[]),l,f=[];return l={},E("next"),E("throw"),E("return"),l[Symbol.asyncIterator]=function(){return this},l;function E(w){s[w]&&(l[w]=function(S){return new Promise(function(M,B){f.push([w,S,M,B])>1||b(w,S)})})}function b(w,S){try{y(s[w](S))}catch(M){I(f[0][3],M)}}function y(w){w.value instanceof et?Promise.resolve(w.value.v).then(v,O):I(f[0][2],w)}function v(w){b("next",w)}function O(w){b("throw",w)}function I(w,S){w(S),f.shift(),f.length&&b(f[0][0],f[0][1])}},Ri=function(r){var o,u;return o={},s("next"),s("throw",function(l){throw l}),s("return"),o[Symbol.iterator]=function(){return this},o;function s(l,f){o[l]=r[l]?function(E){return(u=!u)?{value:et(r[l](E)),done:l==="return"}:f?f(E):E}:f}},Ni=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r[Symbol.asyncIterator],u;return o?o.call(r):(r=typeof sr=="function"?sr(r):r[Symbol.iterator](),u={},s("next"),s("throw"),s("return"),u[Symbol.asyncIterator]=function(){return this},u);function s(f){u[f]=r[f]&&function(E){return new Promise(function(b,y){E=r[f](E),l(b,y,E.done,E.value)})}}function l(f,E,b,y){Promise.resolve(y).then(function(v){f({value:v,done:b})},E)}},Si=function(r,o){return Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,r},ji=function(r){if(r&&r.__esModule)return r;var o={};if(r!=null)for(var u in r)Object.hasOwnProperty.call(r,u)&&(o[u]=r[u]);return o.default=r,o},Ci=function(r){return r&&r.__esModule?r:{default:r}},wi=function(r,o){if(!o.has(r))throw new TypeError("attempted to get private field on non-instance");return o.get(r)},Ii=function(r,o,u){if(!o.has(r))throw new TypeError("attempted to set private field on non-instance");return o.set(r,u),u},i("__extends",Ei),i("__assign",di),i("__rest",hi),i("__decorate",vi),i("__param",yi),i("__metadata",mi),i("__awaiter",Oi),i("__generator",bi),i("__exportStar",Ai),i("__createBinding",Fi),i("__values",sr),i("__read",Tn),i("__spread",Pi),i("__spreadArrays",Ti),i("__await",et),i("__asyncGenerator",gi),i("__asyncDelegator",Ri),i("__asyncValues",Ni),i("__makeTemplateObject",Si),i("__importStar",ji),i("__importDefault",Ci),i("__classPrivateFieldGet",wi),i("__classPrivateFieldSet",Ii)})});var Ui=T(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.checkUnionSync=ye.checkUnion=ye.generateReversePromisesFn=void 0;var Mi=tt(),qi=Tt(),Yi=cr(),Li=Pn(),_v=Ne(),_r=ge();function gn(i,a){return i||a}function Di(i,a,r){return a.map((o,u)=>{let s=[i];switch(r&&r[u]&&s.push(r[u]),o){case _r.ARRAY_TYPE:return()=>gn(Reflect.apply(Yi.checkArray,null,s),o);case _r.OBJECT_TYPE:return()=>gn(Reflect.apply(Li.checkObject,null,s),o);default:return()=>gn((0,qi.combineCheck)(o)(i),o)}}).map(o=>()=>Mi.__awaiter(this,void 0,void 0,function*(){let u=o();return u===!0?Promise.reject(!0):Promise.resolve(u)}))}ye.generateReversePromisesFn=Di;function fv(i,a,r){return Mi.__awaiter(this,void 0,void 0,function*(){let o=Di(i,a,r);return new Promise((u,s)=>{(0,_v.queuePromisesProcess)(o,a[0]).then(l=>{s(l)}).catch(l=>{u(l)})})})}ye.checkUnion=fv;function pv(i,a){let r=a.length;for(let o=0;o<r;++o){let u=a[o];switch(u){case _r.ARRAY_TYPE:if((0,Yi.checkArray)(i))return!0;break;case _r.OBJECT_TYPE:if((0,Li.checkObject)(i))return!0;break;default:if((0,qi.combineCheck)(u)(i))return!0}}return!1}ye.checkUnionSync=pv});var Ji=T(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.reversePromisifyResult=rt.promisify=void 0;var Ki=tt();function Ev(i){return(...a)=>Ki.__awaiter(this,void 0,void 0,function*(){let r=Reflect.apply(i,null,a);return r?Promise.resolve(r):Promise.reject(r)})}rt.promisify=Ev;function dv(i){return(...a)=>Ki.__awaiter(this,void 0,void 0,function*(){let r=Reflect.apply(i,null,a);return r?Promise.reject(r):Promise.resolve(r)})}rt.reversePromisifyResult=dv});var gt=T(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.len=void 0;function hv(i){return typeof i=="string"?i.length:i}fr.len=hv});var Nn=T(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var vv=gt(),yv="moreThan";function mv(i,a){return(0,vv.len)(a)>i}Rn.default={name:yv,main:mv,params:["num"]}});var jn=T(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var Ov=gt(),bv="lessThan";function Av(i,a){return(0,Ov.len)(a)<i}Sn.default={name:bv,main:Av,params:["num"]}});var Vi=T(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var ki=tt(),Pv=ki.__importDefault(Nn()),Tv=ki.__importDefault(jn()),gv="between";function Rv(i,a,r){return Tv.default.main(i,r)&&Pv.default.main(a,r)}Cn.default={main:Rv,name:gv,params:["max","min"]}});var Gi=T(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Nv="email",xi=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function Sv(i){return xi.test(i)}wn.default={main:Sv,name:Nv,pattern:xi}});var Bi=T(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.name=void 0;nt.name="int";function jv(i){return Number.isInteger(i)}nt.default={name:nt.name,main:jv}});var Fn=T(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var Cv=gt(),wv="lessThanEqual";function Iv(i,a){return(0,Cv.len)(a)<=i}In.default={name:wv,main:Iv,params:["num"]}});var qn=T(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var Fv=gt(),Mv="moreThanEqual";function qv(i,a){return(0,Fv.len)(a)>=i}Mn.default={name:Mv,main:qv,params:["num"]}});var Hi=T(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var Yv="unit";function Lv(i){return Number.isInteger(i)&&i>=0}Yn.default={name:Yv,main:Lv}});var $i=T(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var Wi=tt(),Dv=Wi.__importDefault(qn()),Uv=Wi.__importDefault(Fn()),Kv="main";function Jv(i,a,r){return Uv.default.main(i,r)&&Dv.default.main(a,r)}Ln.default={name:Kv,main:Jv,params:["max","min"]}});var Dn=T(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.plugins=void 0;var le=tt(),kv=le.__importDefault(Vi()),Vv=le.__importDefault(Gi()),xv=le.__importDefault(Bi()),Gv=le.__importDefault(Fn()),Bv=le.__importDefault(jn()),Hv=le.__importDefault(qn()),Wv=le.__importDefault(Nn()),$v=le.__importDefault(Hi()),zv=le.__importDefault($i());pr.plugins=[kv.default,Vv.default,xv.default,Gv.default,Bv.default,Hv.default,Wv.default,$v.default,zv.default]});var Zi=T(G=>{"use strict";var Xv=G&&G.__createBinding||(Object.create?function(i,a,r,o){o===void 0&&(o=r);var u=Object.getOwnPropertyDescriptor(a,r);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(i,o,u)}:function(i,a,r,o){o===void 0&&(o=r),i[o]=a[r]}),Qv=G&&G.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),Zv=G&&G.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var r in i)r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)&&Xv(a,i,r);return Qv(a,i),a};Object.defineProperty(G,"__esModule",{value:!0});G.getPlugin=G.checkArgKeys=G.curryPlugin=G.createCoreCurryPlugin=void 0;var ey=Ne(),Un=nr(),zi=Dn(),ty=zi.plugins;function ry(i){let{plugin:a}=i,r=ty.filter(o=>a===o.name)[0];return Xi(i,r)}G.createCoreCurryPlugin=ry;function Xi(i,a){let{plugin:r}=i;if(r){let o=a.params;if(o){if(!Qi(i,o))throw new Un.JsonqlError(`Expected params: ${o.join(",")} not found!`);let u=o.map(s=>i[s]);return Reflect.apply((0,ey.curry)(a.main),null,u)}else throw new Un.JsonqlError(`This plugin ${a.name} can not be curry`)}throw new Un.JsonqlError("Unable to find plugin in config")}G.curryPlugin=Xi;function Qi(i,a){return a.filter(r=>i[r]).length===a.length}G.checkArgKeys=Qi;function ny(i){let a=zi.plugins[i];if(a)return a=a==="_"?i:a,Promise.resolve().then(()=>Zv(va("./"+[a,"js"].join("."))));throw new Error(`${i} is not found`)}G.getPlugin=ny});var au=T((Lm,ou)=>{var it=1e3,ut=it*60,ct=ut*60,Ce=ct*24,ay=Ce*7,iy=Ce*365.25;ou.exports=function(i,a){a=a||{};var r=typeof i;if(r==="string"&&i.length>0)return uy(i);if(r==="number"&&isFinite(i))return a.long?sy(i):cy(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function uy(i){if(i=String(i),!(i.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(!!a){var r=parseFloat(a[1]),o=(a[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return r*iy;case"weeks":case"week":case"w":return r*ay;case"days":case"day":case"d":return r*Ce;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ct;case"minutes":case"minute":case"mins":case"min":case"m":return r*ut;case"seconds":case"second":case"secs":case"sec":case"s":return r*it;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function cy(i){var a=Math.abs(i);return a>=Ce?Math.round(i/Ce)+"d":a>=ct?Math.round(i/ct)+"h":a>=ut?Math.round(i/ut)+"m":a>=it?Math.round(i/it)+"s":i+"ms"}function sy(i){var a=Math.abs(i);return a>=Ce?yr(i,a,Ce,"day"):a>=ct?yr(i,a,ct,"hour"):a>=ut?yr(i,a,ut,"minute"):a>=it?yr(i,a,it,"second"):i+" ms"}function yr(i,a,r,o){var u=a>=r*1.5;return Math.round(i/r)+" "+o+(u?"s":"")}});var uu=T((Dm,iu)=>{function ly(i){r.debug=r,r.default=r,r.coerce=E,r.disable=s,r.enable=u,r.enabled=l,r.humanize=au(),r.destroy=b,Object.keys(i).forEach(y=>{r[y]=i[y]}),r.names=[],r.skips=[],r.formatters={};function a(y){let v=0;for(let O=0;O<y.length;O++)v=(v<<5)-v+y.charCodeAt(O),v|=0;return r.colors[Math.abs(v)%r.colors.length]}r.selectColor=a;function r(y){let v,O=null,I,w;function S(...M){if(!S.enabled)return;let B=S,Ee=Number(new Date),wt=Ee-(v||Ee);B.diff=wt,B.prev=v,B.curr=Ee,v=Ee,M[0]=r.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let we=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(lt,Q)=>{if(lt==="%%")return"%";we++;let It=r.formatters[Q];if(typeof It=="function"){let Ar=M[we];lt=It.call(B,Ar),M.splice(we,1),we--}return lt}),r.formatArgs.call(B,M),(B.log||r.log).apply(B,M)}return S.namespace=y,S.useColors=r.useColors(),S.color=r.selectColor(y),S.extend=o,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>O!==null?O:(I!==r.namespaces&&(I=r.namespaces,w=r.enabled(y)),w),set:M=>{O=M}}),typeof r.init=="function"&&r.init(S),S}function o(y,v){let O=r(this.namespace+(typeof v>"u"?":":v)+y);return O.log=this.log,O}function u(y){r.save(y),r.namespaces=y,r.names=[],r.skips=[];let v,O=(typeof y=="string"?y:"").split(/[\s,]+/),I=O.length;for(v=0;v<I;v++)!O[v]||(y=O[v].replace(/\*/g,".*?"),y[0]==="-"?r.skips.push(new RegExp("^"+y.slice(1)+"$")):r.names.push(new RegExp("^"+y+"$")))}function s(){let y=[...r.names.map(f),...r.skips.map(f).map(v=>"-"+v)].join(",");return r.enable(""),y}function l(y){if(y[y.length-1]==="*")return!0;let v,O;for(v=0,O=r.skips.length;v<O;v++)if(r.skips[v].test(y))return!1;for(v=0,O=r.names.length;v<O;v++)if(r.names[v].test(y))return!0;return!1}function f(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function E(y){return y instanceof Error?y.stack||y.message:y}function b(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}iu.exports=ly});var Or=T((re,mr)=>{re.formatArgs=fy;re.save=py;re.load=Ey;re.useColors=_y;re.storage=dy();re.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();re.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _y(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fy(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+mr.exports.humanize(this.diff),!this.useColors)return;let a="color: "+this.color;i.splice(1,0,a,"color: inherit");let r=0,o=0;i[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(r++,u==="%c"&&(o=r))}),i.splice(o,0,a)}re.log=console.debug||console.log||(()=>{});function py(i){try{i?re.storage.setItem("debug",i):re.storage.removeItem("debug")}catch{}}function Ey(){let i;try{i=re.storage.getItem("debug")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function dy(){try{return localStorage}catch{}}mr.exports=uu()(re);var{formatters:hy}=mr.exports;hy.j=function(i){try{return JSON.stringify(i)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}});var pe=D(nr()),ue=D(Ne()),hu=D(ge());var Rt=D(hn()),oy=D(vn()),Er=D(yn()),Kn=D(mn()),me=D(cr()),Nt=D(Pn()),dr=D(Tt()),St=D(Ui()),te=D(Ji()),Jn=D(Dn()),ot=D(Zi());var k=D(ge());var eu="Input argument is not an array!";var tu="Exception happened don't know how to handle it",ru="$_spread_arg_",_e="validate",oe="validateAsync",jt="plugin",hr="main",Se="pattern",Oe="rules",kn="name",at="params",vr="$$idx",Ct="$$value",je="$$is_spread_values",nu=["name","type","types",at,Se,"server","tstype",_e,oe,"value",jt,"optional",Oe,"tmp","pos","lastResult"];var cu=D(nr()),X=D(Ne()),su=D(Or()),fe=(0,su.default)("jsonql:validator:class:fn");function lu(i){return i.map(a=>{let{name:r}=a,o=vy(a),u=a[k.TS_TYPE_NAME]||a.type;return fe("createAutomaticRules",r,u),a[Oe]=[st(r,o,u)],a})}function st(i,a,r){return fe("ruleFn",a,i),(o,u,s)=>J(this,null,function*(){return Reflect.apply(a,null,[o]).then(Vn(i,o,u,s)).catch(l=>(fe("failed",i,o,l,s),Promise.reject(new cu.JsonqlValidationError(r,s))))})}function Vn(i,a,r,o){return u=>{let s=o[0];fe("passed",i,a,u,o),fe("lastResult",r);let l={[vr]:s,[Ct]:a};if(r===void 0)return{[i]:l};if(i in r){let f=r[i];return xn(f)?f.includes(l)||r[i].push(l):f[vr]!==s&&(r[i]=(0,X.toArray)(r[i]).concat([l])),r}return(0,X.assign)(r,{[i]:l})}}function xn(i,a=vr){try{if(Array.isArray(i))return!!i.filter(r=>a in r).length}catch(r){}return!1}function _u(i,a){return J(this,null,function*(){return i.map(r=>Ct in a[r]?a[r][Ct]:xn(a[r])?{[je]:a[r].map(o=>o[Ct])}:(fe(`Result when we couldn't find way to destruct: ${r}`,a[r]),a[r]))})}function fu(i){return J(this,null,function*(){fe("unwrapPreparedValidateResult",i);let a=i.length;if(a===1&&(0,X.objectHasKey)(i[0],je))return i[0][je];if(xn(i,je)){let r=[];for(let o=0;o<a;++o)je in i[o]?r=r.concat(i[o][je]):r.push(i[o]);return r}return i})}function vy(i){switch(i[k.TS_TYPE_NAME]){case k.TS_UNION_TYPE:return function(r){return J(this,null,function*(){return(0,St.checkUnion)(r,i.type)})};case(k.TS_ARRAY_TYPE||k.SPREAD_ARG_TYPE):return function(r){return J(this,null,function*(){return(0,te.promisify)(me.checkArray)(r,i.types)})};case(k.TS_TYPE_REF||k.TS_TYPE_LIT):return function(r){return J(this,null,function*(){return(0,te.promisify)(Kn.checkAny)(r)})};case k.SPREAD_ARG_TYPE:return function(r){return J(this,null,function*(){return(0,te.promisify)((0,dr.combineCheck)(i.types))(r)})};default:return(0,Rt.checkString)(i.type)?(fe("validation type",i.type),function(r){return J(this,null,function*(){return(0,te.promisify)((0,dr.combineCheck)(i.type))(r)})}):(fe("getValidateRules",i),function(r){return J(this,null,function*(){return(0,te.promisify)(X.notEmpty)(r,!0)})})}}function Gn(i,a){return a.tstype!==k.SPREAD_ARG_TYPE&&i===void 0?a[k.DEFAULT_VALUE]!==void 0?a[k.DEFAULT_VALUE]:void 0:i}function pu(i){return!(i.filter(a=>(0,X.inArray)(nu,a)).length>0)}function Eu(i){if(!i[Se]){let a=[_e,oe,hr];for(let r=0;r<a.length;++r){let o=i[a[r]];if(o&&(0,X.isFunction)(o))return!0}}return!1}function du(i){let a=(0,X.getRegex)(i);return r=>J(this,null,function*(){return a.test(r)?Promise.resolve(!0):Promise.reject(!1)})}var vu=D(Or()),ie=(0,vu.default)("jsonql:validator:class:base"),br=class{constructor(a){this._plugins=new Map;this._internalPluginNames=[];this._astWithBaseRules=lu(a),this._arguments=this._astWithBaseRules.map(r=>r[kn]),Jn.plugins.forEach(r=>{r[at]||(r[oe]=(0,te.promisify)(r[hr]));let o=r[kn];this._internalPluginNames.push(o),this._registerPlugin(o,r,!0)})}get schema(){return this._schema||this._astWithBaseRules}get errors(){return this._errors||null}_normalizeArgValues(a){ie("_normalizeArgValues",a);let r=this.schema,o=r.length;if(o===0)return[];if(!(0,me.checkArray)(a))throw ie(a),new pe.JsonqlValidationError(eu,a);let u=a.length;switch(!0){case u===o:return a.map((s,l)=>this._prepareForExecution(s,r[l],l));case u<o:return ie("Values pass less than params"),r.map((s,l)=>{let f=Gn(a[l],s);return this._prepareForExecution(f,s,l)});case u>o:return ie("spread params",u,o),this._processSpreadLikeArg(a,r);default:throw new pe.JsonqlValidationError(tu,[u,o])}}_processSpreadLikeArg(a,r){let o=r.filter(u=>u.tstype===hu.SPREAD_ARG_TYPE)[0];return a.map((u,s)=>{let l=r[s]||(0,ue.assign)(o,{name:`${ru}${s}`}),f=Gn(u,l);return ie("spread param",f,l.name),this._prepareForExecution(f,l,s)})}_prepareForExecution(a,r,o){let{rules:u,required:s,name:l}=r;return u&&u.length?u.map((f,E)=>a===void 0&&!s?(ie("skip the validation",s),b=>J(this,null,function*(){return Vn(l,a,b,[o,E])(!0)})):b=>J(this,null,function*(){return Reflect.apply(f,null,[a,b,[o,E]]).then(y=>(ie("Post rule result",y),y))})):()=>J(this,null,function*(){return!0})}_createSchema(a){let r=this._astWithBaseRules;(0,ue.notEmpty)(a,!0)&&((0,me.checkArray)(a)?r=this._applyArrayInput(r,a):(0,Nt.checkObject)(a)&&(r=this._applyObjectInput(r,a))),this._schema=r}_applyArrayInput(a,r){let o=r.map(ue.toArray);return a.map((u,s)=>{if(o[s]){let l=this._transformInput(o[s],u.name);l&&(u[Oe]=u[Oe].concat(l))}return u})}_applyObjectInput(a,r){return a.map(o=>{let u=o.name;if(r[u]){let s=(0,ue.toArray)(r[u]).map(f=>(f.name=u,f)),l=this._transformInput(s,u);l&&l.length&&(o[Oe]=o[Oe].concat(l))}return o})}_transformInput(a,r){return ie("_transformInput",a),a.map(o=>{let u=o.name;switch(!0){case o[jt]!==void 0:return ie("Should got here",o[jt]),this._lookupPlugin(o,r);case o[_e]!==void 0:return st(r,(0,te.promisify)(o[_e]),u);case o[oe]!==void 0:return st(r,o[oe],u);default:throw new pe.JsonqlError(`unable to find rule for ${r}`)}})}_lookupPlugin(a,r){let o=a[jt];if(o&&this._plugins.has(o)){let u=this._plugins.get(o);if(u&&u[oe])return st(r,u[oe],o);if(u&&u[at]){ie("_pluign",u),ie("input",a);let s=a,l=(0,ue.inArray)(this._internalPluginNames,o)?(0,ot.createCoreCurryPlugin)(s):(0,ot.curryPlugin)(s,u);return st(r,(0,te.promisify)(l),o)}}throw new pe.JsonqlError(`Unable to find ${o} plugin for ${r}`)}_registerPlugin(a,r,o=!1){if(!o){if(this._plugins.has(a))throw new pe.JsonqlError(`plugin ${a} already existed!`);if(r[at]!==void 0&&!pu(r[at]))throw new pe.JsonqlError("Your plugin config argument contains reserved keywords");if(!Eu(r))throw new pe.JsonqlError("Can not find any executable within your plugin config")}switch(r.name=a,!0){case(!r[oe]&&r[_e]&&(0,ue.isFunction)(r[_e])):r[oe]=(0,te.promisify)(r[_e]);break;case(r[Se]&&(0,Rt.checkString)(r[Se])):r[oe]=du(r[Se]);break;default:}this._plugins.set(a,r)}};var mu=D(Ne());var Ou=D(Or()),yu=(0,Ou.default)("jsonql:validator:class:index"),Bn=class extends br{constructor(a){super(a)}registerPlugins(a){for(let r in a)this._registerPlugin(r,a[r])}registerPlugin(a,r){this._registerPlugin(a,r)}addValidationRules(a){this._createSchema(a)}validate(a,r=!1){return J(this,null,function*(){yu("raw",r);let o=this._normalizeArgValues(a);return(0,mu.queuePromisesProcess)(o,void 0).then(u=>r?u:this._prepareValidateResult(u))})}export(a=!1){console.log("@TODO",a)}_prepareValidateResult(a){return J(this,null,function*(){return yu("validateResult",this._arguments,a),_u(this._arguments,a).then(fu)})}};})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=jsonql-validator.min.js.map
