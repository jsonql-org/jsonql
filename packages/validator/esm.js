"use strict";var kn=Object.create;var Ut=Object.defineProperty;var In=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,Dn=Object.prototype.hasOwnProperty;var Vn=Reflect.get;var $t=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,t)=>(typeof require!="undefined"?require:r)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var g=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Kn=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Nn(r))!Dn.call(e,s)&&s!==t&&Ut(e,s,{get:()=>r[s],enumerable:!(n=In(r,s))||n.enumerable});return e};var T=(e,r,t)=>(t=e!=null?kn(Gt(e)):{},Kn(r||!e||!e.__esModule?Ut(t,"default",{value:e,enumerable:!0}):t,e));var Bt=(e,r,t)=>Vn(Gt(e),t,r);var P=(e,r,t)=>new Promise((n,s)=>{var o=a=>{try{u(t.next(a))}catch(p){s(p)}},i=a=>{try{u(t.throw(a))}catch(p){s(p)}},u=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,i);u((t=t.apply(e,r)).next())});var st=g(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var re=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=re.name,Error.captureStackTrace&&Error.captureStackTrace(this,re)}};nt.default=re});var Fe=g(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var ne=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=ne.name,Error.captureStackTrace&&Error.captureStackTrace(this,ne)}};ot.default=ne});var se=g(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.trueTypeOf=void 0;function Jn(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}qe.trueTypeOf=Jn});var Ye=g(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.formatStr=R.showDeep=R.nil=R.createEvtName=R.parseJson=R.toArray=R.inArray=void 0;var Ln=se(),Un=(e,r)=>e.includes(r);R.inArray=Un;var Gn=e=>Array.isArray(e)?e:[e];R.toArray=Gn;var $n=(e,r=!0)=>{try{return(0,Ln.trueTypeOf)(e)==="string"?JSON.parse(e):JSON.parse(JSON.stringify(e))}catch(t){if(r)return e;throw t}};R.parseJson=$n;var Bn=(...e)=>e.join("_");R.createEvtName=Bn;var zn=()=>!1;R.nil=zn;var Wn=e=>{console.dir(e,{depth:null})};R.showDeep=Wn;function Hn(e,...r){return e.replace(/{([0-9]+)}/g,(t,n)=>typeof r[n]=="undefined"?t:r[n])}R.formatStr=Hn});var z=g(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.readOnly=E.objectHasKey=E.arrToObj=E.assign=E.getConfigValue=E.isClass=E.isPlainObject=E.isObject=void 0;var Xn=Ye(),Zn=se();function it(e){return(0,Zn.trueTypeOf)(e)==="object"}E.isObject=it;function at(e){if(it(e)){let t=e.constructor.prototype,n="[Object: null prototype]";return t.toString().substring(0,n.length)===n?!0:it(t)===!1?!1:Reflect.apply(t.hasOwnProperty,t,["isPrototypeOf"])}return!1}E.isPlainObject=at;var Qn=e=>!at(e);E.isClass=Qn;var es=(e,r)=>r&&at(r)&&e in r?r[e]:void 0;E.getConfigValue=es;var ts=(...e)=>Reflect.apply(Object.assign,Object,e);E.assign=ts;var rs=(e,r,t={})=>e.map(r).reduce((n,s)=>(0,E.assign)(n,s),t);E.arrToObj=rs;var ns=(e,r)=>{try{let t=Object.keys(e);return(0,Xn.inArray)(t,r)}catch{return!1}};E.objectHasKey=ns;var ss=e=>Object.freeze(e);E.readOnly=ss});var ut=g(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.isEmpty=x.notEmpty=x.isNotEmpty=x.isEmptyObj=void 0;var zt=z(),os=e=>e&&(0,zt.isPlainObject)(e)&&Object.keys(e).length===0;x.isEmptyObj=os;var is=e=>e!=null&&(e+"").trim()!=="";x.isNotEmpty=is;function Wt(e,r=!1){return Array.isArray(e)?r?!!e.length:!1:(0,zt.isPlainObject)(e)?r?!(0,x.isEmptyObj)(e):!1:(0,x.isNotEmpty)(e)}x.notEmpty=Wt;var as=(e,r)=>!Wt(e,r);x.isEmpty=as});var ct=g(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.isAsyncFunction=oe.isFunction=void 0;var Ht=se(),Xt=["asyncfunction","function"],us=function(e,r=!1){let t=(0,Ht.trueTypeOf)(e);return Xt.includes(t)?!0:(r&&console.error(`Expect to be Function type! Got ${typeof e}`),!1)};oe.isFunction=us;function cs(e){return(0,Ht.trueTypeOf)(e)===Xt[0]}oe.isAsyncFunction=cs});var xe=g(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.isString=S.flatMap=S.merge=S.curry=void 0;var ls=se(),lt=z(),fs=(e,...r)=>e.length<=r.length?e(...r):(...t)=>(0,S.curry)(e,...r,...t);S.curry=fs;var ps=(e,...r)=>{if(!r.length)return e;let t=r.shift();if((0,lt.isObject)(e)&&(0,lt.isObject)(t))for(let n in t)(0,lt.isObject)(t[n])?(e[n]||Object.assign(e,{[n]:{}}),(0,S.merge)(e[n],t[n])):Object.assign(e,{[n]:t[n]});return(0,S.merge)(e,...r)};S.merge=ps;function ds(e,r){return r||(r=t=>t),e.flatMap(r)}S.flatMap=ds;function ms(e){return(0,ls.trueTypeOf)(e)==="string"}S.isString=ms});var er=g(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.queuePromisesProcess=L.chainProcessPromises=L.chainPromises=void 0;var Zt=xe(),ys=z();function _s(e,r=!1){return e.reduce((t,n)=>t.then(s=>n.then(o=>r===!1?[...s,o]:(0,Zt.merge)(s,o))),Promise.resolve(r===!1?[]:(0,ys.isPlainObject)(r)?r:{}))}L.chainPromises=_s;function Qt(e,...r){return(...t)=>r.reduce((n,s)=>n.then(o=>s(o)),Reflect.apply(e,null,t))}L.chainProcessPromises=Qt;function hs(e,...r){let t=(0,Zt.flatMap)(e),n=Reflect.apply(Qt,null,t);return Reflect.apply(n,null,r)}L.queuePromisesProcess=hs});var Er=g((fa,Pr)=>{var ce=1e3,le=ce*60,fe=le*60,Z=fe*24,to=Z*7,ro=Z*365.25;Pr.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return no(e);if(t==="number"&&isFinite(e))return r.long?oo(e):so(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function no(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*ro;case"weeks":case"week":case"w":return t*to;case"days":case"day":case"d":return t*Z;case"hours":case"hour":case"hrs":case"hr":case"h":return t*fe;case"minutes":case"minute":case"mins":case"min":case"m":return t*le;case"seconds":case"second":case"secs":case"sec":case"s":return t*ce;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function so(e){var r=Math.abs(e);return r>=Z?Math.round(e/Z)+"d":r>=fe?Math.round(e/fe)+"h":r>=le?Math.round(e/le)+"m":r>=ce?Math.round(e/ce)+"s":e+"ms"}function oo(e){var r=Math.abs(e);return r>=Z?De(e,r,Z,"day"):r>=fe?De(e,r,fe,"hour"):r>=le?De(e,r,le,"minute"):r>=ce?De(e,r,ce,"second"):e+" ms"}function De(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var Fr=g((pa,Ar)=>{function io(e){t.debug=t,t.default=t,t.coerce=a,t.disable=o,t.enable=s,t.enabled=i,t.humanize=Er(),t.destroy=p,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let f=0;for(let l=0;l<c.length;l++)f=(f<<5)-f+c.charCodeAt(l),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=r;function t(c){let f,l=null,d,y;function m(...h){if(!m.enabled)return;let C=m,b=Number(new Date),O=b-(f||b);C.diff=O,C.prev=f,C.curr=b,f=b,h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let F=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,J)=>{if(D==="%%")return"%";F++;let V=t.formatters[J];if(typeof V=="function"){let Ae=h[F];D=V.call(C,Ae),h.splice(F,1),F--}return D}),t.formatArgs.call(C,h),(C.log||t.log).apply(C,h)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,y=t.enabled(c)),y),set:h=>{l=h}}),typeof t.init=="function"&&t.init(m),m}function n(c,f){let l=t(this.namespace+(typeof f>"u"?":":f)+c);return l.log=this.log,l}function s(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let f,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(f=0;f<d;f++)!l[f]||(c=l[f].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function o(){let c=[...t.names.map(u),...t.skips.map(u).map(f=>"-"+f)].join(",");return t.enable(""),c}function i(c){if(c[c.length-1]==="*")return!0;let f,l;for(f=0,l=t.skips.length;f<l;f++)if(t.skips[f].test(c))return!1;for(f=0,l=t.names.length;f<l;f++)if(t.names[f].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function a(c){return c instanceof Error?c.stack||c.message:c}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Ar.exports=io});var Ke=g((q,Ve)=>{q.formatArgs=uo;q.save=co;q.load=lo;q.useColors=ao;q.storage=fo();q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ao(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function uo(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ve.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(t++,s==="%c"&&(n=t))}),e.splice(n,0,r)}q.log=console.debug||console.log||(()=>{});function co(e){try{e?q.storage.setItem("debug",e):q.storage.removeItem("debug")}catch{}}function lo(){let e;try{e=q.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function fo(){try{return localStorage}catch{}}Ve.exports=Fr()(q);var{formatters:po}=Ve.exports;po.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var B=g((ba,Be)=>{var Ir,Nr,Dr,Vr,Kr,Jr,Lr,Ur,Gr,Ge,Et,$r,Br,zr,me,Wr,Hr,Xr,Zr,Qr,en,tn,rn,nn,$e;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Be=="object"&&typeof Be.exports=="object"?e(t(r,t(Be.exports))):e(t(r));function t(n,s){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,i){return n[o]=s?s(o,i):i}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])};Ir=function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(n,s);function o(){this.constructor=n}n.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)},Nr=Object.assign||function(n){for(var s,o=1,i=arguments.length;o<i;o++){s=arguments[o];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=s[u])}return n},Dr=function(n,s){var o={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&s.indexOf(i)<0&&(o[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(n);u<i.length;u++)s.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(n,i[u])&&(o[i[u]]=n[i[u]]);return o},Vr=function(n,s,o,i){var u=arguments.length,a=u<3?s:i===null?i=Object.getOwnPropertyDescriptor(s,o):i,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,s,o,i);else for(var c=n.length-1;c>=0;c--)(p=n[c])&&(a=(u<3?p(a):u>3?p(s,o,a):p(s,o))||a);return u>3&&a&&Object.defineProperty(s,o,a),a},Kr=function(n,s){return function(o,i){s(o,i,n)}},Jr=function(n,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,s)},Lr=function(n,s,o,i){function u(a){return a instanceof o?a:new o(function(p){p(a)})}return new(o||(o=Promise))(function(a,p){function c(d){try{l(i.next(d))}catch(y){p(y)}}function f(d){try{l(i.throw(d))}catch(y){p(y)}}function l(d){d.done?a(d.value):u(d.value).then(c,f)}l((i=i.apply(n,s||[])).next())})},Ur=function(n,s){var o={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,u,a,p;return p={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function c(l){return function(d){return f([l,d])}}function f(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,u&&(a=l[0]&2?u.return:l[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,l[1])).done)return a;switch(u=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,u=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){o=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(l[0]===6&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=s.call(n,o)}catch(d){l=[6,d],u=0}finally{i=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Gr=function(n,s){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&$e(s,n,o)},$e=Object.create?function(n,s,o,i){i===void 0&&(i=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(n,i,u)}:function(n,s,o,i){i===void 0&&(i=o),n[i]=s[o]},Ge=function(n){var s=typeof Symbol=="function"&&Symbol.iterator,o=s&&n[s],i=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Et=function(n,s){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var i=o.call(n),u,a=[],p;try{for(;(s===void 0||s-- >0)&&!(u=i.next()).done;)a.push(u.value)}catch(c){p={error:c}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(p)throw p.error}}return a},$r=function(){for(var n=[],s=0;s<arguments.length;s++)n=n.concat(Et(arguments[s]));return n},Br=function(){for(var n=0,s=0,o=arguments.length;s<o;s++)n+=arguments[s].length;for(var i=Array(n),u=0,s=0;s<o;s++)for(var a=arguments[s],p=0,c=a.length;p<c;p++,u++)i[u]=a[p];return i},zr=function(n,s,o){if(o||arguments.length===2)for(var i=0,u=s.length,a;i<u;i++)(a||!(i in s))&&(a||(a=Array.prototype.slice.call(s,0,i)),a[i]=s[i]);return n.concat(a||Array.prototype.slice.call(s))},me=function(n){return this instanceof me?(this.v=n,this):new me(n)},Wr=function(n,s,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o.apply(n,s||[]),u,a=[];return u={},p("next"),p("throw"),p("return"),u[Symbol.asyncIterator]=function(){return this},u;function p(m){i[m]&&(u[m]=function(h){return new Promise(function(C,b){a.push([m,h,C,b])>1||c(m,h)})})}function c(m,h){try{f(i[m](h))}catch(C){y(a[0][3],C)}}function f(m){m.value instanceof me?Promise.resolve(m.value.v).then(l,d):y(a[0][2],m)}function l(m){c("next",m)}function d(m){c("throw",m)}function y(m,h){m(h),a.shift(),a.length&&c(a[0][0],a[0][1])}},Hr=function(n){var s,o;return s={},i("next"),i("throw",function(u){throw u}),i("return"),s[Symbol.iterator]=function(){return this},s;function i(u,a){s[u]=n[u]?function(p){return(o=!o)?{value:me(n[u](p)),done:u==="return"}:a?a(p):p}:a}},Xr=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n[Symbol.asyncIterator],o;return s?s.call(n):(n=typeof Ge=="function"?Ge(n):n[Symbol.iterator](),o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o);function i(a){o[a]=n[a]&&function(p){return new Promise(function(c,f){p=n[a](p),u(c,f,p.done,p.value)})}}function u(a,p,c,f){Promise.resolve(f).then(function(l){a({value:l,done:c})},p)}},Zr=function(n,s){return Object.defineProperty?Object.defineProperty(n,"raw",{value:s}):n.raw=s,n};var t=Object.create?function(n,s){Object.defineProperty(n,"default",{enumerable:!0,value:s})}:function(n,s){n.default=s};Qr=function(n){if(n&&n.__esModule)return n;var s={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&$e(s,n,o);return t(s,n),s},en=function(n){return n&&n.__esModule?n:{default:n}},tn=function(n,s,o,i){if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?n!==s||!i:!s.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?i:o==="a"?i.call(n):i?i.value:s.get(n)},rn=function(n,s,o,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?n!==s||!u:!s.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(n,o):u?u.value=o:s.set(n,o),o},nn=function(n,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?s===n:n.has(s)},e("__extends",Ir),e("__assign",Nr),e("__rest",Dr),e("__decorate",Vr),e("__param",Kr),e("__metadata",Jr),e("__awaiter",Lr),e("__generator",Ur),e("__exportStar",Gr),e("__createBinding",$e),e("__values",Ge),e("__read",Et),e("__spread",$r),e("__spreadArrays",Br),e("__spreadArray",zr),e("__await",me),e("__asyncGenerator",Wr),e("__asyncDelegator",Hr),e("__asyncValues",Xr),e("__makeTemplateObject",Zr),e("__importStar",Qr),e("__importDefault",en),e("__classPrivateFieldGet",tn),e("__classPrivateFieldSet",rn),e("__classPrivateFieldIn",nn)})});var ze=g(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.KEYWORDS=_.MAIN_NOT_FOUND_ERR=_.ARG_NOT_MATCH_ERR=_.RESERVED_WORD_ERR=_.VALUE_KEY=_.IDX_KEY=_.PARAMS_KEY=_.NAME_KEY=_.RULES_KEY=_.PATTERN_KEY=_.PLUGIN_FN_KEY=_.PLUGIN_KEY=_.VALIDATE_ASYNC_KEY=_.VALIDATE_KEY=_.ARRAY_TYPE_RGT=_.ARRAY_TYPE_LFT=_.ARRAY_TS_TYPE_LFT=_.OBJECT_TYPE=_.ARRAY_TYPE=_.NUMBER_TYPE=_.STRING_TYPE=_.BOOLEAN_TYPE=_.OR_SEPERATOR=void 0;_.OR_SEPERATOR="|";_.BOOLEAN_TYPE="boolean";_.STRING_TYPE="string";_.NUMBER_TYPE="number";_.ARRAY_TYPE="array";_.OBJECT_TYPE="object";_.ARRAY_TS_TYPE_LFT="Array<";_.ARRAY_TYPE_LFT="array.<";_.ARRAY_TYPE_RGT=">";_.VALIDATE_KEY="validate";_.VALIDATE_ASYNC_KEY="validateAsync";_.PLUGIN_KEY="plugin";_.PLUGIN_FN_KEY="main";_.PATTERN_KEY="pattern";_.RULES_KEY="rules";_.NAME_KEY="name";_.PARAMS_KEY="params";_.IDX_KEY="$$idx";_.VALUE_KEY="$$value";_.RESERVED_WORD_ERR="Your plugin config argument contains reserved keywords";_.ARG_NOT_MATCH_ERR="Your params doesn't matching your main argument list";_.MAIN_NOT_FOUND_ERR="Can not find 'main' method in your plugin config";_.KEYWORDS=[_.PARAMS_KEY,_.PATTERN_KEY,_.VALIDATE_KEY,_.VALIDATE_ASYNC_KEY,_.PLUGIN_KEY,_.RULES_KEY,"name","type","types","server","tstype","value","optional","tmp","pos","lastResult"]});var je=g(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.len=void 0;function go(e){return typeof e=="string"?e.length:e}We.len=go});var Ft=g(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});var Co=je(),bo="moreThan";function vo(e,r){return(0,Co.len)(r)>e}At.default={name:bo,main:vo,params:["num"]}});var Ot=g(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});var Po=je(),Eo="lessThan";function Ao(e,r){return(0,Po.len)(r)<e}wt.default={name:Eo,main:Ao,params:["num"]}});var on=g(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var sn=B(),Fo=sn.__importDefault(Ft()),wo=sn.__importDefault(Ot()),Oo="between";function Ro(e,r,t){return wo.default.main(e,t)&&Fo.default.main(r,t)}Rt.default={main:Ro,name:Oo,params:["max","min"]}});var an=g(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});var jo="email";function To(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}jt.default={main:To,name:jo}});var He=g(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.checkUnsigned=k.checkFloat=k.checkInteger=k.checkNumber=void 0;var Tt=se(),St="number";function So(e){return(0,Tt.trueTypeOf)(e)!==St?!1:!isNaN(parseFloat(e+""))}k.checkNumber=So;function un(e){return(0,Tt.trueTypeOf)(e)===St&&Number.isInteger(e)}k.checkInteger=un;function qo(e){return(0,Tt.trueTypeOf)(e)===St&&!isNaN(e)&&!Number.isInteger(e)}k.checkFloat=qo;function Yo(e){return un(e)&&e>=0}k.checkUnsigned=Yo});var cn=g(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.name=void 0;var xo=He();ye.name="float";function Mo(e){return(0,xo.checkFloat)(e)}ye.default={name:ye.name,main:Mo}});var ln=g(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.name=void 0;var ko=He();_e.name="int";function Io(e){return(0,ko.checkInteger)(e)}_e.default={name:_e.name,main:Io}});var Yt=g(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});var No=je(),Do="lessThanEqual";function Vo(e,r){return(0,No.len)(r)<=e}qt.default={name:Do,main:Vo,params:["num"]}});var Mt=g(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});var Ko=je(),Jo="moreThanEqual";function Lo(e,r){return(0,Ko.len)(r)>=e}xt.default={name:Jo,main:Lo,params:["num"]}});var fn=g(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var Uo=He(),Go="unit";function $o(e){return(0,Uo.checkUnsigned)(e)}kt.default={name:Go,main:$o}});var dn=g(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});var pn=B(),Bo=pn.__importDefault(Mt()),zo=pn.__importDefault(Yt()),Wo="main";function Ho(e,r,t){return zo.default.main(e,t)&&Bo.default.main(r,t)}It.default={name:Wo,main:Ho,params:["max","min"]}});var Nt=g(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.plugins=void 0;var I=B(),Xo=I.__importDefault(on()),Zo=I.__importDefault(an()),Qo=I.__importDefault(cn()),ei=I.__importDefault(ln()),ti=I.__importDefault(Yt()),ri=I.__importDefault(Ot()),ni=I.__importDefault(Mt()),si=I.__importDefault(Ft()),oi=I.__importDefault(fn()),ii=I.__importDefault(dn());Xe.plugins=[Xo.default,Zo.default,Qo.default,ei.default,ti.default,ri.default,ni.default,si.default,oi.default,ii.default]});var yn=g(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.getPlugin=he.curryPlugin=void 0;var mn=B(),ai=xe(),Dt=mn.__importDefault(Fe()),ui=ze(),ci=Nt();function li(e,r){let{plugin:t}=e;if(t){let n=r[ui.PARAMS_KEY];if(n){if(!fi(e,n))throw new Dt.default(`Expected params: ${n.join(",")} not found!`);let s=n.map(o=>e[o]);return Reflect.apply((0,ai.curry)(r.main),null,s)}else throw new Dt.default(`This plugin ${r.name} can not be curry`)}throw new Dt.default("Unable to find plugin in config")}he.curryPlugin=li;function fi(e,r){return r.filter(t=>e[t]).length===r.length}function pi(e){let r=ci.plugins[e];if(r)return r=r==="_"?e:r,Promise.resolve().then(()=>mn.__importStar($t("./"+[r,"js"].join("."))));throw new Error(`${e} is not found`)}he.getPlugin=pi});var hn=g(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.reversePromisifyResult=ge.promisify=void 0;var _n=B();function di(e){return(...r)=>_n.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.resolve(t):Promise.reject(t)})}ge.promisify=di;function mi(e){return(...r)=>_n.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.reject(t):Promise.resolve(t)})}ge.reversePromisifyResult=mi});var Cn=g(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getRegex=Ce.isRegExp=void 0;var yi=xe();function gn(e){return e instanceof RegExp}Ce.isRegExp=gn;function _i(e){switch(!0){case gn(e):return e;case(0,yi.isString)(e):return new RegExp(e);default:return!1}}Ce.getRegex=_i});var vn=g((Na,bn)=>{var be=1e3,ve=be*60,Pe=ve*60,Q=Pe*24,hi=Q*7,gi=Q*365.25;bn.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Ci(e);if(t==="number"&&isFinite(e))return r.long?vi(e):bi(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ci(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*gi;case"weeks":case"week":case"w":return t*hi;case"days":case"day":case"d":return t*Q;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Pe;case"minutes":case"minute":case"mins":case"min":case"m":return t*ve;case"seconds":case"second":case"secs":case"sec":case"s":return t*be;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function bi(e){var r=Math.abs(e);return r>=Q?Math.round(e/Q)+"d":r>=Pe?Math.round(e/Pe)+"h":r>=ve?Math.round(e/ve)+"m":r>=be?Math.round(e/be)+"s":e+"ms"}function vi(e){var r=Math.abs(e);return r>=Q?Ze(e,r,Q,"day"):r>=Pe?Ze(e,r,Pe,"hour"):r>=ve?Ze(e,r,ve,"minute"):r>=be?Ze(e,r,be,"second"):e+" ms"}function Ze(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var En=g((Da,Pn)=>{function Pi(e){t.debug=t,t.default=t,t.coerce=a,t.disable=o,t.enable=s,t.enabled=i,t.humanize=vn(),t.destroy=p,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let f=0;for(let l=0;l<c.length;l++)f=(f<<5)-f+c.charCodeAt(l),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=r;function t(c){let f,l=null,d,y;function m(...h){if(!m.enabled)return;let C=m,b=Number(new Date),O=b-(f||b);C.diff=O,C.prev=f,C.curr=b,f=b,h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let F=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,J)=>{if(D==="%%")return"%";F++;let V=t.formatters[J];if(typeof V=="function"){let Ae=h[F];D=V.call(C,Ae),h.splice(F,1),F--}return D}),t.formatArgs.call(C,h),(C.log||t.log).apply(C,h)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,y=t.enabled(c)),y),set:h=>{l=h}}),typeof t.init=="function"&&t.init(m),m}function n(c,f){let l=t(this.namespace+(typeof f>"u"?":":f)+c);return l.log=this.log,l}function s(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let f,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(f=0;f<d;f++)!l[f]||(c=l[f].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function o(){let c=[...t.names.map(u),...t.skips.map(u).map(f=>"-"+f)].join(",");return t.enable(""),c}function i(c){if(c[c.length-1]==="*")return!0;let f,l;for(f=0,l=t.skips.length;f<l;f++)if(t.skips[f].test(c))return!1;for(f=0,l=t.names.length;f<l;f++)if(t.names[f].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function a(c){return c instanceof Error?c.stack||c.message:c}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Pn.exports=Pi});var Vt=g((Y,Qe)=>{Y.formatArgs=Ai;Y.save=Fi;Y.load=wi;Y.useColors=Ei;Y.storage=Oi();Y.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ei(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ai(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Qe.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(t++,s==="%c"&&(n=t))}),e.splice(n,0,r)}Y.log=console.debug||console.log||(()=>{});function Fi(e){try{e?Y.storage.setItem("debug",e):Y.storage.removeItem("debug")}catch{}}function wi(){let e;try{e=Y.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Oi(){try{return localStorage}catch{}}Qe.exports=En()(Y);var{formatters:Ri}=Qe.exports;Ri.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var jn=g(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.patternPluginFanctory=v.isResultPackage=v.successThen=v.constructRuleCb=v.extractFnArgs=v.paramMatches=v.searchParamsKey=v.pluginHasFunc=v.checkPluginArg=void 0;var Te=B(),ji=Te.__importDefault(st()),Ti=Te.__importDefault(Fe()),N=ze(),Si=Ye(),qi=z(),Yi=ct(),xi=Cn(),Mi=Te.__importDefault(Vt()),et=(0,Mi.default)("jsonql:validator-core:common");function An(e){return!(e.filter(r=>N.KEYWORDS.includes(r)).length>0)}v.checkPluginArg=An;function ki(e){return e[N.PLUGIN_FN_KEY]&&(0,Yi.isFunction)(e[N.PLUGIN_FN_KEY])}v.pluginHasFunc=ki;function Fn(e){let r=wn(e.main.toString());return r.pop(),r}function Ii(e){let r=Fn(e);if(r.length===0)return e;if(!An(r))throw new Ti.default(N.RESERVED_WORD_ERR);return e[N.PARAMS_KEY]=r,e}v.searchParamsKey=Ii;function Ni(e){let r=Fn(e),t=r.length;if(t===0&&!e[N.PARAMS_KEY])return!0;let n=e.params!==void 0&&Array.isArray(e.params)?e.params:!1;return n===!1?!1:t>0&&t===n.length&&!r.filter((s,o)=>s!==n[o]).length}v.paramMatches=Ni;function wn(e){return e.split("(")[1].split(")")[0].split(",").map(r=>r.trim()).filter(r=>r!=="")}v.extractFnArgs=wn;function Di(e,r,t){return(n,s,o)=>Te.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(r,null,[n]).then(On(e,n,s,o)).catch(i=>(et("failed",e,n,i,o),Promise.reject(new ji.default(t,o))))})}v.constructRuleCb=Di;function On(e,r,t,n){return s=>{let o=n[0];et("passed",e,r,s,n),et("lastResult",t);let i={[N.IDX_KEY]:o,[N.VALUE_KEY]:r};if(t===void 0)return{[e]:i};if(e in t){let u=t[e];return Rn(u)?u.includes(i)||t[e].push(i):u[N.IDX_KEY]!==o&&(t[e]=(0,Si.toArray)(t[e]).concat([i])),t}return(0,qi.assign)(t,{[e]:i})}}v.successThen=On;function Rn(e,r=N.IDX_KEY){try{if(Array.isArray(e))return!!e.filter(t=>r in t).length}catch(t){et("isResultPackage",t)}return!1}v.isResultPackage=Rn;function Vi(e){let r=(0,xi.getRegex)(e);return t=>Te.__awaiter(this,void 0,void 0,function*(){return r.test(t)?Promise.resolve(!0):Promise.reject(!1)})}v.patternPluginFanctory=Vi});var qn=g(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.ValidatorPlugins=void 0;var Sn=B(),Se=Sn.__importDefault(Fe()),A=ze(),Ki=yn(),Tn=hn(),Ee=jn(),Ji=Nt(),Li=Sn.__importDefault(Vt()),ee=(0,Li.default)("jsonql:validator-core:validator-plugin"),Kt=class{constructor(r){this.$version=r,this._plugins=new Map,this._internalPluginNames=[],Ji.plugins.forEach(t=>{let n=t[A.NAME_KEY];this._internalPluginNames.push(n),this._registerPlugin(n,t,!0)})}lookupPlugin(r,t){let n=r[A.PLUGIN_KEY];if(n&&this._plugins.has(n)){let s=this._plugins.get(n);if(s[A.PLUGIN_FN_KEY]&&!s[A.PARAMS_KEY]&&(s[A.VALIDATE_ASYNC_KEY]=(0,Tn.promisify)(s[A.PLUGIN_FN_KEY])),s&&s[A.VALIDATE_ASYNC_KEY]&&!s[A.PARAMS_KEY])return(0,Ee.constructRuleCb)(t,s[A.VALIDATE_ASYNC_KEY],n);if(s&&s[A.PARAMS_KEY]){ee("pluginConfig --->",s),ee("input----------->",r);let o=r;return(0,Ee.constructRuleCb)(t,(0,Tn.promisify)((0,Ki.curryPlugin)(o,s)),n)}}throw ee("lookupPlugin","unable to find",n),new Se.default(`Unable to find plugin: ${n}`)}registerPlugin(r,t){this._registerPlugin(r,t)}_registerExternalPlugin(r,t){this._registerPlugin(r,t,!1,!0)}export(r=!0){let t=[];return this._plugins.forEach((n,s)=>{!this.isBuiltIn(s)&&n.external===r&&t.push(n)}),t}isBuiltIn(r){return this._internalPluginNames.includes(r)}_registerPlugin(r,t,n=!1,s=!1){if(!n){if(this._plugins.has(r))throw new Se.default(`plugin ${r} already existed!`);if(!(0,Ee.pluginHasFunc)(t))throw ee("registerPlugin",A.MAIN_NOT_FOUND_ERR),new Se.default(A.MAIN_NOT_FOUND_ERR);if(t[A.PARAMS_KEY]===void 0)t=(0,Ee.searchParamsKey)(t),ee("auto generate params for plugin",t);else if(t[A.PARAMS_KEY]!==void 0){if(!(0,Ee.checkPluginArg)(t[A.PARAMS_KEY]))throw ee("registerPlugin",A.RESERVED_WORD_ERR),new Se.default(A.RESERVED_WORD_ERR);if(!(0,Ee.paramMatches)(t))throw ee("registerPlugin",A.ARG_NOT_MATCH_ERR),new Se.default(A.ARG_NOT_MATCH_ERR)}}t.name=r,t.external=s,this._plugins.set(r,t)}};tt.ValidatorPlugins=Kt});var Pt=T(st()),qr=T(Fe()),Yr=T(ut()),xr=T(Ye()),de=T(z()),Ue=T(ct()),Mr=T(er());var gs=Object.create,or=Object.defineProperty,Cs=Object.getOwnPropertyDescriptor,bs=Object.getOwnPropertyNames,vs=Object.getPrototypeOf,Ps=Object.prototype.hasOwnProperty,M=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Es=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of bs(r))!Ps.call(e,s)&&s!==t&&or(e,s,{get:()=>r[s],enumerable:!(n=Cs(r,s))||n.enumerable});return e},w=(e,r,t)=>(t=e!=null?gs(vs(e)):{},Es(r||!e||!e.__esModule?or(t,"default",{value:e,enumerable:!0}):t,e)),ke=(e,r,t)=>new Promise((n,s)=>{var o=a=>{try{u(t.next(a))}catch(p){s(p)}},i=a=>{try{u(t.throw(a))}catch(p){s(p)}},u=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,i);u((t=t.apply(e,r)).next())}),ie=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trueTypeOf=void 0;function r(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}e.trueTypeOf=r}),ir=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatStr=e.showDeep=e.nil=e.createEvtName=e.parseJson=e.toArray=e.inArray=void 0;var r=ie(),t=(p,c)=>p.includes(c);e.inArray=t;var n=p=>Array.isArray(p)?p:[p];e.toArray=n;var s=(p,c=!0)=>{try{return(0,r.trueTypeOf)(p)==="string"?JSON.parse(p):JSON.parse(JSON.stringify(p))}catch(f){if(c)return p;throw f}};e.parseJson=s;var o=(...p)=>p.join("_");e.createEvtName=o;var i=()=>!1;e.nil=i;var u=p=>{console.dir(p,{depth:null})};e.showDeep=u;function a(p,...c){return p.replace(/{([0-9]+)}/g,(f,l)=>typeof c[l]>"u"?f:c[l])}e.formatStr=a}),we=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readOnly=e.objectHasKey=e.arrToObj=e.assign=e.getConfigValue=e.isClass=e.isPlainObject=e.isObject=void 0;var r=ir(),t=ie();function n(f){return(0,t.trueTypeOf)(f)==="object"}e.isObject=n;function s(f){if(n(f)){let l=f.constructor.prototype,d="[Object: null prototype]";return l.toString().substring(0,d.length)===d?!0:n(l)===!1?!1:Reflect.apply(l.hasOwnProperty,l,["isPrototypeOf"])}return!1}e.isPlainObject=s;var o=f=>!s(f);e.isClass=o;var i=(f,l)=>l&&s(l)&&f in l?l[f]:void 0;e.getConfigValue=i;var u=(...f)=>Reflect.apply(Object.assign,Object,f);e.assign=u;var a=(f,l,d={})=>f.map(l).reduce((y,m)=>(0,e.assign)(y,m),d);e.arrToObj=a;var p=(f,l)=>{try{let d=Object.keys(f);return(0,r.inArray)(d,l)}catch{return!1}};e.objectHasKey=p;var c=f=>Object.freeze(f);e.readOnly=c}),Ie=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isString=e.flatMap=e.merge=e.curry=void 0;var r=ie(),t=we(),n=(u,...a)=>u.length<=a.length?u(...a):(...p)=>(0,e.curry)(u,...a,...p);e.curry=n;var s=(u,...a)=>{if(!a.length)return u;let p=a.shift();if((0,t.isObject)(u)&&(0,t.isObject)(p))for(let c in p)(0,t.isObject)(p[c])?(u[c]||Object.assign(u,{[c]:{}}),(0,e.merge)(u[c],p[c])):Object.assign(u,{[c]:p[c]});return(0,e.merge)(u,...a)};e.merge=s;function o(u,a){return a||(a=p=>p),u.flatMap(a)}e.flatMap=o;function i(u){return(0,r.trueTypeOf)(u)==="string"}e.isString=i}),As=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.queuePromisesProcess=e.chainProcessPromises=e.chainPromises=void 0;var r=Ie(),t=we();function n(i,u=!1){return i.reduce((a,p)=>a.then(c=>p.then(f=>u===!1?[...c,f]:(0,r.merge)(c,f))),Promise.resolve(u===!1?[]:(0,t.isPlainObject)(u)?u:{}))}e.chainPromises=n;function s(i,...u){return(...a)=>u.reduce((p,c)=>p.then(f=>c(f)),Reflect.apply(i,null,a))}e.chainProcessPromises=s;function o(i,...u){let a=(0,r.flatMap)(i),p=Reflect.apply(s,null,a);return Reflect.apply(p,null,u)}e.queuePromisesProcess=o}),dt=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=class extends Error{constructor(...t){super(...t),this.message=t[0],this.detail=t[1],this.className=r.name,Error.captureStackTrace&&Error.captureStackTrace(this,r)}};e.default=r}),Fs=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=class extends Error{constructor(...t){super(...t),this.message=t[0],this.detail=t[1],this.className=r.name,Error.captureStackTrace&&Error.captureStackTrace(this,r)}};e.default=r}),ws=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncFunction=e.isFunction=void 0;var r=ie(),t=["asyncfunction","function"],n=function(o,i=!1){let u=(0,r.trueTypeOf)(o);return t.includes(u)?!0:(i&&console.error(`Expect to be Function type! Got ${typeof o}`),!1)};e.isFunction=n;function s(o){return(0,r.trueTypeOf)(o)===t[0]}e.isAsyncFunction=s}),Os=M(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRegex=e.isRegExp=void 0;var r=Ie();function t(s){return s instanceof RegExp}e.isRegExp=t;function n(s){switch(!0){case t(s):return s;case(0,r.isString)(s):return new RegExp(s);default:return!1}}e.getRegex=n}),Rs=M((e,r)=>{var t=1e3,n=t*60,s=n*60,o=s*24,i=o*7,u=o*365.25;r.exports=function(l,d){d=d||{};var y=typeof l;if(y==="string"&&l.length>0)return a(l);if(y==="number"&&isFinite(l))return d.long?c(l):p(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(d){var y=parseFloat(d[1]),m=(d[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return y*u;case"weeks":case"week":case"w":return y*i;case"days":case"day":case"d":return y*o;case"hours":case"hour":case"hrs":case"hr":case"h":return y*s;case"minutes":case"minute":case"mins":case"min":case"m":return y*n;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function p(l){var d=Math.abs(l);return d>=o?Math.round(l/o)+"d":d>=s?Math.round(l/s)+"h":d>=n?Math.round(l/n)+"m":d>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var d=Math.abs(l);return d>=o?f(l,d,o,"day"):d>=s?f(l,d,s,"hour"):d>=n?f(l,d,n,"minute"):d>=t?f(l,d,t,"second"):l+" ms"}function f(l,d,y,m){var h=d>=y*1.5;return Math.round(l/y)+" "+m+(h?"s":"")}}),js=M((e,r)=>{function t(n){o.debug=o,o.default=o,o.coerce=f,o.disable=a,o.enable=u,o.enabled=p,o.humanize=Rs(),o.destroy=l,Object.keys(n).forEach(d=>{o[d]=n[d]}),o.names=[],o.skips=[],o.formatters={};function s(d){let y=0;for(let m=0;m<d.length;m++)y=(y<<5)-y+d.charCodeAt(m),y|=0;return o.colors[Math.abs(y)%o.colors.length]}o.selectColor=s;function o(d){let y,m=null,h,C;function b(...O){if(!b.enabled)return;let F=b,te=Number(new Date),D=te-(y||te);F.diff=D,F.prev=y,F.curr=te,y=te,O[0]=o.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let J=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(V,Ae)=>{if(V==="%%")return"%";J++;let Lt=o.formatters[Ae];if(typeof Lt=="function"){let Mn=O[J];V=Lt.call(F,Mn),O.splice(J,1),J--}return V}),o.formatArgs.call(F,O),(F.log||o.log).apply(F,O)}return b.namespace=d,b.useColors=o.useColors(),b.color=o.selectColor(d),b.extend=i,b.destroy=o.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(h!==o.namespaces&&(h=o.namespaces,C=o.enabled(d)),C),set:O=>{m=O}}),typeof o.init=="function"&&o.init(b),b}function i(d,y){let m=o(this.namespace+(typeof y>"u"?":":y)+d);return m.log=this.log,m}function u(d){o.save(d),o.namespaces=d,o.names=[],o.skips=[];let y,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(y=0;y<h;y++)!m[y]||(d=m[y].replace(/\*/g,".*?"),d[0]==="-"?o.skips.push(new RegExp("^"+d.slice(1)+"$")):o.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...o.names.map(c),...o.skips.map(c).map(y=>"-"+y)].join(",");return o.enable(""),d}function p(d){if(d[d.length-1]==="*")return!0;let y,m;for(y=0,m=o.skips.length;y<m;y++)if(o.skips[y].test(d))return!1;for(y=0,m=o.names.length;y<m;y++)if(o.names[y].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function f(d){return d instanceof Error?d.stack||d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}r.exports=t}),ar=M((e,r)=>{e.formatArgs=n,e.save=s,e.load=o,e.useColors=t,e.storage=i(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let p="color: "+this.color;a.splice(1,0,p,"color: inherit");let c=0,f=0;a[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(c++,l==="%c"&&(f=c))}),a.splice(f,0,p)}e.log=console.debug||console.log||(()=>{});function s(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function o(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}function i(){try{return localStorage}catch{}}r.exports=js()(e);var{formatters:u}=r.exports;u.j=function(a){try{return JSON.stringify(a)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}),Ts=w(Ie());function mt(e){return(e+"").trim()!==""?(0,Ts.isString)(e):!1}var Ss=w(ie());function qs(e){return(0,Ss.trueTypeOf)(e)==="boolean"}var Ys=w(ie()),xs="number";function Ms(e){return(0,Ys.trueTypeOf)(e)!==xs?!1:!isNaN(parseFloat(e+""))}function yt(e,r=!0){return e!==void 0&&e!==""&&(e+"").trim()!==""&&(r===!1||r===!0&&e!==null)}var ks=w(we()),tr="|",Is="boolean",Ns="string",Ds="number",ur="array",cr="object",Vs="Array<",Ks="array.<",rr=">",W="validate",G="validateAsync",Ne="plugin",lr="main";var Oe="rules",fr="name";var pt="$$idx",$="$$value";function U(e){switch(e){case Ds:return Ms;case Ns:return mt;case Is:return qs;default:return yt}}var nr={ts:Vs,jsdoc:Ks};function H(e,r){if(Array.isArray(e)){if(!r)return!0;let t;return Array.isArray(r)?t=e.filter(n=>{let s=r.length;for(let o=0;o<s;++o){let i=r[o];if(i===ur&&Array.isArray(n)||i===cr&&(0,ks.isPlainObject)(n)||U(i)(n))return!1}return!0}):t=e.filter(n=>!U(r)(n)),!(t.length>0)}return!1}function sr(e,r="ts"){let t=nr[r];if(!t)throw new Error(`Syntax not supported! ${Object.keys(nr)}`);if(e.indexOf(t)>-1&&e.indexOf(rr)>-1){let n=e.replace(t,"").replace(rr,"");return n.indexOf(tr)?n.split(tr):[n]}return!1}function Js(e){return sr(e)?!1:sr(e,"jsdoc")}function Ls(e,r){let{arg:t}=e;return r.length>1?!t.filter(n=>!(r.length>r.filter(s=>!U(s)(n)).length)).length:r.length>r.filter(n=>!H(t,n)).length}var Us=w(we());function Gs(e,r){if((0,Us.isPlainObject)(e)){if(!r)return!0;if(typeof r=="string")return r in e;if(H(r))return typeof r[0]=="string"?$s(e,r):Bs(e,r)}return!1}function $s(e,r){return!r.filter(t=>!(t in e)).length}function Bs(e,r){return!r.filter(t=>{let n=e[t.name];return!(t.type.length>t.type.filter(s=>{let o;return n!==void 0?(o=Js(s))!==!1?!Ls({arg:n},o):!U(s)(n):!0}).length)}).length}var zs=w(As());function ft(e,r){return e||r}function Ws(e,r,t){return r.map((n,s)=>{let o=[e];switch(t&&t[s]&&o.push(t[s]),n){case ur:return()=>ft(Reflect.apply(H,null,o),n);case cr:return()=>ft(Reflect.apply(Gs,null,o),n);default:return()=>ft(U(n)(e),n)}}).map(n=>()=>ke(this,null,function*(){let s=n();return s===!0?Promise.reject(!0):Promise.resolve(s)}))}function pr(e,r,t){return ke(this,null,function*(){let n=Ws(e,r,t);return new Promise((s,o)=>{(0,zs.queuePromisesProcess)(n,r[0]).then(i=>{o(i)}).catch(i=>{s(i)})})})}function K(e){return(...r)=>ke(this,null,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.resolve(t):Promise.reject(t)})}var ea=w(Ie()),ta=w(dt());var Hs=w(Fs()),ra=w(dt()),Xs=w(ir()),Zs=w(we()),na=w(ws()),sa=w(Os()),Qs=w(ar()),Me=(0,Qs.default)("jsonql:validator-core:common");function ae(e,r,t){return(n,s,o)=>ke(this,null,function*(){return Reflect.apply(r,null,[n]).then(_t(e,n,s,o)).catch(i=>(Me("failed",e,n,i,o),Promise.reject(new Hs.default(t,o))))})}function _t(e,r,t,n){return s=>{let o=n[0];Me("passed",e,r,s,n),Me("lastResult",t);let i={[pt]:o,[$]:r};if(t===void 0)return{[e]:i};if(e in t){let u=t[e];return Re(u)?u.includes(i)||t[e].push(i):u[pt]!==o&&(t[e]=(0,Xs.toArray)(t[e]).concat([i])),t}return(0,Zs.assign)(t,{[e]:i})}}function Re(e,r=pt){try{if(Array.isArray(e))return!!e.filter(t=>r in t).length}catch(t){Me("isResultPackage",t)}return!1}var oa=w(dt()),eo=w(ar()),ia=(0,eo.default)("jsonql:validator-core:validator-plugin");var dr="Input argument is not an array!";var mr="Exception happened don't know how to handle it",yr="$_spread_arg_",X="$$is_spread_values",ue="RestElement",_r="TsUnionType",hr="TsArrayType",ht="defaultvalue",gr="TsTypeLiteral",Cr="TsTypeReference",gt="tstype",br="object",Ct="array",vr="raw";var wr=T(ut()),Je=T(z()),Or=T(Ke()),pe=(0,Or.default)("jsonql:validator:class:fn");function Rr(e){return e.map(r=>{let{name:t}=r,n=ho(r),s=r[gt]||r.type;return pe("createAutomaticRules",t,s),r[Oe]=[ae(t,n,s)],r})}function jr(e,r){return P(this,null,function*(){return mo(e,r).then(_o)})}function Tr(e,r){return yo(e,r).reduce((t,n)=>(0,Je.assign)(t,n),{})}function mo(e,r){return P(this,null,function*(){return e.map(t=>$ in r[t]?r[t][$]:Re(r[t])?{[X]:r[t].map(n=>n[$])}:(pe(`Return result when we couldn't find way to destruct: ${t}`,r[t]),r[t]))})}function yo(e,r){return e.map(t=>{switch(!0){case $ in r[t]:return{[t]:r[t][$]};case Re(r[t]):return{[t]:r[t].map(n=>n[$])};default:return{[t]:r[t]}}})}function _o(e){return P(this,null,function*(){pe("unwrapPreparedValidateResult",e);let r=e.length;if(r===1&&(0,Je.objectHasKey)(e[0],X))return e[0][X];if(Re(e,X)){let t=[];for(let n=0;n<r;++n)X in e[n]?t=t.concat(e[n][X]):t.push(e[n]);return t}return e})}function ho(e){switch(pe("getValidateRules ast",e),e[gt]){case _r:return function(t){return P(this,null,function*(){return pr(t,e.type)})};case(hr||ue):return function(t){return P(this,null,function*(){return K(H)(t,e.types)})};case(Cr||gr):return function(t){return P(this,null,function*(){return K(yt)(t)})};case ue:return function(t){return P(this,null,function*(){return K(U(e.types))(t)})};default:return mt(e.type)?(pe("validation type",e.type),function(t){return P(this,null,function*(){return K(U(e.type))(t)})}):(pe("getValidateRules",e),function(t){return P(this,null,function*(){return K(wr.notEmpty)(t,!0)})})}}function bt(e,r){return r.tstype!==ue&&e===void 0?r[ht]!==void 0?r[ht]:void 0:e}function Sr(e){return[W,G,lr].filter(r=>e[r]!==void 0)}function vt(e){let r=Object.keys(e);return r.length?r[0]:void 0}var kr=T(Ke()),j=(0,kr.default)("jsonql:validator:validator-base"),Le=class{constructor(r,t){this._validatorPluginsInstance=t;this._astWithBaseRules=Rr(r),this._arguments=this._astWithBaseRules.map(n=>n[fr])}validate(r){let t=this._normalizeArgValues(r);return(0,Mr.queuePromisesProcess)(t,void 0)}prepareArgValues(r){return this._normalizeArgValues(r,!1)}get schema(){return this._schema||this._astWithBaseRules}addValidationRules(r){j("addValidationRules",r);let t={};for(let n in r)t[n]=(0,xr.toArray)(r[n]).map(s=>(0,Ue.isFunction)(s)?this._updateInput(s):s);this._createSchema(t)}_updateInput(r){return{[G]:(0,Ue.isAsyncFunction)(r)?r:K(r)}}_normalizeArgValues(r,t=!0){j("_normalizeArgValues",r);let n=this.schema,s=n.length;if(s===0)return[];if(!H(r))throw j(r),new Pt.default(dr,r);let o=r.length;switch(!0){case o===s:return t===!1?(0,de.arrToObj)(r,(i,u)=>({[n[u].name]:i})):r.map((i,u)=>this._prepareForExecution(i,n[u],u));case o<s:return j("Values pass less than params"),t===!1?(0,de.arrToObj)(n,(i,u)=>{let a=bt(r[u],i);return{[i.name]:a}}):n.map((i,u)=>{let a=bt(r[u],i);return this._prepareForExecution(a,i,u)});case o>s:return j("spread params",o,s),this._processSpreadLikeArg(r,n,t);default:throw new Pt.default(mr,[o,s])}}_processSpreadLikeArg(r,t,n){let s=t.filter(o=>o.tstype===ue)[0];return n===!1?r.map((o,i)=>t[i]?t[i].name!==s.name?{[t[i].name]:o}:{[s.name]:[o]}:{[s.name]:[o]}).reduce((o,i)=>{if(!vt(o))return i;let a=vt(i);return o[a]?(o[a]=o[a].concat(i[a]),o):(0,de.assign)({},o,i)},{}):r.map((o,i)=>{let u=t[i]||(0,de.assign)({},s,{name:`${yr}${i}`});return j("spread param",o,u.name),this._prepareForExecution(o,u,i)})}_prepareForExecution(r,t,n){let{rules:s,required:o,name:i}=t;return s&&s.length?s.map((u,a)=>r===void 0&&!o?(j("skip the validation",o),p=>P(this,null,function*(){return _t(i,r,p,[n,a])(!0)})):p=>P(this,null,function*(){return Reflect.apply(u,null,[r,p,[n,a]]).then(c=>(j("Post rule result",c),c))})):(j("No rules to run"),()=>P(this,null,function*(){return!0}))}_createSchema(r){let t=this._astWithBaseRules;(0,Yr.notEmpty)(r,!0)&&(t=this._applyObjectInput(t,r)),j("_createSchema",t),this._schema=t}_applyObjectInput(r,t){return r.map(n=>{var o;let s=n.name;if(t[s]){let i=t[s].map(a=>(a.name=s,a)),u=this._transformInput(i,s);u&&u.length&&(n[Oe]=(o=n[Oe])==null?void 0:o.concat(u))}return n})}_transformInput(r,t){return j("_transformInput",r),r.map((n,s)=>{let o=Sr(n);if(o.length>1)throw new Error(`You can only set one rule at a time! We found ${o.join(",")}`);let i=n.name||`customPluginName${s}`;switch(!0){case n[Ne]!==void 0:return j("Should got here ----->",n[Ne]),this._lookupPlugin(n,t);case n[W]!==void 0:return j(`${W} ----->`,n),ae(t,K(n[W]),i);case n[G]!==void 0:return j(`${G} ---->`,n),ae(t,n[G],i);default:throw new qr.default(`unable to find rule for ${t},
            we expect ${Ne}, ${W} or ${G}`)}})}_lookupPlugin(r,t){try{if(this._validatorPluginsInstance)return j("_lookupPlugin --->",r,t),this._validatorPluginsInstance.lookupPlugin(r,t)}catch(n){j("catch _lookupPlugin error",n)}return ae(t,()=>P(this,null,function*(){return Promise.reject(!1)}),"NO_PLUGIN_DUMMY_FUNCTION")}};var Jt=T(qn());var xn=T(Ke()),Yn=(0,xn.default)("jsonql:validator:class:index"),rt=class extends Le{constructor(r,t){super(r,t&&t instanceof Jt.ValidatorPlugins?t:new Jt.ValidatorPlugins(-1))}validate(n){return P(this,arguments,function*(r,t=Ct){return Bt(rt.prototype,this,"validate").call(this,r).then(s=>{switch(t){case vr:return s;case Ct:return this._prepareValidateResultForFuncCall(s);case br:default:return this._prepareValidateResultAsObject(s)}})})}registerPlugin(r,t){this._validatorPluginsInstance&&this._validatorPluginsInstance.registerPlugin(r,t)}_prepareValidateResultForFuncCall(r){return P(this,null,function*(){return Yn("validateResult return as array",this._arguments,r),jr(this._arguments,r)})}_prepareValidateResultAsObject(r){return P(this,null,function*(){return Yn("validateResult return as object",this._arguments,r),Tr(this._arguments,r)})}};export{rt as Validator};
//# sourceMappingURL=esm.js.map
