var Ca=Object.create;var ai=Object.defineProperty;var Ra=Object.getOwnPropertyDescriptor;var Oa=Object.getOwnPropertyNames;var Pa=Object.getPrototypeOf,wa=Object.prototype.hasOwnProperty;var R=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,t)=>(typeof require!="undefined"?require:r)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var m=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ta=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Oa(r))!wa.call(e,i)&&i!==t&&ai(e,i,{get:()=>r[i],enumerable:!(n=Ra(r,i))||n.enumerable});return e};var le=(e,r,t)=>(t=e!=null?Ca(Pa(e)):{},Ta(r||!e||!e.__esModule?ai(t,"default",{value:e,enumerable:!0}):t,e));var Ar=(e,r,t)=>new Promise((n,i)=>{var s=u=>{try{a(t.next(u))}catch(f){i(f)}},o=u=>{try{a(t.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(e,r)).next())});var ui=m(Cr=>{var Se=R("path"),me=process.platform==="win32",_e=R("fs"),Sa=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Fa(){var e;if(Sa){var r=new Error;e=t}else e=n;return e;function t(i){i&&(r.message=i.message,i=r,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function ja(e){return typeof e=="function"?e:Fa()}var vh=Se.normalize;me?fe=/(.*?)(?:[\/\\]+|$)/g:fe=/(.*?)(?:[\/]+|$)/g;var fe;me?dt=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:dt=/^[\/]*/;var dt;Cr.realpathSync=function(r,t){if(r=Se.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];var n=r,i={},s={},o,a,u,f;l();function l(){var g=dt.exec(r);o=g[0].length,a=g[0],u=g[0],f="",me&&!s[u]&&(_e.lstatSync(u),s[u]=!0)}for(;o<r.length;){fe.lastIndex=o;var c=fe.exec(r);if(f=a,a+=c[0],u=f+c[1],o=fe.lastIndex,!(s[u]||t&&t[u]===u)){var h;if(t&&Object.prototype.hasOwnProperty.call(t,u))h=t[u];else{var _=_e.lstatSync(u);if(!_.isSymbolicLink()){s[u]=!0,t&&(t[u]=u);continue}var d=null;if(!me){var y=_.dev.toString(32)+":"+_.ino.toString(32);i.hasOwnProperty(y)&&(d=i[y])}d===null&&(_e.statSync(u),d=_e.readlinkSync(u)),h=Se.resolve(f,d),t&&(t[u]=h),me||(i[y]=d)}r=Se.resolve(h,r.slice(o)),l()}}return t&&(t[n]=r),r};Cr.realpath=function(r,t,n){if(typeof n!="function"&&(n=ja(t),t=null),r=Se.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return process.nextTick(n.bind(null,null,t[r]));var i=r,s={},o={},a,u,f,l;c();function c(){var g=dt.exec(r);a=g[0].length,u=g[0],f=g[0],l="",me&&!o[f]?_e.lstat(f,function(b){if(b)return n(b);o[f]=!0,h()}):process.nextTick(h)}function h(){if(a>=r.length)return t&&(t[i]=r),n(null,r);fe.lastIndex=a;var g=fe.exec(r);return l=u,u+=g[0],f=l+g[1],a=fe.lastIndex,o[f]||t&&t[f]===f?process.nextTick(h):t&&Object.prototype.hasOwnProperty.call(t,f)?y(t[f]):_e.lstat(f,_)}function _(g,b){if(g)return n(g);if(!b.isSymbolicLink())return o[f]=!0,t&&(t[f]=f),process.nextTick(h);if(!me){var w=b.dev.toString(32)+":"+b.ino.toString(32);if(s.hasOwnProperty(w))return d(null,s[w],f)}_e.stat(f,function($){if($)return n($);_e.readlink(f,function(E,A){me||(s[w]=A),d(E,A)})})}function d(g,b,w){if(g)return n(g);var $=Se.resolve(l,b);t&&(t[w]=$),y($)}function y(g){r=Se.resolve(g,r.slice(a)),c()}}});var wr=m((Eh,hi)=>{hi.exports=ge;ge.realpath=ge;ge.sync=Pr;ge.realpathSync=Pr;ge.monkeypatch=Ia;ge.unmonkeypatch=Ya;var xe=R("fs"),Rr=xe.realpath,Or=xe.realpathSync,ka=process.version,ci=/^v[0-5]\./.test(ka),li=ui();function fi(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function ge(e,r,t){if(ci)return Rr(e,r,t);typeof r=="function"&&(t=r,r=null),Rr(e,r,function(n,i){fi(n)?li.realpath(e,r,t):t(n,i)})}function Pr(e,r){if(ci)return Or(e,r);try{return Or(e,r)}catch(t){if(fi(t))return li.realpathSync(e,r);throw t}}function Ia(){xe.realpath=ge,xe.realpathSync=Pr}function Ya(){xe.realpath=Rr,xe.realpathSync=Or}});var pi=m((Ah,di)=>{var Ma=typeof process=="object"&&process&&process.platform==="win32";di.exports=Ma?{sep:"\\"}:{sep:"/"}});var vi=m((Ch,yi)=>{"use strict";yi.exports=mi;function mi(e,r,t){e instanceof RegExp&&(e=_i(e,t)),r instanceof RegExp&&(r=_i(r,t));var n=gi(e,r,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+e.length,n[1]),post:t.slice(n[1]+r.length)}}function _i(e,r){var t=r.match(e);return t?t[0]:null}mi.range=gi;function gi(e,r,t){var n,i,s,o,a,u=t.indexOf(e),f=t.indexOf(r,u+1),l=u;if(u>=0&&f>0){if(e===r)return[u,f];for(n=[],s=t.length;l>=0&&!a;)l==u?(n.push(l),u=t.indexOf(e,l+1)):n.length==1?a=[n.pop(),f]:(i=n.pop(),i<s&&(s=i,o=f),f=t.indexOf(r,l+1)),l=u<f&&u>=0?u:f;n.length&&(a=[s,o])}return a}});var wi=m((Rh,Pi)=>{var bi=vi();Pi.exports=Na;var Ei="\0SLASH"+Math.random()+"\0",Ai="\0OPEN"+Math.random()+"\0",Sr="\0CLOSE"+Math.random()+"\0",Ci="\0COMMA"+Math.random()+"\0",Ri="\0PERIOD"+Math.random()+"\0";function Tr(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function qa(e){return e.split("\\\\").join(Ei).split("\\{").join(Ai).split("\\}").join(Sr).split("\\,").join(Ci).split("\\.").join(Ri)}function La(e){return e.split(Ei).join("\\").split(Ai).join("{").split(Sr).join("}").split(Ci).join(",").split(Ri).join(".")}function Oi(e){if(!e)return[""];var r=[],t=bi("{","}",e);if(!t)return e.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Oi(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),r.push.apply(r,o),r}function Na(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),pt(qa(e),!0).map(La)):[]}function Da(e){return"{"+e+"}"}function xa(e){return/^-?0\d/.test(e)}function Va(e,r){return e<=r}function Ua(e,r){return e>=r}function pt(e,r){var t=[],n=bi("{","}",e);if(!n)return[e];var i=n.pre,s=n.post.length?pt(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=u||f,c=n.body.indexOf(",")>=0;if(!l&&!c)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Sr+n.post,pt(e)):[e];var h;if(l)h=n.body.split(/\.\./);else if(h=Oi(n.body),h.length===1&&(h=pt(h[0],!1).map(Da),h.length===1))return s.map(function(br){return n.pre+h[0]+br});var _;if(l){var d=Tr(h[0]),y=Tr(h[1]),g=Math.max(h[0].length,h[1].length),b=h.length==3?Math.abs(Tr(h[2])):1,w=Va,$=y<d;$&&(b*=-1,w=Ua);var E=h.some(xa);_=[];for(var A=d;w(A,y);A+=b){var P;if(f)P=String.fromCharCode(A),P==="\\"&&(P="");else if(P=String(A),E){var H=g-P.length;if(H>0){var k=new Array(H+1).join("0");A<0?P="-"+k+P.slice(1):P=k+P}}_.push(P)}}else{_=[];for(var J=0;J<h.length;J++)_.push.apply(_,pt(h[J],!1))}for(var J=0;J<_.length;J++)for(var o=0;o<s.length;o++){var a=i+_[J]+s[o];(!r||l||a)&&t.push(a)}}return t}});var Ft=m((Ph,Ir)=>{var W=Ir.exports=(e,r,t={})=>(St(r),!t.nocomment&&r.charAt(0)==="#"?!1:new Ve(r,t).match(e));Ir.exports=W;var jr=pi();W.sep=jr.sep;var ie=Symbol("globstar **");W.GLOBSTAR=ie;var Ka=wi(),Ti={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},kr="[^/]",Fr=kr+"*?",Ga="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ba="(?:(?!(?:\\/|^)\\.).)*?",ji=e=>e.split("").reduce((r,t)=>(r[t]=!0,r),{}),Si=ji("().*{}+?[]^$\\!"),$a=ji("[.("),Fi=/\/+/;W.filter=(e,r={})=>(t,n,i)=>W(t,e,r);var ye=(e,r={})=>{let t={};return Object.keys(e).forEach(n=>t[n]=e[n]),Object.keys(r).forEach(n=>t[n]=r[n]),t};W.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return W;let r=W,t=(n,i,s)=>r(n,i,ye(e,s));return t.Minimatch=class extends r.Minimatch{constructor(i,s){super(i,ye(e,s))}},t.Minimatch.defaults=n=>r.defaults(ye(e,n)).Minimatch,t.filter=(n,i)=>r.filter(n,ye(e,i)),t.defaults=n=>r.defaults(ye(e,n)),t.makeRe=(n,i)=>r.makeRe(n,ye(e,i)),t.braceExpand=(n,i)=>r.braceExpand(n,ye(e,i)),t.match=(n,i,s)=>r.match(n,i,ye(e,s)),t};W.braceExpand=(e,r)=>ki(e,r);var ki=(e,r={})=>(St(e),r.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Ka(e)),Ja=1024*64,St=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Ja)throw new TypeError("pattern is too long")},Tt=Symbol("subparse");W.makeRe=(e,r)=>new Ve(e,r||{}).makeRe();W.match=(e,r,t={})=>{let n=new Ve(r,t);return e=e.filter(i=>n.match(i)),n.options.nonull&&!e.length&&e.push(r),e};var Ha=e=>e.replace(/\\(.)/g,"$1"),Wa=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ve=class{constructor(r,t){St(r),t||(t={}),this.options=t,this.set=[],this.pattern=r,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let r=this.pattern,t=this.options;if(!t.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(Fi)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let r=this.pattern,t=!1,n=0;for(let i=0;i<r.length&&r.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=r.substr(n)),this.negate=t}matchOne(r,t,n){var i=this.options;this.debug("matchOne",{this:this,file:r,pattern:t}),this.debug("matchOne",r.length,t.length);for(var s=0,o=0,a=r.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var f=t[o],l=r[s];if(this.debug(t,f,l),f===!1)return!1;if(f===ie){this.debug("GLOBSTAR",[t,f,l]);var c=s,h=o+1;if(h===u){for(this.debug("** at the end");s<a;s++)if(r[s]==="."||r[s]===".."||!i.dot&&r[s].charAt(0)===".")return!1;return!0}for(;c<a;){var _=r[c];if(this.debug(`
globstar while`,r,c,t,h,_),this.matchOne(r.slice(c),t.slice(h),n))return this.debug("globstar found match!",c,a,_),!0;if(_==="."||_===".."||!i.dot&&_.charAt(0)==="."){this.debug("dot detected!",r,c,t,h);break}this.debug("globstar swallow a segment, and continue"),c++}return!!(n&&(this.debug(`
>>> no match, partial?`,r,c,t,h),c===a))}var d;if(typeof f=="string"?(d=l===f,this.debug("string match",f,l,d)):(d=l.match(f),this.debug("pattern match",f,l,d)),!d)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&r[s]==="";throw new Error("wtf?")}braceExpand(){return ki(this.pattern,this.options)}parse(r,t){St(r);let n=this.options;if(r==="**")if(n.noglobstar)r="*";else return ie;if(r==="")return"";let i="",s=!!n.nocase,o=!1,a=[],u=[],f,l=!1,c=-1,h=-1,_,d,y,g=r.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(f){switch(f){case"*":i+=Fr,s=!0;break;case"?":i+=kr,s=!0;break;default:i+="\\"+f;break}this.debug("clearStateChar %j %j",f,i),f=!1}};for(let E=0,A;E<r.length&&(A=r.charAt(E));E++){if(this.debug("%s	%s %s %j",r,E,i,A),o){if(A==="/")return!1;Si[A]&&(i+="\\"),i+=A,o=!1;continue}switch(A){case"/":return!1;case"\\":b(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,E,i,A),l){this.debug("  in class"),A==="!"&&E===h+1&&(A="^"),i+=A;continue}this.debug("call clearStateChar %j",f),b(),f=A,n.noext&&b();continue;case"(":if(l){i+="(";continue}if(!f){i+="\\(";continue}a.push({type:f,start:E-1,reStart:i.length,open:Ti[f].open,close:Ti[f].close}),i+=f==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",f,i),f=!1;continue;case")":if(l||!a.length){i+="\\)";continue}b(),s=!0,d=a.pop(),i+=d.close,d.type==="!"&&u.push(d),d.reEnd=i.length;continue;case"|":if(l||!a.length){i+="\\|";continue}b(),i+="|";continue;case"[":if(b(),l){i+="\\"+A;continue}l=!0,h=E,c=i.length,i+=A;continue;case"]":if(E===h+1||!l){i+="\\"+A;continue}_=r.substring(h+1,E);try{RegExp("["+_+"]")}catch{y=this.parse(_,Tt),i=i.substr(0,c)+"\\["+y[0]+"\\]",s=s||y[1],l=!1;continue}s=!0,l=!1,i+=A;continue;default:b(),Si[A]&&!(A==="^"&&l)&&(i+="\\"),i+=A;break}}for(l&&(_=r.substr(h+1),y=this.parse(_,Tt),i=i.substr(0,c)+"\\["+y[0],s=s||y[1]),d=a.pop();d;d=a.pop()){let E;E=i.slice(d.reStart+d.open.length),this.debug("setting tail",i,d),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,(P,H,k)=>(k||(k="\\"),H+H+k+"|")),this.debug(`tail=%j
   %s`,E,E,d,i);let A=d.type==="*"?Fr:d.type==="?"?kr:"\\"+d.type;s=!0,i=i.slice(0,d.reStart)+A+"\\("+E}b(),o&&(i+="\\\\");let w=$a[i.charAt(0)];for(let E=u.length-1;E>-1;E--){let A=u[E],P=i.slice(0,A.reStart),H=i.slice(A.reStart,A.reEnd-8),k=i.slice(A.reEnd),J=i.slice(A.reEnd-8,A.reEnd)+k,br=P.split("(").length-1,Er=k;for(let oi=0;oi<br;oi++)Er=Er.replace(/\)[+*?]?/,"");k=Er;let Aa=k===""&&t!==Tt?"$":"";i=P+H+k+Aa+J}if(i!==""&&s&&(i="(?=.)"+i),w&&(i=g+i),t===Tt)return[i,s];if(!s)return Ha(r);let $=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",$),{_glob:r,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let r=this.set;if(!r.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?Fr:t.dot?Ga:Ba,i=t.nocase?"i":"",s=r.map(o=>(o=o.map(a=>typeof a=="string"?Wa(a):a===ie?ie:a._src).reduce((a,u)=>(a[a.length-1]===ie&&u===ie||a.push(u),a),[]),o.forEach((a,u)=>{a!==ie||o[u-1]===ie||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=ie))}),o.filter(a=>a!==ie).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(r,t=this.partial){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&t)return!0;let n=this.options;jr.sep!=="/"&&(r=r.split(jr.sep).join("/")),r=r.split(Fi),this.debug(this.pattern,"split",r);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=r.length-1;o>=0&&(s=r[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=r;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(r){return W.defaults(r).Minimatch}};W.Minimatch=Ve});var Ii=m((wh,Yr)=>{typeof Object.create=="function"?Yr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Yr.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var Yi=m((Th,qr)=>{try{if(Mr=R("util"),typeof Mr.inherits!="function")throw"";qr.exports=Mr.inherits}catch{qr.exports=Ii()}var Mr});var Nr=m(ve=>{ve.setopts=tu;ve.ownProp=Mi;ve.makeAbs=_t;ve.finish=ru;ve.mark=nu;ve.isIgnored=Li;ve.childrenIgnored=iu;function Mi(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var za=R("fs"),Fe=R("path"),Xa=Ft(),qi=R("path").isAbsolute,Lr=Xa.Minimatch;function Za(e,r){return e.localeCompare(r,"en")}function Qa(e,r){e.ignore=r.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(eu))}function eu(e){var r=null;if(e.slice(-3)==="/**"){var t=e.replace(/(\/\*\*)+$/,"");r=new Lr(t,{dot:!0})}return{matcher:new Lr(e,{dot:!0}),gmatcher:r}}function tu(e,r,t){if(t||(t={}),t.matchBase&&r.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!t.silent,e.pattern=r,e.strict=t.strict!==!1,e.realpath=!!t.realpath,e.realpathCache=t.realpathCache||Object.create(null),e.follow=!!t.follow,e.dot=!!t.dot,e.mark=!!t.mark,e.nodir=!!t.nodir,e.nodir&&(e.mark=!0),e.sync=!!t.sync,e.nounique=!!t.nounique,e.nonull=!!t.nonull,e.nosort=!!t.nosort,e.nocase=!!t.nocase,e.stat=!!t.stat,e.noprocess=!!t.noprocess,e.absolute=!!t.absolute,e.fs=t.fs||za,e.maxLength=t.maxLength||1/0,e.cache=t.cache||Object.create(null),e.statCache=t.statCache||Object.create(null),e.symlinks=t.symlinks||Object.create(null),Qa(e,t),e.changedCwd=!1;var n=process.cwd();Mi(t,"cwd")?(e.cwd=Fe.resolve(t.cwd),e.changedCwd=e.cwd!==n):e.cwd=Fe.resolve(n),e.root=t.root||Fe.resolve(e.cwd,"/"),e.root=Fe.resolve(e.root),e.cwdAbs=qi(e.cwd)?e.cwd:_t(e,e.cwd),e.nomount=!!t.nomount,process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/"),e.cwd=e.cwd.replace(/\\/g,"/"),e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),t.nonegate=!0,t.nocomment=!0,t.allowWindowsEscape=!0,e.minimatch=new Lr(r,t),e.options=e.minimatch.options}function ru(e){for(var r=e.nounique,t=r?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var o=e.minimatch.globSet[n];r?t.push(o):t[o]=!0}}else{var a=Object.keys(s);r?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(r||(t=Object.keys(t)),e.nosort||(t=t.sort(Za)),e.mark){for(var n=0;n<t.length;n++)t[n]=e._mark(t[n]);e.nodir&&(t=t.filter(function(u){var f=!/\/$/.test(u),l=e.cache[u]||e.cache[_t(e,u)];return f&&l&&(f=l!=="DIR"&&!Array.isArray(l)),f}))}e.ignore.length&&(t=t.filter(function(u){return!Li(e,u)})),e.found=t}function nu(e,r){var t=_t(e,r),n=e.cache[t],i=r;if(n){var s=n==="DIR"||Array.isArray(n),o=r.slice(-1)==="/";if(s&&!o?i+="/":!s&&o&&(i=i.slice(0,-1)),i!==r){var a=_t(e,i);e.statCache[a]=e.statCache[t],e.cache[a]=e.cache[t]}}return i}function _t(e,r){var t=r;return r.charAt(0)==="/"?t=Fe.join(e.root,r):qi(r)||r===""?t=r:e.changedCwd?t=Fe.resolve(e.cwd,r):t=Fe.resolve(r),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function Li(e,r){return e.ignore.length?e.ignore.some(function(t){return t.matcher.match(r)||!!(t.gmatcher&&t.gmatcher.match(r))}):!1}function iu(e,r){return e.ignore.length?e.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(r))}):!1}});var Ui=m((Ih,Vi)=>{Vi.exports=xi;xi.GlobSync=q;var su=wr(),Ni=Ft(),Fh=Ni.Minimatch,jh=Vr().Glob,kh=R("util"),Dr=R("path"),Di=R("assert"),jt=R("path").isAbsolute,je=Nr(),ou=je.setopts,xr=je.ownProp,au=je.childrenIgnored,uu=je.isIgnored;function xi(e,r){if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new q(e,r).found}function q(e,r){if(!e)throw new Error("must provide pattern");if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof q))return new q(e,r);if(ou(this,e,r),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}q.prototype._finish=function(){if(Di.ok(this instanceof q),this.realpath){var e=this;this.matches.forEach(function(r,t){var n=e.matches[t]=Object.create(null);for(var i in r)try{i=e._makeAbs(i);var s=su.realpathSync(i,e.realpathCache);n[s]=!0}catch(o){if(o.syscall==="stat")n[e._makeAbs(i)]=!0;else throw o}})}je.finish(this)};q.prototype._process=function(e,r,t){Di.ok(this instanceof q);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),r);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),o;i===null?o=".":((jt(i)||jt(e.map(function(f){return typeof f=="string"?f:"[*]"}).join("/")))&&(!i||!jt(i))&&(i="/"+i),o=i);var a=this._makeAbs(o);if(!au(this,o)){var u=s[0]===Ni.GLOBSTAR;u?this._processGlobStar(i,o,a,s,r,t):this._processReaddir(i,o,a,s,r,t)}};q.prototype._processReaddir=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){for(var a=n[0],u=!!this.minimatch.negate,f=a._glob,l=this.dot||f.charAt(0)===".",c=[],h=0;h<o.length;h++){var _=o[h];if(_.charAt(0)!=="."||l){var d;u&&!e?d=!_.match(a):d=_.match(a),d&&c.push(_)}}var y=c.length;if(y!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<y;h++){var _=c[h];e&&(e.slice(-1)!=="/"?_=e+"/"+_:_=e+_),_.charAt(0)==="/"&&!this.nomount&&(_=Dr.join(this.root,_)),this._emitMatch(i,_)}return}n.shift();for(var h=0;h<y;h++){var _=c[h],g;e?g=[e,_]:g=[_],this._process(g.concat(n),i,s)}}}};q.prototype._emitMatch=function(e,r){if(!uu(this,r)){var t=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0,this.stat&&this._stat(r)}}};q.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var r,t,n;try{t=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[e]=i,!i&&t&&!t.isDirectory()?this.cache[e]="FILE":r=this._readdir(e,!1),r};q.prototype._readdir=function(e,r){var t;if(r&&!xr(this.symlinks,e))return this._readdirInGlobStar(e);if(xr(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};q.prototype._readdirEntries=function(e,r){if(!this.mark&&!this.stat)for(var t=0;t<r.length;t++){var n=r[t];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=r,r};q.prototype._readdirError=function(e,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(e);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(r.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=r.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw r;this.silent||console.error("glob error",r);break}};q.prototype._processGlobStar=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){var a=n.slice(1),u=e?[e]:[],f=u.concat(a);this._process(f,i,!1);var l=o.length,c=this.symlinks[t];if(!(c&&s))for(var h=0;h<l;h++){var _=o[h];if(!(_.charAt(0)==="."&&!this.dot)){var d=u.concat(o[h],a);this._process(d,i,!0);var y=u.concat(o[h],n);this._process(y,i,!0)}}}};q.prototype._processSimple=function(e,r){var t=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),!!t){if(e&&jt(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Dr.join(this.root,e):(e=Dr.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}};q.prototype._stat=function(e){var r=this._makeAbs(e),t=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&xr(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var n,i=this.statCache[r];if(!i){var s;try{s=this.fs.lstatSync(r)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[r]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(r)}catch{i=s}else i=s}this.statCache[r]=i;var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,t&&o==="FILE"?!1:o};q.prototype._mark=function(e){return je.mark(this,e)};q.prototype._makeAbs=function(e){return je.makeAbs(this,e)}});var Ur=m((Yh,Gi)=>{Gi.exports=Ki;function Ki(e,r){if(e&&r)return Ki(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var Gr=m((Mh,Kr)=>{var Bi=Ur();Kr.exports=Bi(kt);Kr.exports.strict=Bi($i);kt.proto=kt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return kt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return $i(this)},configurable:!0})});function kt(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function $i(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var Hi=m((qh,Ji)=>{var cu=Ur(),mt=Object.create(null),lu=Gr();Ji.exports=cu(fu);function fu(e,r){return mt[e]?(mt[e].push(r),null):(mt[e]=[r],hu(e))}function hu(e){return lu(function r(){var t=mt[e],n=t.length,i=du(arguments);try{for(var s=0;s<n;s++)t[s].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){r.apply(null,i)})):delete mt[e]}})}function du(e){for(var r=e.length,t=[],n=0;n<r;n++)t[n]=e[n];return t}});var Vr=m((Dh,zi)=>{zi.exports=ke;var pu=wr(),Wi=Ft(),Lh=Wi.Minimatch,_u=Yi(),mu=R("events").EventEmitter,Br=R("path"),$r=R("assert"),gt=R("path").isAbsolute,Hr=Ui(),Ie=Nr(),gu=Ie.setopts,Jr=Ie.ownProp,Wr=Hi(),Nh=R("util"),yu=Ie.childrenIgnored,vu=Ie.isIgnored,bu=Gr();function ke(e,r,t){if(typeof r=="function"&&(t=r,r={}),r||(r={}),r.sync){if(t)throw new TypeError("callback provided to sync glob");return Hr(e,r)}return new O(e,r,t)}ke.sync=Hr;var Eu=ke.GlobSync=Hr.GlobSync;ke.glob=ke;function Au(e,r){if(r===null||typeof r!="object")return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}ke.hasMagic=function(e,r){var t=Au({},r);t.noprocess=!0;var n=new O(e,t),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};ke.Glob=O;_u(O,mu);function O(e,r,t){if(typeof r=="function"&&(t=r,r=null),r&&r.sync){if(t)throw new TypeError("callback provided to sync glob");return new Eu(e,r)}if(!(this instanceof O))return new O(e,r,t);gu(this,e,r),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=bu(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var s=!0,o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,a);s=!1;function a(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}O.prototype._finish=function(){if($r(this instanceof O),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Ie.finish(this),this.emit("end",this.found)}};O.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var r=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--e===0&&r._finish()}};O.prototype._realpathSet=function(e,r){var t=this.matches[e];if(!t)return r();var n=Object.keys(t),i=this,s=n.length;if(s===0)return r();var o=this.matches[e]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),pu.realpath(a,i.realpathCache,function(f,l){f?f.syscall==="stat"?o[a]=!0:i.emit("error",f):o[l]=!0,--s===0&&(i.matches[e]=o,r())})})};O.prototype._mark=function(e){return Ie.mark(this,e)};O.prototype._makeAbs=function(e){return Ie.makeAbs(this,e)};O.prototype.abort=function(){this.aborted=!0,this.emit("abort")};O.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};O.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var r=0;r<e.length;r++){var t=e[r];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var r=0;r<n.length;r++){var i=n[r];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};O.prototype._process=function(e,r,t,n){if($r(this instanceof O),$r(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,r,t,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),r,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var o=e.slice(i),a;s===null?a=".":((gt(s)||gt(e.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!s||!gt(s))&&(s="/"+s),a=s);var u=this._makeAbs(a);if(yu(this,a))return n();var f=o[0]===Wi.GLOBSTAR;f?this._processGlobStar(s,a,u,o,r,t,n):this._processReaddir(s,a,u,o,r,t,n)}};O.prototype._processReaddir=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){return a._processReaddir2(e,r,t,n,i,s,f,o)})};O.prototype._processReaddir2=function(e,r,t,n,i,s,o,a){if(!o)return a();for(var u=n[0],f=!!this.minimatch.negate,l=u._glob,c=this.dot||l.charAt(0)===".",h=[],_=0;_<o.length;_++){var d=o[_];if(d.charAt(0)!=="."||c){var y;f&&!e?y=!d.match(u):y=d.match(u),y&&h.push(d)}}var g=h.length;if(g===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var _=0;_<g;_++){var d=h[_];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=Br.join(this.root,d)),this._emitMatch(i,d)}return a()}n.shift();for(var _=0;_<g;_++){var d=h[_],b;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(n),i,s,a)}a()};O.prototype._emitMatch=function(e,r){if(!this.aborted&&!vu(this,r)){if(this.paused){this._emitQueue.push([e,r]);return}var t=gt(r)?r:this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0;var i=this.statCache[t];i&&this.emit("stat",r,i),this.emit("match",r)}}};O.prototype._readdirInGlobStar=function(e,r){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,r);var t="lstat\0"+e,n=this,i=Wr(t,s);i&&n.fs.lstat(e,i);function s(o,a){if(o&&o.code==="ENOENT")return r();var u=a&&a.isSymbolicLink();n.symlinks[e]=u,!u&&a&&!a.isDirectory()?(n.cache[e]="FILE",r()):n._readdir(e,!1,r)}};O.prototype._readdir=function(e,r,t){if(!this.aborted&&(t=Wr("readdir\0"+e+"\0"+r,t),!!t)){if(r&&!Jr(this.symlinks,e))return this._readdirInGlobStar(e,t);if(Jr(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(e,Cu(this,e,t))}};function Cu(e,r,t){return function(n,i){n?e._readdirError(r,n,t):e._readdirEntries(r,i,t)}}O.prototype._readdirEntries=function(e,r,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<r.length;n++){var i=r[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=r,t(null,r)}};O.prototype._readdirError=function(e,r,t){if(!this.aborted){switch(r.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(r.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=r.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",r),this.abort()),this.silent||console.error("glob error",r);break}return t()}};O.prototype._processGlobStar=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){a._processGlobStar2(e,r,t,n,i,s,f,o)})};O.prototype._processGlobStar2=function(e,r,t,n,i,s,o,a){if(!o)return a();var u=n.slice(1),f=e?[e]:[],l=f.concat(u);this._process(l,i,!1,a);var c=this.symlinks[t],h=o.length;if(c&&s)return a();for(var _=0;_<h;_++){var d=o[_];if(!(d.charAt(0)==="."&&!this.dot)){var y=f.concat(o[_],u);this._process(y,i,!0,a);var g=f.concat(o[_],n);this._process(g,i,!0,a)}}a()};O.prototype._processSimple=function(e,r,t){var n=this;this._stat(e,function(i,s){n._processSimple2(e,r,i,s,t)})};O.prototype._processSimple2=function(e,r,t,n,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!n)return i();if(e&&gt(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Br.join(this.root,e):(e=Br.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()};O.prototype._stat=function(e,r){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return r();if(!this.stat&&Jr(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return r(null,i);if(n&&i==="FILE")return r()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return r(null,o);var a=o.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?r():r(null,a,o)}var u=this,f=Wr("stat\0"+t,l);f&&u.fs.lstat(t,f);function l(c,h){if(h&&h.isSymbolicLink())return u.fs.stat(t,function(_,d){_?u._stat2(e,t,null,h,r):u._stat2(e,t,_,d,r)});u._stat2(e,t,c,h,r)}};O.prototype._stat2=function(e,r,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[r]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[r]=n,r.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,s&&o==="FILE"?i():i(null,o,n)}});var Mt=m((xh,Yt)=>{var Xi,Zi,Qi,es,ts,rs,ns,is,ss,It,zr,os,as,Ue,us,cs,ls,fs,hs,ds,ps,_s,ms;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Yt=="object"&&typeof Yt.exports=="object"?e(t(r,t(Yt.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};Xi=function(t,n){r(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},Zi=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Qi=function(t,n){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]]);return i},es=function(t,n,i,s){var o=arguments.length,a=o<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,i):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,i,s);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(a=(o<3?u(a):o>3?u(n,i,a):u(n,i))||a);return o>3&&a&&Object.defineProperty(n,i,a),a},ts=function(t,n){return function(i,s){n(i,s,t)}},rs=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},ns=function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(u){u(a)})}return new(i||(i=Promise))(function(a,u){function f(h){try{c(s.next(h))}catch(_){u(_)}}function l(h){try{c(s.throw(h))}catch(_){u(_)}}function c(h){h.done?a(h.value):o(h.value).then(f,l)}c((s=s.apply(t,n||[])).next())})},is=function(t,n){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(c){return function(h){return l([c,h])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(t,i)}catch(h){c=[6,h],o=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ms=function(t,n,i,s){s===void 0&&(s=i),t[s]=n[i]},ss=function(t,n){for(var i in t)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=t[i])},It=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},zr=function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),o,a=[],u;try{for(;(n===void 0||n-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return a},os=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(zr(arguments[n]));return t},as=function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var s=Array(t),o=0,n=0;n<i;n++)for(var a=arguments[n],u=0,f=a.length;u<f;u++,o++)s[o]=a[u];return s},Ue=function(t){return this instanceof Ue?(this.v=t,this):new Ue(t)},us=function(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,n||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(d){s[d]&&(o[d]=function(y){return new Promise(function(g,b){a.push([d,y,g,b])>1||f(d,y)})})}function f(d,y){try{l(s[d](y))}catch(g){_(a[0][3],g)}}function l(d){d.value instanceof Ue?Promise.resolve(d.value.v).then(c,h):_(a[0][2],d)}function c(d){f("next",d)}function h(d){f("throw",d)}function _(d,y){d(y),a.shift(),a.length&&f(a[0][0],a[0][1])}},cs=function(t){var n,i;return n={},s("next"),s("throw",function(o){throw o}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(o,a){n[o]=t[o]?function(u){return(i=!i)?{value:Ue(t[o](u)),done:o==="return"}:a?a(u):u}:a}},ls=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof It=="function"?It(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(u){return new Promise(function(f,l){u=t[a](u),o(f,l,u.done,u.value)})}}function o(a,u,f,l){Promise.resolve(l).then(function(c){a({value:c,done:f})},u)}},fs=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t},hs=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n.default=t,n},ds=function(t){return t&&t.__esModule?t:{default:t}},ps=function(t,n){if(!n.has(t))throw new TypeError("attempted to get private field on non-instance");return n.get(t)},_s=function(t,n,i){if(!n.has(t))throw new TypeError("attempted to set private field on non-instance");return n.set(t,i),i},e("__extends",Xi),e("__assign",Zi),e("__rest",Qi),e("__decorate",es),e("__param",ts),e("__metadata",rs),e("__awaiter",ns),e("__generator",is),e("__exportStar",ss),e("__createBinding",ms),e("__values",It),e("__read",zr),e("__spread",os),e("__spreadArrays",as),e("__await",Ue),e("__asyncGenerator",us),e("__asyncDelegator",cs),e("__asyncValues",ls),e("__makeTemplateObject",fs),e("__importStar",hs),e("__importDefault",ds),e("__classPrivateFieldGet",ps),e("__classPrivateFieldSet",_s)})});var qt=m(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});var Ke=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ke.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}};Xr.default=Ke});var yt=m(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var Ge=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ge.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ge)}};Zr.default=Ge});var vt=m(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.compact=be.toArray=be.inArray=void 0;var Ru=(e,r)=>e.includes(r);be.inArray=Ru;var Ou=e=>Array.isArray(e)?e:[e];be.toArray=Ou;var Pu=e=>e.filter(Boolean);be.compact=Pu});var Ye=m(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.trueTypeOf=void 0;function wu(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}Lt.trueTypeOf=wu});var he=m(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.readOnly=F.objectHasKey=F.arrToObj=F.extend=F.assign=F.getConfigValue=F.isClass=F.isPlainObject=F.isObject=void 0;var Tu=vt(),Su=Ye();function Qr(e){return(0,Su.trueTypeOf)(e)==="object"}F.isObject=Qr;function en(e){if(Qr(e)){let t=e.constructor.prototype,n="[Object: null prototype]";return t.toString().substring(0,n.length)===n?!0:Qr(t)===!1?!1:Reflect.apply(t.hasOwnProperty,t,["isPrototypeOf"])}return!1}F.isPlainObject=en;var Fu=e=>!en(e);F.isClass=Fu;var ju=(e,r)=>r&&en(r)&&e in r?r[e]:void 0;F.getConfigValue=ju;var ku=(...e)=>Reflect.apply(Object.assign,Object,e);F.assign=ku;F.extend=F.assign;var Iu=(e,r,t={})=>e.map(r).reduce((n,i)=>(0,F.assign)(n,i),t);F.arrToObj=Iu;var Yu=(e,r)=>{try{let t=Object.keys(e);return(0,Tu.inArray)(t,r)}catch{return!1}};F.objectHasKey=Yu;var Mu=e=>Object.freeze(e);F.readOnly=Mu});var tn=m(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.isEmpty=ee.notEmpty=ee.isNotEmpty=ee.isEmptyObj=void 0;var gs=he(),qu=e=>e&&(0,gs.isPlainObject)(e)&&Object.keys(e).length===0;ee.isEmptyObj=qu;var Lu=e=>e!=null&&(e+"").trim()!=="";ee.isNotEmpty=Lu;function ys(e,r=!1){return Array.isArray(e)?r?!!e.length:!1:(0,gs.isPlainObject)(e)?r?!(0,ee.isEmptyObj)(e):!1:(0,ee.isNotEmpty)(e)}ee.notEmpty=ys;var Nu=(e,r)=>!ys(e,r);ee.isEmpty=Nu});var rn=m(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.isAsyncFunction=Be.isFunction=void 0;var vs=Ye(),bs=["asyncfunction","function"],Du=function(e,r=!1){let t=(0,vs.trueTypeOf)(e);return bs.includes(t)?!0:(r&&console.error(`Expect to be Function type! Got ${typeof e}`),!1)};Be.isFunction=Du;function xu(e){return(0,vs.trueTypeOf)(e)===bs[0]}Be.isAsyncFunction=xu});var bt=m(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.isString=z.flatMap=z.merge=z.curry=void 0;var Vu=Ye(),nn=he(),Uu=(e,...r)=>e.length<=r.length?e(...r):(...t)=>(0,z.curry)(e,...r,...t);z.curry=Uu;var Ku=(e,...r)=>{if(!r.length)return e;let t=r.shift();if((0,nn.isObject)(e)&&(0,nn.isObject)(t))for(let n in t)(0,nn.isObject)(t[n])?(e[n]||Object.assign(e,{[n]:{}}),(0,z.merge)(e[n],t[n])):Object.assign(e,{[n]:t[n]});return(0,z.merge)(e,...r)};z.merge=Ku;function Gu(e,r){return r||(r=t=>t),e.flatMap(r)}z.flatMap=Gu;function Bu(e){return(0,Vu.trueTypeOf)(e)==="string"}z.isString=Bu});var sn=m(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.queuePromisesProcess=Ee.chainProcessPromises=Ee.chainPromises=void 0;var Es=bt(),$u=he();function Ju(e,r=!1){return e.reduce((t,n)=>t.then(i=>n.then(s=>r===!1?[...i,s]:(0,Es.merge)(i,s))),Promise.resolve(r===!1?[]:(0,$u.isPlainObject)(r)?r:{}))}Ee.chainPromises=Ju;function As(e,...r){return(...t)=>r.reduce((n,i)=>n.then(s=>i(s)),Reflect.apply(e,null,t))}Ee.chainProcessPromises=As;function Hu(e,...r){let t=(0,Es.flatMap)(e),n=Reflect.apply(As,null,t);return Reflect.apply(n,null,r)}Ee.queuePromisesProcess=Hu});var on=m(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.checkString=void 0;var Wu=bt();function zu(e){return(e+"").trim()!==""?(0,Wu.isString)(e):!1}Nt.checkString=zu});var an=m(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.checkBoolean=void 0;var Xu=Ye();function Zu(e){return(0,Xu.trueTypeOf)(e)==="boolean"}Dt.checkBoolean=Zu});var $e=m(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.checkUnsigned=se.checkFloat=se.checkInteger=se.checkNumber=void 0;var un=Ye(),cn="number";function Qu(e){return(0,un.trueTypeOf)(e)!==cn?!1:!isNaN(parseFloat(e+""))}se.checkNumber=Qu;function Cs(e){return(0,un.trueTypeOf)(e)===cn&&Number.isInteger(e)}se.checkInteger=Cs;function ec(e){return(0,un.trueTypeOf)(e)===cn&&!isNaN(e)&&!Number.isInteger(e)}se.checkFloat=ec;function tc(e){return Cs(e)&&e>=0}se.checkUnsigned=tc});var ln=m(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.checkAny=void 0;function rc(e,r=!0){return e!==void 0&&e!==""&&(e+"").trim()!==""&&(r===!1||r===!0&&e!==null)}xt.checkAny=rc});var de=m(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.KEYWORDS=v.MAIN_NOT_FOUND_ERR=v.ARG_NOT_MATCH_ERR=v.RESERVED_WORD_ERR=v.VALUE_KEY=v.IDX_KEY=v.PARAMS_KEY=v.NAME_KEY=v.RULES_KEY=v.PATTERN_KEY=v.PLUGIN_FN_KEY=v.PLUGIN_KEY=v.VALIDATE_ASYNC_KEY=v.VALIDATE_KEY=v.ARRAY_TYPE_RGT=v.ARRAY_TYPE_LFT=v.ARRAY_TS_TYPE_LFT=v.OBJECT_TYPE=v.ARRAY_TYPE=v.NUMBER_TYPE=v.STRING_TYPE=v.BOOLEAN_TYPE=v.OR_SEPERATOR=void 0;v.OR_SEPERATOR="|";v.BOOLEAN_TYPE="boolean";v.STRING_TYPE="string";v.NUMBER_TYPE="number";v.ARRAY_TYPE="array";v.OBJECT_TYPE="object";v.ARRAY_TS_TYPE_LFT="Array<";v.ARRAY_TYPE_LFT="array.<";v.ARRAY_TYPE_RGT=">";v.VALIDATE_KEY="validate";v.VALIDATE_ASYNC_KEY="validateAsync";v.PLUGIN_KEY="plugin";v.PLUGIN_FN_KEY="main";v.PATTERN_KEY="pattern";v.RULES_KEY="rules";v.NAME_KEY="name";v.PARAMS_KEY="params";v.IDX_KEY="$$idx";v.VALUE_KEY="$$value";v.RESERVED_WORD_ERR="Your plugin config argument contains reserved keywords";v.ARG_NOT_MATCH_ERR="Your params doesn't matching your main argument list";v.MAIN_NOT_FOUND_ERR="Can not find 'main' method in your plugin config";v.KEYWORDS=[v.PARAMS_KEY,v.PATTERN_KEY,v.VALIDATE_KEY,v.VALIDATE_ASYNC_KEY,v.PLUGIN_KEY,v.RULES_KEY,"name","type","types","server","tstype","value","optional","tmp","pos","lastResult"]});var Et=m(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.combineCheck=void 0;var nc=$e(),ic=on(),sc=an(),oc=ln(),fn=de();function ac(e){switch(e){case fn.NUMBER_TYPE:return nc.checkNumber;case fn.STRING_TYPE:return ic.checkString;case fn.BOOLEAN_TYPE:return sc.checkBoolean;default:return oc.checkAny}}Vt.combineCheck=ac});var Ut=m(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.arrayTypeHandler=Ce.isArrayLike=Ce.checkArray=void 0;var uc=he(),hn=Et(),Ae=de(),Rs={ts:Ae.ARRAY_TS_TYPE_LFT,jsdoc:Ae.ARRAY_TYPE_LFT};function Ps(e,r){if(Array.isArray(e)){if(!r)return!0;let t;return Array.isArray(r)?t=e.filter(n=>{let i=r.length;for(let s=0;s<i;++s){let o=r[s];if(o===Ae.ARRAY_TYPE&&Array.isArray(n)||o===Ae.OBJECT_TYPE&&(0,uc.isPlainObject)(n)||(0,hn.combineCheck)(o)(n))return!1}return!0}):t=e.filter(n=>!(0,hn.combineCheck)(r)(n)),!(t.length>0)}return!1}Ce.checkArray=Ps;function Os(e,r="ts"){let t=Rs[r];if(!t)throw new Error(`Syntax not supported! ${Object.keys(Rs)}`);if(e.indexOf(t)>-1&&e.indexOf(Ae.ARRAY_TYPE_RGT)>-1){let n=e.replace(t,"").replace(Ae.ARRAY_TYPE_RGT,"");return n.indexOf(Ae.OR_SEPERATOR)?n.split(Ae.OR_SEPERATOR):[n]}return!1}function cc(e){return Os(e)?!1:Os(e,"jsdoc")}Ce.isArrayLike=cc;function lc(e,r){let{arg:t}=e;return r.length>1?!t.filter(n=>!(r.length>r.filter(i=>!(0,hn.combineCheck)(i)(n)).length)).length:r.length>r.filter(n=>!Ps(t,n)).length}Ce.arrayTypeHandler=lc});var pn=m(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.isEmptyObject=Re.objectTypeHandler=Re.checkObject=void 0;var ws=he(),fc=Et(),dn=Ut();function Ts(e,r){if((0,ws.isPlainObject)(e)){if(!r)return!0;if(typeof r=="string")return r in e;if((0,dn.checkArray)(r))return typeof r[0]=="string"?hc(e,r):dc(e,r)}return!1}Re.checkObject=Ts;function hc(e,r){return!r.filter(t=>!(t in e)).length}function dc(e,r){return!r.filter(t=>{let n=e[t.name];return!(t.type.length>t.type.filter(i=>{let s;return n!==void 0?(s=(0,dn.isArrayLike)(i))!==!1?!(0,dn.arrayTypeHandler)({arg:n},s):!(0,fc.combineCheck)(i)(n):!0}).length)}).length}var pc=function(e){let{arg:r,param:t}=e,n=[r];return Array.isArray(t.keys)&&t.keys.length&&n.push(t.keys),Reflect.apply(Ts,null,n)};Re.objectTypeHandler=pc;var _c=function(e){return(0,ws.isPlainObject)(e)?!Object.keys(e).length:!1};Re.isEmptyObject=_c});var pe=m((id,Gt)=>{var Ss,Fs,js,ks,Is,Ys,Ms,qs,Ls,Kt,_n,Ns,Ds,Je,xs,Vs,Us,Ks,Gs,Bs,$s,Js,Hs;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Gt=="object"&&typeof Gt.exports=="object"?e(t(r,t(Gt.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};Ss=function(t,n){r(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},Fs=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},js=function(t,n){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]]);return i},ks=function(t,n,i,s){var o=arguments.length,a=o<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,i):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,i,s);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(a=(o<3?u(a):o>3?u(n,i,a):u(n,i))||a);return o>3&&a&&Object.defineProperty(n,i,a),a},Is=function(t,n){return function(i,s){n(i,s,t)}},Ys=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},Ms=function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(u){u(a)})}return new(i||(i=Promise))(function(a,u){function f(h){try{c(s.next(h))}catch(_){u(_)}}function l(h){try{c(s.throw(h))}catch(_){u(_)}}function c(h){h.done?a(h.value):o(h.value).then(f,l)}c((s=s.apply(t,n||[])).next())})},qs=function(t,n){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(c){return function(h){return l([c,h])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(t,i)}catch(h){c=[6,h],o=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Hs=function(t,n,i,s){s===void 0&&(s=i),t[s]=n[i]},Ls=function(t,n){for(var i in t)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=t[i])},Kt=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},_n=function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),o,a=[],u;try{for(;(n===void 0||n-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return a},Ns=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(_n(arguments[n]));return t},Ds=function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var s=Array(t),o=0,n=0;n<i;n++)for(var a=arguments[n],u=0,f=a.length;u<f;u++,o++)s[o]=a[u];return s},Je=function(t){return this instanceof Je?(this.v=t,this):new Je(t)},xs=function(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,n||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(d){s[d]&&(o[d]=function(y){return new Promise(function(g,b){a.push([d,y,g,b])>1||f(d,y)})})}function f(d,y){try{l(s[d](y))}catch(g){_(a[0][3],g)}}function l(d){d.value instanceof Je?Promise.resolve(d.value.v).then(c,h):_(a[0][2],d)}function c(d){f("next",d)}function h(d){f("throw",d)}function _(d,y){d(y),a.shift(),a.length&&f(a[0][0],a[0][1])}},Vs=function(t){var n,i;return n={},s("next"),s("throw",function(o){throw o}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(o,a){n[o]=t[o]?function(u){return(i=!i)?{value:Je(t[o](u)),done:o==="return"}:a?a(u):u}:a}},Us=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof Kt=="function"?Kt(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(u){return new Promise(function(f,l){u=t[a](u),o(f,l,u.done,u.value)})}}function o(a,u,f,l){Promise.resolve(l).then(function(c){a({value:c,done:f})},u)}},Ks=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t},Gs=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n.default=t,n},Bs=function(t){return t&&t.__esModule?t:{default:t}},$s=function(t,n){if(!n.has(t))throw new TypeError("attempted to get private field on non-instance");return n.get(t)},Js=function(t,n,i){if(!n.has(t))throw new TypeError("attempted to set private field on non-instance");return n.set(t,i),i},e("__extends",Ss),e("__assign",Fs),e("__rest",js),e("__decorate",ks),e("__param",Is),e("__metadata",Ys),e("__awaiter",Ms),e("__generator",qs),e("__exportStar",Ls),e("__createBinding",Hs),e("__values",Kt),e("__read",_n),e("__spread",Ns),e("__spreadArrays",Ds),e("__await",Je),e("__asyncGenerator",xs),e("__asyncDelegator",Vs),e("__asyncValues",Us),e("__makeTemplateObject",Ks),e("__importStar",Gs),e("__importDefault",Bs),e("__classPrivateFieldGet",$s),e("__classPrivateFieldSet",Js)})});var eo=m(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.checkUnionSync=Oe.checkUnion=Oe.generateReversePromisesFn=void 0;var Ws=pe(),mc=sn(),zs=Et(),Xs=Ut(),Zs=pn(),Bt=de();function mn(e,r){return e||r}function Qs(e,r,t){return r.map((n,i)=>{let s=[e];switch(t&&t[i]&&s.push(t[i]),n){case Bt.ARRAY_TYPE:return()=>mn(Reflect.apply(Xs.checkArray,null,s),n);case Bt.OBJECT_TYPE:return()=>mn(Reflect.apply(Zs.checkObject,null,s),n);default:return()=>mn((0,zs.combineCheck)(n)(e),n)}}).map(n=>()=>Ws.__awaiter(this,void 0,void 0,function*(){let i=n();return i===!0?Promise.reject(!0):Promise.resolve(i)}))}Oe.generateReversePromisesFn=Qs;function gc(e,r,t){return Ws.__awaiter(this,void 0,void 0,function*(){let n=Qs(e,r,t);return new Promise((i,s)=>{(0,mc.queuePromisesProcess)(n,r[0]).then(o=>{s(o)}).catch(o=>{i(o)})})})}Oe.checkUnion=gc;function yc(e,r){let t=r.length;for(let n=0;n<t;++n){let i=r[n];switch(i){case Bt.ARRAY_TYPE:if((0,Xs.checkArray)(e))return!0;break;case Bt.OBJECT_TYPE:if((0,Zs.checkObject)(e))return!0;break;default:if((0,zs.combineCheck)(i)(e))return!0}}return!1}Oe.checkUnionSync=yc});var gn=m(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.reversePromisifyResult=He.promisify=void 0;var to=pe();function vc(e){return(...r)=>to.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.resolve(t):Promise.reject(t)})}He.promisify=vc;function bc(e){return(...r)=>to.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.reject(t):Promise.resolve(t)})}He.reversePromisifyResult=bc});var At=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.len=void 0;function Ec(e){return typeof e=="string"?e.length:e}$t.len=Ec});var vn=m(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var Ac=At(),Cc="moreThan";function Rc(e,r){return(0,Ac.len)(r)>e}yn.default={name:Cc,main:Rc,params:["num"]}});var En=m(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var Oc=At(),Pc="lessThan";function wc(e,r){return(0,Oc.len)(r)<e}bn.default={name:Pc,main:wc,params:["num"]}});var no=m(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var ro=pe(),Tc=ro.__importDefault(vn()),Sc=ro.__importDefault(En()),Fc="between";function jc(e,r,t){return Sc.default.main(e,t)&&Tc.default.main(r,t)}An.default={main:jc,name:Fc,params:["max","min"]}});var io=m(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var kc="email";function Ic(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}Cn.default={main:Ic,name:kc}});var so=m(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.name=void 0;var Yc=$e();We.name="float";function Mc(e){return(0,Yc.checkFloat)(e)}We.default={name:We.name,main:Mc}});var oo=m(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.name=void 0;var qc=$e();ze.name="int";function Lc(e){return(0,qc.checkInteger)(e)}ze.default={name:ze.name,main:Lc}});var On=m(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Nc=At(),Dc="lessThanEqual";function xc(e,r){return(0,Nc.len)(r)<=e}Rn.default={name:Dc,main:xc,params:["num"]}});var wn=m(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Vc=At(),Uc="moreThanEqual";function Kc(e,r){return(0,Vc.len)(r)>=e}Pn.default={name:Uc,main:Kc,params:["num"]}});var ao=m(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var Gc=$e(),Bc="unit";function $c(e){return(0,Gc.checkUnsigned)(e)}Tn.default={name:Bc,main:$c}});var co=m(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var uo=pe(),Jc=uo.__importDefault(wn()),Hc=uo.__importDefault(On()),Wc="main";function zc(e,r,t){return Hc.default.main(e,t)&&Jc.default.main(r,t)}Sn.default={name:Wc,main:zc,params:["max","min"]}});var Ht=m(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.plugins=void 0;var oe=pe(),Xc=oe.__importDefault(no()),Zc=oe.__importDefault(io()),Qc=oe.__importDefault(so()),el=oe.__importDefault(oo()),tl=oe.__importDefault(On()),rl=oe.__importDefault(En()),nl=oe.__importDefault(wn()),il=oe.__importDefault(vn()),sl=oe.__importDefault(ao()),ol=oe.__importDefault(co());Jt.plugins=[Xc.default,Zc.default,Qc.default,el.default,tl.default,rl.default,nl.default,il.default,sl.default,ol.default]});var jn=m(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getPlugin=Xe.curryPlugin=void 0;var lo=pe(),al=bt(),Fn=lo.__importDefault(yt()),ul=de(),cl=Ht();function ll(e,r){let{plugin:t}=e;if(t){let n=r[ul.PARAMS_KEY];if(n){if(!fl(e,n))throw new Fn.default(`Expected params: ${n.join(",")} not found!`);let i=n.map(s=>e[s]);return Reflect.apply((0,al.curry)(r.main),null,i)}else throw new Fn.default(`This plugin ${r.name} can not be curry`)}throw new Fn.default("Unable to find plugin in config")}Xe.curryPlugin=ll;function fl(e,r){return r.filter(t=>e[t]).length===r.length}function hl(e){let r=cl.plugins[e];if(r)return r=r==="_"?e:r,Promise.resolve().then(()=>lo.__importStar(R("./"+[r,"js"].join("."))));throw new Error(`${e} is not found`)}Xe.getPlugin=hl});var ho=m(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getRegex=Ze.isRegExp=void 0;var dl=bt();function fo(e){return e instanceof RegExp}Ze.isRegExp=fo;function pl(e){switch(!0){case fo(e):return e;case(0,dl.isString)(e):return new RegExp(e);default:return!1}}Ze.getRegex=pl});var _o=m((Ed,po)=>{var Qe=1e3,et=Qe*60,tt=et*60,Me=tt*24,_l=Me*7,ml=Me*365.25;po.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return gl(e);if(t==="number"&&isFinite(e))return r.long?vl(e):yl(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function gl(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*ml;case"weeks":case"week":case"w":return t*_l;case"days":case"day":case"d":return t*Me;case"hours":case"hour":case"hrs":case"hr":case"h":return t*tt;case"minutes":case"minute":case"mins":case"min":case"m":return t*et;case"seconds":case"second":case"secs":case"sec":case"s":return t*Qe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function yl(e){var r=Math.abs(e);return r>=Me?Math.round(e/Me)+"d":r>=tt?Math.round(e/tt)+"h":r>=et?Math.round(e/et)+"m":r>=Qe?Math.round(e/Qe)+"s":e+"ms"}function vl(e){var r=Math.abs(e);return r>=Me?Wt(e,r,Me,"day"):r>=tt?Wt(e,r,tt,"hour"):r>=et?Wt(e,r,et,"minute"):r>=Qe?Wt(e,r,Qe,"second"):e+" ms"}function Wt(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var kn=m((Ad,mo)=>{function bl(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=_o(),t.destroy=f,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let c=0;for(let h=0;h<l.length;h++)c=(c<<5)-c+l.charCodeAt(h),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=r;function t(l){let c,h=null,_,d;function y(...g){if(!y.enabled)return;let b=y,w=Number(new Date),$=w-(c||w);b.diff=$,b.prev=c,b.curr=w,c=w,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,H)=>{if(P==="%%")return"%";E++;let k=t.formatters[H];if(typeof k=="function"){let J=g[E];P=k.call(b,J),g.splice(E,1),E--}return P}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(_!==t.namespaces&&(_=t.namespaces,d=t.enabled(l)),d),set:g=>{h=g}}),typeof t.init=="function"&&t.init(y),y}function n(l,c){let h=t(this.namespace+(typeof c>"u"?":":c)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let c,h=(typeof l=="string"?l:"").split(/[\s,]+/),_=h.length;for(c=0;c<_;c++)!h[c]||(l=h[c].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...t.names.map(a),...t.skips.map(a).map(c=>"-"+c)].join(",");return t.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let c,h;for(c=0,h=t.skips.length;c<h;c++)if(t.skips[c].test(l))return!1;for(c=0,h=t.names.length;c<h;c++)if(t.names[c].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}mo.exports=bl});var go=m((X,zt)=>{X.formatArgs=Al;X.save=Cl;X.load=Rl;X.useColors=El;X.storage=Ol();X.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();X.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function El(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Al(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+zt.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}X.log=console.debug||console.log||(()=>{});function Cl(e){try{e?X.storage.setItem("debug",e):X.storage.removeItem("debug")}catch{}}function Rl(){let e;try{e=X.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Ol(){try{return localStorage}catch{}}zt.exports=kn()(X);var{formatters:Pl}=zt.exports;Pl.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var vo=m((Cd,yo)=>{"use strict";yo.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Ao=m((Rd,Eo)=>{"use strict";var wl=R("os"),bo=R("tty"),te=vo(),{env:N}=process,Pe;te("no-color")||te("no-colors")||te("color=false")||te("color=never")?Pe=0:(te("color")||te("colors")||te("color=true")||te("color=always"))&&(Pe=1);"FORCE_COLOR"in N&&(N.FORCE_COLOR==="true"?Pe=1:N.FORCE_COLOR==="false"?Pe=0:Pe=N.FORCE_COLOR.length===0?1:Math.min(parseInt(N.FORCE_COLOR,10),3));function In(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Yn(e,r){if(Pe===0)return 0;if(te("color=16m")||te("color=full")||te("color=truecolor"))return 3;if(te("color=256"))return 2;if(e&&!r&&Pe===void 0)return 0;let t=Pe||0;if(N.TERM==="dumb")return t;if(process.platform==="win32"){let n=wl.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in N)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in N)||N.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in N)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(N.TEAMCITY_VERSION)?1:0;if(N.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in N){let n=parseInt((N.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(N.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(N.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(N.TERM)||"COLORTERM"in N?1:t}function Tl(e){let r=Yn(e,e&&e.isTTY);return In(r)}Eo.exports={supportsColor:Tl,stdout:In(Yn(!0,bo.isatty(1))),stderr:In(Yn(!0,bo.isatty(2)))}});var Ro=m((V,Zt)=>{var Sl=R("tty"),Xt=R("util");V.init=ql;V.log=Il;V.formatArgs=jl;V.save=Yl;V.load=Ml;V.useColors=Fl;V.destroy=Xt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");V.colors=[6,2,3,4,5,1];try{let e=Ao();e&&(e.stderr||e).level>=2&&(V.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}V.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function Fl(){return"colors"in V.inspectOpts?Boolean(V.inspectOpts.colors):Sl.isatty(process.stderr.fd)}function jl(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Zt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=kl()+r+" "+e[0]}function kl(){return V.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Il(...e){return process.stderr.write(Xt.format(...e)+`
`)}function Yl(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Ml(){return process.env.DEBUG}function ql(e){e.inspectOpts={};let r=Object.keys(V.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=V.inspectOpts[r[t]]}Zt.exports=kn()(V);var{formatters:Co}=Zt.exports;Co.o=function(e){return this.inspectOpts.colors=this.useColors,Xt.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};Co.O=function(e){return this.inspectOpts.colors=this.useColors,Xt.inspect(e,this.inspectOpts)}});var qn=m((Od,Mn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Mn.exports=go():Mn.exports=Ro()});var Ln=m(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.patternPluginFanctory=I.isResultPackage=I.successThen=I.constructRuleCb=I.extractFnArgs=I.paramMatches=I.searchParamsKey=I.pluginHasFunc=I.checkPluginArg=void 0;var Ct=pe(),Ll=Ct.__importDefault(qt()),Nl=Ct.__importDefault(yt()),ae=de(),Dl=vt(),xl=he(),Vl=rn(),Ul=ho(),Kl=Ct.__importDefault(qn()),Qt=(0,Kl.default)("jsonql:validator-core:common");function Oo(e){return!(e.filter(r=>ae.KEYWORDS.includes(r)).length>0)}I.checkPluginArg=Oo;function Gl(e){return e[ae.PLUGIN_FN_KEY]&&(0,Vl.isFunction)(e[ae.PLUGIN_FN_KEY])}I.pluginHasFunc=Gl;function Po(e){let r=wo(e.main.toString());return r.pop(),r}function Bl(e){let r=Po(e);if(r.length===0)return e;if(!Oo(r))throw new Nl.default(ae.RESERVED_WORD_ERR);return e[ae.PARAMS_KEY]=r,e}I.searchParamsKey=Bl;function $l(e){let r=Po(e),t=r.length;if(t===0&&!e[ae.PARAMS_KEY])return!0;let n=e.params!==void 0&&Array.isArray(e.params)?e.params:!1;return n===!1?!1:t>0&&t===n.length&&!r.filter((i,s)=>i!==n[s]).length}I.paramMatches=$l;function wo(e){return e.split("(")[1].split(")")[0].split(",").map(r=>r.trim()).filter(r=>r!=="")}I.extractFnArgs=wo;function Jl(e,r,t){return(n,i,s)=>Ct.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(r,null,[n]).then(To(e,n,i,s)).catch(o=>(Qt("failed",e,n,o,s),Promise.reject(new Ll.default(t,s))))})}I.constructRuleCb=Jl;function To(e,r,t,n){return i=>{let s=n[0];Qt("passed",e,r,i,n),Qt("lastResult",t);let o={[ae.IDX_KEY]:s,[ae.VALUE_KEY]:r};if(t===void 0)return{[e]:o};if(e in t){let a=t[e];return So(a)?a.includes(o)||t[e].push(o):a[ae.IDX_KEY]!==s&&(t[e]=(0,Dl.toArray)(t[e]).concat([o])),t}return(0,xl.extend)(t,{[e]:o})}}I.successThen=To;function So(e,r=ae.IDX_KEY){try{if(Array.isArray(e))return!!e.filter(t=>r in t).length}catch(t){Qt("isResultPackage",t)}return!1}I.isResultPackage=So;function Hl(e){let r=(0,Ul.getRegex)(e);return t=>Ct.__awaiter(this,void 0,void 0,function*(){return r.test(t)?Promise.resolve(!0):Promise.reject(!1)})}I.patternPluginFanctory=Hl});var tr=m(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.ValidatorPlugins=void 0;var jo=pe(),Rt=jo.__importDefault(yt()),L=de(),Wl=jn(),Fo=gn(),rt=Ln(),zl=Ht(),Xl=jo.__importDefault(qn()),qe=(0,Xl.default)("jsonql:validator-core:validator-plugin"),Nn=class{constructor(r){this.$version=r,this._plugins=new Map,this._internalPluginNames=[],zl.plugins.forEach(t=>{let n=t[L.NAME_KEY];this._internalPluginNames.push(n),this._registerPlugin(n,t,!0)})}lookupPlugin(r,t){let n=r[L.PLUGIN_KEY];if(n&&this._plugins.has(n)){let i=this._plugins.get(n);if(i[L.PLUGIN_FN_KEY]&&!i[L.PARAMS_KEY]&&(i[L.VALIDATE_ASYNC_KEY]=(0,Fo.promisify)(i[L.PLUGIN_FN_KEY])),i&&i[L.VALIDATE_ASYNC_KEY]&&!i[L.PARAMS_KEY])return(0,rt.constructRuleCb)(t,i[L.VALIDATE_ASYNC_KEY],n);if(i&&i[L.PARAMS_KEY]){qe("pluginConfig --->",i),qe("input----------->",r);let s=r;return(0,rt.constructRuleCb)(t,(0,Fo.promisify)((0,Wl.curryPlugin)(s,i)),n)}}throw qe("lookupPlugin","unable to find",n),new Rt.default(`Unable to find plugin: ${n}`)}registerPlugin(r,t){this._registerPlugin(r,t)}_registerExternalPlugin(r,t){this._registerPlugin(r,t,!1,!0)}export(r=!0){let t=[];return this._plugins.forEach((n,i)=>{!this.isBuiltIn(i)&&n.external===r&&t.push(n)}),t}isBuiltIn(r){return this._internalPluginNames.includes(r)}_registerPlugin(r,t,n=!1,i=!1){if(!n){if(this._plugins.has(r))throw new Rt.default(`plugin ${r} already existed!`);if(!(0,rt.pluginHasFunc)(t))throw qe("registerPlugin",L.MAIN_NOT_FOUND_ERR),new Rt.default(L.MAIN_NOT_FOUND_ERR);if(t[L.PARAMS_KEY]===void 0)t=(0,rt.searchParamsKey)(t),qe("auto generate params for plugin",t);else if(t[L.PARAMS_KEY]!==void 0){if(!(0,rt.checkPluginArg)(t[L.PARAMS_KEY]))throw qe("registerPlugin",L.RESERVED_WORD_ERR),new Rt.default(L.RESERVED_WORD_ERR);if(!(0,rt.paramMatches)(t))throw qe("registerPlugin",L.ARG_NOT_MATCH_ERR),new Rt.default(L.ARG_NOT_MATCH_ERR)}}t.name=r,t.external=i,this._plugins.set(r,t)}};er.ValidatorPlugins=Nn});var Un=m(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.VALUE_KEY=p.IDX_KEY=p.PARAMS_KEY=p.NAME_KEY=p.RULES_KEY=p.PATTERN_KEY=p.PLUGIN_FN_KEY=p.PLUGIN_KEY=p.VALIDATE_ASYNC_KEY=p.VALIDATE_KEY=p.KEYWORDS=p.ARRAY_TS_TYPE_LFT=p.ARRAY_TYPE_RGT=p.ARRAY_TYPE_LFT=p.OR_SEPERATOR=p.OBJECT_TYPE=p.ARRAY_TYPE=p.NUMBER_TYPE=p.STRING_TYPE=p.BOOLEAN_TYPE=p.ValidatorPlugins=p.patternPluginFanctory=p.isResultPackage=p.successThen=p.constructRuleCb=p.pluginHasFunc=p.checkPluginArg=p.curryPlugin=p.plugins=p.reversePromisifyResult=p.promisify=p.generateReversePromisesFn=p.checkUnionSync=p.checkUnion=p.combineCheck=p.isEmptyObject=p.objectTypeHandler=p.checkObject=p.arrayTypeHandler=p.isArrayLike=p.checkArray=p.checkAny=p.checkUnsigned=p.checkFloat=p.checkInteger=p.checkNumber=p.checkBoolean=p.checkString=void 0;var Zl=on();Object.defineProperty(p,"checkString",{enumerable:!0,get:function(){return Zl.checkString}});var Ql=an();Object.defineProperty(p,"checkBoolean",{enumerable:!0,get:function(){return Ql.checkBoolean}});var rr=$e();Object.defineProperty(p,"checkNumber",{enumerable:!0,get:function(){return rr.checkNumber}});Object.defineProperty(p,"checkInteger",{enumerable:!0,get:function(){return rr.checkInteger}});Object.defineProperty(p,"checkFloat",{enumerable:!0,get:function(){return rr.checkFloat}});Object.defineProperty(p,"checkUnsigned",{enumerable:!0,get:function(){return rr.checkUnsigned}});var ef=ln();Object.defineProperty(p,"checkAny",{enumerable:!0,get:function(){return ef.checkAny}});var Dn=Ut();Object.defineProperty(p,"checkArray",{enumerable:!0,get:function(){return Dn.checkArray}});Object.defineProperty(p,"isArrayLike",{enumerable:!0,get:function(){return Dn.isArrayLike}});Object.defineProperty(p,"arrayTypeHandler",{enumerable:!0,get:function(){return Dn.arrayTypeHandler}});var xn=pn();Object.defineProperty(p,"checkObject",{enumerable:!0,get:function(){return xn.checkObject}});Object.defineProperty(p,"objectTypeHandler",{enumerable:!0,get:function(){return xn.objectTypeHandler}});Object.defineProperty(p,"isEmptyObject",{enumerable:!0,get:function(){return xn.isEmptyObject}});var tf=Et();Object.defineProperty(p,"combineCheck",{enumerable:!0,get:function(){return tf.combineCheck}});var Vn=eo();Object.defineProperty(p,"checkUnion",{enumerable:!0,get:function(){return Vn.checkUnion}});Object.defineProperty(p,"checkUnionSync",{enumerable:!0,get:function(){return Vn.checkUnionSync}});Object.defineProperty(p,"generateReversePromisesFn",{enumerable:!0,get:function(){return Vn.generateReversePromisesFn}});var ko=gn();Object.defineProperty(p,"promisify",{enumerable:!0,get:function(){return ko.promisify}});Object.defineProperty(p,"reversePromisifyResult",{enumerable:!0,get:function(){return ko.reversePromisifyResult}});var rf=Ht();Object.defineProperty(p,"plugins",{enumerable:!0,get:function(){return rf.plugins}});var nf=jn();Object.defineProperty(p,"curryPlugin",{enumerable:!0,get:function(){return nf.curryPlugin}});var nt=Ln();Object.defineProperty(p,"checkPluginArg",{enumerable:!0,get:function(){return nt.checkPluginArg}});Object.defineProperty(p,"pluginHasFunc",{enumerable:!0,get:function(){return nt.pluginHasFunc}});Object.defineProperty(p,"constructRuleCb",{enumerable:!0,get:function(){return nt.constructRuleCb}});Object.defineProperty(p,"successThen",{enumerable:!0,get:function(){return nt.successThen}});Object.defineProperty(p,"isResultPackage",{enumerable:!0,get:function(){return nt.isResultPackage}});Object.defineProperty(p,"patternPluginFanctory",{enumerable:!0,get:function(){return nt.patternPluginFanctory}});var sf=tr();Object.defineProperty(p,"ValidatorPlugins",{enumerable:!0,get:function(){return sf.ValidatorPlugins}});var Y=de();Object.defineProperty(p,"BOOLEAN_TYPE",{enumerable:!0,get:function(){return Y.BOOLEAN_TYPE}});Object.defineProperty(p,"STRING_TYPE",{enumerable:!0,get:function(){return Y.STRING_TYPE}});Object.defineProperty(p,"NUMBER_TYPE",{enumerable:!0,get:function(){return Y.NUMBER_TYPE}});Object.defineProperty(p,"ARRAY_TYPE",{enumerable:!0,get:function(){return Y.ARRAY_TYPE}});Object.defineProperty(p,"OBJECT_TYPE",{enumerable:!0,get:function(){return Y.OBJECT_TYPE}});Object.defineProperty(p,"OR_SEPERATOR",{enumerable:!0,get:function(){return Y.OR_SEPERATOR}});Object.defineProperty(p,"ARRAY_TYPE_LFT",{enumerable:!0,get:function(){return Y.ARRAY_TYPE_LFT}});Object.defineProperty(p,"ARRAY_TYPE_RGT",{enumerable:!0,get:function(){return Y.ARRAY_TYPE_RGT}});Object.defineProperty(p,"ARRAY_TS_TYPE_LFT",{enumerable:!0,get:function(){return Y.ARRAY_TS_TYPE_LFT}});Object.defineProperty(p,"KEYWORDS",{enumerable:!0,get:function(){return Y.KEYWORDS}});Object.defineProperty(p,"VALIDATE_KEY",{enumerable:!0,get:function(){return Y.VALIDATE_KEY}});Object.defineProperty(p,"VALIDATE_ASYNC_KEY",{enumerable:!0,get:function(){return Y.VALIDATE_ASYNC_KEY}});Object.defineProperty(p,"PLUGIN_KEY",{enumerable:!0,get:function(){return Y.PLUGIN_KEY}});Object.defineProperty(p,"PLUGIN_FN_KEY",{enumerable:!0,get:function(){return Y.PLUGIN_FN_KEY}});Object.defineProperty(p,"PATTERN_KEY",{enumerable:!0,get:function(){return Y.PATTERN_KEY}});Object.defineProperty(p,"RULES_KEY",{enumerable:!0,get:function(){return Y.RULES_KEY}});Object.defineProperty(p,"NAME_KEY",{enumerable:!0,get:function(){return Y.NAME_KEY}});Object.defineProperty(p,"PARAMS_KEY",{enumerable:!0,get:function(){return Y.PARAMS_KEY}});Object.defineProperty(p,"IDX_KEY",{enumerable:!0,get:function(){return Y.IDX_KEY}});Object.defineProperty(p,"VALUE_KEY",{enumerable:!0,get:function(){return Y.VALUE_KEY}})});var Ot=m(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.RETURN_AS_RAW=C.RETURN_AS_ARR=C.RETURN_AS_OBJ=C.TS_TYPE_NAME=C.TS_TYPE_REF=C.TS_TYPE_LIT=C.DEFAULT_VALUE=C.TS_ARRAY_TYPE=C.TS_UNION_TYPE=C.SPREAD_ARG_TYPE=C.IS_SPREAD_VALUES_KEY=C.SPREAD_PREFIX=C.EXCEPTION_CASE_ERR=C.PARAMS_NOT_ARRAY_ERR=C.ARGS_NOT_ARRAY_ERR=void 0;C.ARGS_NOT_ARRAY_ERR="Input argument is not an array!";C.PARAMS_NOT_ARRAY_ERR="Parameter is not an array";C.EXCEPTION_CASE_ERR="Exception happened don't know how to handle it";C.SPREAD_PREFIX="$_spread_arg_";C.IS_SPREAD_VALUES_KEY="$$is_spread_values";C.SPREAD_ARG_TYPE="RestElement";C.TS_UNION_TYPE="TsUnionType";C.TS_ARRAY_TYPE="TsArrayType";C.DEFAULT_VALUE="defaultvalue";C.TS_TYPE_LIT="TsTypeLiteral";C.TS_TYPE_REF="TsTypeReference";C.TS_TYPE_NAME="tstype";C.RETURN_AS_OBJ="object";C.RETURN_AS_ARR="array";C.RETURN_AS_RAW="raw"});var Yo=m((Fd,Io)=>{var it=1e3,st=it*60,ot=st*60,Le=ot*24,of=Le*7,af=Le*365.25;Io.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return uf(e);if(t==="number"&&isFinite(e))return r.long?lf(e):cf(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function uf(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*af;case"weeks":case"week":case"w":return t*of;case"days":case"day":case"d":return t*Le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ot;case"minutes":case"minute":case"mins":case"min":case"m":return t*st;case"seconds":case"second":case"secs":case"sec":case"s":return t*it;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function cf(e){var r=Math.abs(e);return r>=Le?Math.round(e/Le)+"d":r>=ot?Math.round(e/ot)+"h":r>=st?Math.round(e/st)+"m":r>=it?Math.round(e/it)+"s":e+"ms"}function lf(e){var r=Math.abs(e);return r>=Le?nr(e,r,Le,"day"):r>=ot?nr(e,r,ot,"hour"):r>=st?nr(e,r,st,"minute"):r>=it?nr(e,r,it,"second"):e+" ms"}function nr(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var Kn=m((jd,Mo)=>{function ff(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Yo(),t.destroy=f,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let c=0;for(let h=0;h<l.length;h++)c=(c<<5)-c+l.charCodeAt(h),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=r;function t(l){let c,h=null,_,d;function y(...g){if(!y.enabled)return;let b=y,w=Number(new Date),$=w-(c||w);b.diff=$,b.prev=c,b.curr=w,c=w,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,H)=>{if(P==="%%")return"%";E++;let k=t.formatters[H];if(typeof k=="function"){let J=g[E];P=k.call(b,J),g.splice(E,1),E--}return P}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(_!==t.namespaces&&(_=t.namespaces,d=t.enabled(l)),d),set:g=>{h=g}}),typeof t.init=="function"&&t.init(y),y}function n(l,c){let h=t(this.namespace+(typeof c>"u"?":":c)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let c,h=(typeof l=="string"?l:"").split(/[\s,]+/),_=h.length;for(c=0;c<_;c++)!h[c]||(l=h[c].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...t.names.map(a),...t.skips.map(a).map(c=>"-"+c)].join(",");return t.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let c,h;for(c=0,h=t.skips.length;c<h;c++)if(t.skips[c].test(l))return!1;for(c=0,h=t.names.length;c<h;c++)if(t.names[c].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Mo.exports=ff});var qo=m((Z,ir)=>{Z.formatArgs=df;Z.save=pf;Z.load=_f;Z.useColors=hf;Z.storage=mf();Z.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function df(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ir.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Z.log=console.debug||console.log||(()=>{});function pf(e){try{e?Z.storage.setItem("debug",e):Z.storage.removeItem("debug")}catch{}}function _f(){let e;try{e=Z.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function mf(){try{return localStorage}catch{}}ir.exports=Kn()(Z);var{formatters:gf}=ir.exports;gf.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var No=m((kd,Lo)=>{"use strict";Lo.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Vo=m((Id,xo)=>{"use strict";var yf=R("os"),Do=R("tty"),re=No(),{env:D}=process,we;re("no-color")||re("no-colors")||re("color=false")||re("color=never")?we=0:(re("color")||re("colors")||re("color=true")||re("color=always"))&&(we=1);"FORCE_COLOR"in D&&(D.FORCE_COLOR==="true"?we=1:D.FORCE_COLOR==="false"?we=0:we=D.FORCE_COLOR.length===0?1:Math.min(parseInt(D.FORCE_COLOR,10),3));function Gn(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Bn(e,r){if(we===0)return 0;if(re("color=16m")||re("color=full")||re("color=truecolor"))return 3;if(re("color=256"))return 2;if(e&&!r&&we===void 0)return 0;let t=we||0;if(D.TERM==="dumb")return t;if(process.platform==="win32"){let n=yf.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in D)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in D)||D.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in D)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(D.TEAMCITY_VERSION)?1:0;if(D.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in D){let n=parseInt((D.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(D.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(D.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(D.TERM)||"COLORTERM"in D?1:t}function vf(e){let r=Bn(e,e&&e.isTTY);return Gn(r)}xo.exports={supportsColor:vf,stdout:Gn(Bn(!0,Do.isatty(1))),stderr:Gn(Bn(!0,Do.isatty(2)))}});var Ko=m((U,or)=>{var bf=R("tty"),sr=R("util");U.init=wf;U.log=Rf;U.formatArgs=Af;U.save=Of;U.load=Pf;U.useColors=Ef;U.destroy=sr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");U.colors=[6,2,3,4,5,1];try{let e=Vo();e&&(e.stderr||e).level>=2&&(U.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}U.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function Ef(){return"colors"in U.inspectOpts?Boolean(U.inspectOpts.colors):bf.isatty(process.stderr.fd)}function Af(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+or.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Cf()+r+" "+e[0]}function Cf(){return U.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Rf(...e){return process.stderr.write(sr.format(...e)+`
`)}function Of(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Pf(){return process.env.DEBUG}function wf(e){e.inspectOpts={};let r=Object.keys(U.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=U.inspectOpts[r[t]]}or.exports=Kn()(U);var{formatters:Uo}=or.exports;Uo.o=function(e){return this.inspectOpts.colors=this.useColors,sr.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};Uo.O=function(e){return this.inspectOpts.colors=this.useColors,sr.inspect(e,this.inspectOpts)}});var ar=m((Yd,$n)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?$n.exports=qo():$n.exports=Ko()});var Jn=m(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.getKey=M.checkDuplicateRules=M.getOptionalValue=M.unwrapPreparedValidateResult=M.processValidateResultsAsArrOfObj=M.processValidateResults=M.processValidateResultsAsObj=M.processValidateResultsAsArr=M.createAutomaticRules=void 0;var ue=Mt(),T=Un(),K=Ot(),Tf=tn(),Go=he(),Sf=ue.__importDefault(ar()),at=(0,Sf.default)("jsonql:validator:class:fn");function Ff(e){return e.map(r=>{let{name:t}=r,n=If(r),i=r[K.TS_TYPE_NAME]||r.type;return at("createAutomaticRules",t,i),r[T.RULES_KEY]=[(0,T.constructRuleCb)(t,n,i)],r})}M.createAutomaticRules=Ff;function jf(e,r){return ue.__awaiter(this,void 0,void 0,function*(){return Bo(e,r).then(Jo)})}M.processValidateResultsAsArr=jf;function kf(e,r){return $o(e,r).reduce((t,n)=>(0,Go.assign)(t,n),{})}M.processValidateResultsAsObj=kf;function Bo(e,r){return ue.__awaiter(this,void 0,void 0,function*(){return e.map(t=>T.VALUE_KEY in r[t]?r[t][T.VALUE_KEY]:(0,T.isResultPackage)(r[t])?{[K.IS_SPREAD_VALUES_KEY]:r[t].map(n=>n[T.VALUE_KEY])}:(at(`Return result when we couldn't find way to destruct: ${t}`,r[t]),r[t]))})}M.processValidateResults=Bo;function $o(e,r){return e.map(t=>{switch(!0){case T.VALUE_KEY in r[t]:return{[t]:r[t][T.VALUE_KEY]};case(0,T.isResultPackage)(r[t]):return{[t]:r[t].map(n=>n[T.VALUE_KEY])};default:return{[t]:r[t]}}})}M.processValidateResultsAsArrOfObj=$o;function Jo(e){return ue.__awaiter(this,void 0,void 0,function*(){at("unwrapPreparedValidateResult",e);let r=e.length;if(r===1&&(0,Go.objectHasKey)(e[0],K.IS_SPREAD_VALUES_KEY))return e[0][K.IS_SPREAD_VALUES_KEY];if((0,T.isResultPackage)(e,K.IS_SPREAD_VALUES_KEY)){let t=[];for(let n=0;n<r;++n)K.IS_SPREAD_VALUES_KEY in e[n]?t=t.concat(e[n][K.IS_SPREAD_VALUES_KEY]):t.push(e[n]);return t}return e})}M.unwrapPreparedValidateResult=Jo;function If(e){switch(at("getValidateRules ast",e),e[K.TS_TYPE_NAME]){case K.TS_UNION_TYPE:return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.checkUnion)(t,e.type)})};case(K.TS_ARRAY_TYPE||K.SPREAD_ARG_TYPE):return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkArray)(t,e.types)})};case(K.TS_TYPE_REF||K.TS_TYPE_LIT):return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkAny)(t)})};case K.SPREAD_ARG_TYPE:return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.types))(t)})};default:return(0,T.checkString)(e.type)?(at("validation type",e.type),function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.type))(t)})}):(at("getValidateRules",e),function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(Tf.notEmpty)(t,!0)})})}}function Yf(e,r){return r.tstype!==K.SPREAD_ARG_TYPE&&e===void 0?r[K.DEFAULT_VALUE]!==void 0?r[K.DEFAULT_VALUE]:void 0:e}M.getOptionalValue=Yf;function Mf(e){return[T.VALIDATE_KEY,T.VALIDATE_ASYNC_KEY,T.PLUGIN_FN_KEY].filter(r=>e[r]!==void 0)}M.checkDuplicateRules=Mf;function qf(e){let r=Object.keys(e);return r.length?r[0]:void 0}M.getKey=qf});var zo=m(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.ValidatorBase=void 0;var Ne=Mt(),Ho=Ne.__importDefault(qt()),Lf=Ne.__importDefault(yt()),Nf=tn(),Df=vt(),ur=he(),Wo=rn(),xf=sn(),j=Un(),ut=Jn(),cr=Ot(),Vf=Ne.__importDefault(ar()),B=(0,Vf.default)("jsonql:validator:validator-base"),Hn=class{constructor(r,t){this._validatorPluginsInstance=t,this._astWithBaseRules=(0,ut.createAutomaticRules)(r),this._arguments=this._astWithBaseRules.map(n=>n[j.NAME_KEY])}validate(r){let t=this._normalizeArgValues(r);return(0,xf.queuePromisesProcess)(t,void 0)}prepareArgValues(r){return this._normalizeArgValues(r,!1)}get schema(){return this._schema||this._astWithBaseRules}addValidationRules(r){B("addValidationRules",r);let t={};for(let n in r)t[n]=(0,Df.toArray)(r[n]).map(i=>(0,Wo.isFunction)(i)?this._updateInput(i):i);this._createSchema(t)}_updateInput(r){return{[j.VALIDATE_ASYNC_KEY]:(0,Wo.isAsyncFunction)(r)?r:(0,j.promisify)(r)}}_normalizeArgValues(r,t=!0){B("_normalizeArgValues",r);let n=this.schema,i=n.length;if(i===0)return[];if(!(0,j.checkArray)(r))throw B(r),new Ho.default(cr.ARGS_NOT_ARRAY_ERR,r);let s=r.length;switch(!0){case s===i:return t===!1?(0,ur.arrToObj)(r,(o,a)=>({[n[a].name]:o})):r.map((o,a)=>this._prepareForExecution(o,n[a],a));case s<i:return B("Values pass less than params"),t===!1?(0,ur.arrToObj)(n,(o,a)=>{let u=(0,ut.getOptionalValue)(r[a],o);return{[o.name]:u}}):n.map((o,a)=>{let u=(0,ut.getOptionalValue)(r[a],o);return this._prepareForExecution(u,o,a)});case s>i:return B("spread params",s,i),this._processSpreadLikeArg(r,n,t);default:throw new Ho.default(cr.EXCEPTION_CASE_ERR,[s,i])}}_processSpreadLikeArg(r,t,n){let i=t.filter(s=>s.tstype===cr.SPREAD_ARG_TYPE)[0];return n===!1?r.map((s,o)=>t[o]?t[o].name!==i.name?{[t[o].name]:s}:{[i.name]:[s]}:{[i.name]:[s]}).reduce((s,o)=>{if(!(0,ut.getKey)(s))return o;let u=(0,ut.getKey)(o);return s[u]?(s[u]=s[u].concat(o[u]),s):(0,ur.extend)({},s,o)},{}):r.map((s,o)=>{let a=t[o]||(0,ur.extend)({},i,{name:`${cr.SPREAD_PREFIX}${o}`});return B("spread param",s,a.name),this._prepareForExecution(s,a,o)})}_prepareForExecution(r,t,n){let{rules:i,required:s,name:o}=t;return i&&i.length?i.map((a,u)=>r===void 0&&!s?(B("skip the validation",s),f=>Ne.__awaiter(this,void 0,void 0,function*(){return(0,j.successThen)(o,r,f,[n,u])(!0)})):f=>Ne.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(a,null,[r,f,[n,u]]).then(l=>(B("Post rule result",l),l))})):(B("No rules to run"),()=>Ne.__awaiter(this,void 0,void 0,function*(){return!0}))}_createSchema(r){let t=this._astWithBaseRules;(0,Nf.notEmpty)(r,!0)&&(t=this._applyObjectInput(t,r)),B("_createSchema",t),this._schema=t}_applyObjectInput(r,t){return r.map(n=>{var i;let s=n.name;if(t[s]){let o=t[s].map(u=>(u.name=s,u)),a=this._transformInput(o,s);a&&a.length&&(n[j.RULES_KEY]=(i=n[j.RULES_KEY])===null||i===void 0?void 0:i.concat(a))}return n})}_transformInput(r,t){return B("_transformInput",r),r.map((n,i)=>{let s=(0,ut.checkDuplicateRules)(n);if(s.length>1)throw new Error(`You can only set one rule at a time! We found ${s.join(",")}`);let o=n.name||`customPluginName${i}`;switch(!0){case n[j.PLUGIN_KEY]!==void 0:return B("Should got here ----->",n[j.PLUGIN_KEY]),this._lookupPlugin(n,t);case n[j.VALIDATE_KEY]!==void 0:return B(`${j.VALIDATE_KEY} ----->`,n),(0,j.constructRuleCb)(t,(0,j.promisify)(n[j.VALIDATE_KEY]),o);case n[j.VALIDATE_ASYNC_KEY]!==void 0:return B(`${j.VALIDATE_ASYNC_KEY} ---->`,n),(0,j.constructRuleCb)(t,n[j.VALIDATE_ASYNC_KEY],o);default:throw new Lf.default(`unable to find rule for ${t},
            we expect ${j.PLUGIN_KEY}, ${j.VALIDATE_KEY} or ${j.VALIDATE_ASYNC_KEY}`)}})}_lookupPlugin(r,t){try{if(this._validatorPluginsInstance)return B("_lookupPlugin --->",r,t),this._validatorPluginsInstance.lookupPlugin(r,t)}catch(n){B("catch _lookupPlugin error",n)}return(0,j.constructRuleCb)(t,()=>Ne.__awaiter(this,void 0,void 0,function*(){return Promise.reject(!1)}),"NO_PLUGIN_DUMMY_FUNCTION")}};lr.ValidatorBase=Hn});var ea=m(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.Validator=void 0;var hr=Mt(),Uf=zo(),Xo=tr(),Zo=Jn(),fr=Ot(),Kf=hr.__importDefault(ar()),Qo=(0,Kf.default)("jsonql:validator:class:index"),Wn=class extends Uf.ValidatorBase{constructor(r,t){super(r,t&&t instanceof Xo.ValidatorPlugins?t:new Xo.ValidatorPlugins(-1))}validate(r,t=fr.RETURN_AS_ARR){let n=Object.create(null,{validate:{get:()=>super.validate}});return hr.__awaiter(this,void 0,void 0,function*(){return n.validate.call(this,r).then(i=>{switch(t){case fr.RETURN_AS_RAW:return i;case fr.RETURN_AS_ARR:return this._prepareValidateResultForFuncCall(i);case fr.RETURN_AS_OBJ:default:return this._prepareValidateResultAsObject(i)}})})}registerPlugin(r,t){this._validatorPluginsInstance&&this._validatorPluginsInstance.registerPlugin(r,t)}_prepareValidateResultForFuncCall(r){return hr.__awaiter(this,void 0,void 0,function*(){return Qo("validateResult return as array",this._arguments,r),(0,Zo.processValidateResultsAsArr)(this._arguments,r)})}_prepareValidateResultAsObject(r){return hr.__awaiter(this,void 0,void 0,function*(){return Qo("validateResult return as object",this._arguments,r),(0,Zo.processValidateResultsAsObj)(this._arguments,r)})}};dr.Validator=Wn});var ta=m(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.RETURN_AS_RAW=S.RETURN_AS_ARR=S.RETURN_AS_OBJ=S.TS_TYPE_NAME=S.TS_TYPE_REF=S.TS_TYPE_LIT=S.DEFAULT_VALUE=S.TS_ARRAY_TYPE=S.TS_UNION_TYPE=S.SPREAD_ARG_TYPE=S.Validator=void 0;var Gf=ea();Object.defineProperty(S,"Validator",{enumerable:!0,get:function(){return Gf.Validator}});var ce=Ot();Object.defineProperty(S,"SPREAD_ARG_TYPE",{enumerable:!0,get:function(){return ce.SPREAD_ARG_TYPE}});Object.defineProperty(S,"TS_UNION_TYPE",{enumerable:!0,get:function(){return ce.TS_UNION_TYPE}});Object.defineProperty(S,"TS_ARRAY_TYPE",{enumerable:!0,get:function(){return ce.TS_ARRAY_TYPE}});Object.defineProperty(S,"DEFAULT_VALUE",{enumerable:!0,get:function(){return ce.DEFAULT_VALUE}});Object.defineProperty(S,"TS_TYPE_LIT",{enumerable:!0,get:function(){return ce.TS_TYPE_LIT}});Object.defineProperty(S,"TS_TYPE_REF",{enumerable:!0,get:function(){return ce.TS_TYPE_REF}});Object.defineProperty(S,"TS_TYPE_NAME",{enumerable:!0,get:function(){return ce.TS_TYPE_NAME}});Object.defineProperty(S,"RETURN_AS_OBJ",{enumerable:!0,get:function(){return ce.RETURN_AS_OBJ}});Object.defineProperty(S,"RETURN_AS_ARR",{enumerable:!0,get:function(){return ce.RETURN_AS_ARR}});Object.defineProperty(S,"RETURN_AS_RAW",{enumerable:!0,get:function(){return ce.RETURN_AS_RAW}})});var ra=m(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.ExternalPluginLoader=void 0;var Bf=tr(),zn=class extends Bf.ValidatorPlugins{registerExternalPlugin(r,t){this._registerExternalPlugin(r,t)}};pr.ExternalPluginLoader=zn});var na=m(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.cloneDeep=ct.cloneDeepCheap=void 0;var $f=Ye(),Jf=e=>JSON.parse(JSON.stringify(e));ct.cloneDeepCheap=Jf;function Pt(e){function r(u){for(let f in e)Object.prototype.hasOwnProperty.call(e,f)&&(u[f]=Pt(e[f]))}function t(){let u={};return r(u),u}function n(){return e.map(function(u){return Pt(u)})}function i(){let u=new Map;for(let[f,l]of e)u.set(f,Pt(l));return u}function s(){let u=new Set;for(let f of e)u.add(Pt(f));return u}function o(){let u=this,f=e.bind(u);return r(f),f}switch((0,$f.trueTypeOf)(e)){case"object":return t();case"array":return n();case"map":return i();case"set":return s();case"function":return o();default:return e}}ct.cloneDeep=Pt});var sa=m((Ud,ia)=>{var lt=1e3,ft=lt*60,ht=ft*60,De=ht*24,Hf=De*7,Wf=De*365.25;ia.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return zf(e);if(t==="number"&&isFinite(e))return r.long?Zf(e):Xf(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function zf(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Wf;case"weeks":case"week":case"w":return t*Hf;case"days":case"day":case"d":return t*De;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ht;case"minutes":case"minute":case"mins":case"min":case"m":return t*ft;case"seconds":case"second":case"secs":case"sec":case"s":return t*lt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Xf(e){var r=Math.abs(e);return r>=De?Math.round(e/De)+"d":r>=ht?Math.round(e/ht)+"h":r>=ft?Math.round(e/ft)+"m":r>=lt?Math.round(e/lt)+"s":e+"ms"}function Zf(e){var r=Math.abs(e);return r>=De?_r(e,r,De,"day"):r>=ht?_r(e,r,ht,"hour"):r>=ft?_r(e,r,ft,"minute"):r>=lt?_r(e,r,lt,"second"):e+" ms"}function _r(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var Qn=m((Kd,oa)=>{function Qf(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=sa(),t.destroy=f,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let c=0;for(let h=0;h<l.length;h++)c=(c<<5)-c+l.charCodeAt(h),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=r;function t(l){let c,h=null,_,d;function y(...g){if(!y.enabled)return;let b=y,w=Number(new Date),$=w-(c||w);b.diff=$,b.prev=c,b.curr=w,c=w,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,H)=>{if(P==="%%")return"%";E++;let k=t.formatters[H];if(typeof k=="function"){let J=g[E];P=k.call(b,J),g.splice(E,1),E--}return P}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(_!==t.namespaces&&(_=t.namespaces,d=t.enabled(l)),d),set:g=>{h=g}}),typeof t.init=="function"&&t.init(y),y}function n(l,c){let h=t(this.namespace+(typeof c>"u"?":":c)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let c,h=(typeof l=="string"?l:"").split(/[\s,]+/),_=h.length;for(c=0;c<_;c++)!h[c]||(l=h[c].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...t.names.map(a),...t.skips.map(a).map(c=>"-"+c)].join(",");return t.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let c,h;for(c=0,h=t.skips.length;c<h;c++)if(t.skips[c].test(l))return!1;for(c=0,h=t.names.length;c<h;c++)if(t.names[c].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}oa.exports=Qf});var aa=m((Q,mr)=>{Q.formatArgs=th;Q.save=rh;Q.load=nh;Q.useColors=eh;Q.storage=ih();Q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function eh(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function th(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+mr.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Q.log=console.debug||console.log||(()=>{});function rh(e){try{e?Q.storage.setItem("debug",e):Q.storage.removeItem("debug")}catch{}}function nh(){let e;try{e=Q.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function ih(){try{return localStorage}catch{}}mr.exports=Qn()(Q);var{formatters:sh}=mr.exports;sh.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var ca=m((Gd,ua)=>{"use strict";ua.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var ha=m((Bd,fa)=>{"use strict";var oh=R("os"),la=R("tty"),ne=ca(),{env:x}=process,Te;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?Te=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(Te=1);"FORCE_COLOR"in x&&(x.FORCE_COLOR==="true"?Te=1:x.FORCE_COLOR==="false"?Te=0:Te=x.FORCE_COLOR.length===0?1:Math.min(parseInt(x.FORCE_COLOR,10),3));function ei(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function ti(e,r){if(Te===0)return 0;if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2;if(e&&!r&&Te===void 0)return 0;let t=Te||0;if(x.TERM==="dumb")return t;if(process.platform==="win32"){let n=oh.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in x)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in x)||x.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in x)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(x.TEAMCITY_VERSION)?1:0;if(x.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in x){let n=parseInt((x.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(x.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(x.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(x.TERM)||"COLORTERM"in x?1:t}function ah(e){let r=ti(e,e&&e.isTTY);return ei(r)}fa.exports={supportsColor:ah,stdout:ei(ti(!0,la.isatty(1))),stderr:ei(ti(!0,la.isatty(2)))}});var pa=m((G,yr)=>{var uh=R("tty"),gr=R("util");G.init=_h;G.log=hh;G.formatArgs=lh;G.save=dh;G.load=ph;G.useColors=ch;G.destroy=gr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");G.colors=[6,2,3,4,5,1];try{let e=ha();e&&(e.stderr||e).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function ch(){return"colors"in G.inspectOpts?Boolean(G.inspectOpts.colors):uh.isatty(process.stderr.fd)}function lh(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+yr.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=fh()+r+" "+e[0]}function fh(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}function hh(...e){return process.stderr.write(gr.format(...e)+`
`)}function dh(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function ph(){return process.env.DEBUG}function _h(e){e.inspectOpts={};let r=Object.keys(G.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=G.inspectOpts[r[t]]}yr.exports=Qn()(G);var{formatters:da}=yr.exports;da.o=function(e){return this.inspectOpts.colors=this.useColors,gr.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};da.O=function(e){return this.inspectOpts.colors=this.useColors,gr.inspect(e,this.inspectOpts)}});var ni=m(($d,ri)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ri.exports=aa():ri.exports=pa()});var ba=le(Vr());import{join as mh}from"node:path";var _a=le(ta()),ma=le(ra()),ga=le(qt()),ii=le(vt()),si=le(na());var Zn=le(de()),Xn="schema";var ya=le(ni()),wt=(0,ya.default)("velocejs:validator:main"),vr=class{constructor(r){this._validationRules=new Map;this._validators=new Map;this._plugin=new ma.ExternalPluginLoader;this._astMap=(0,si.cloneDeep)(r);for(let t in this._astMap)this._validators.set(t,new _a.Validator(this._astMap[t],this._plugin))}getValidator(r){if(this._validators.has(r)){let t=this._validators.get(r);return{addValidationRules:this._addValidationRules(r,t),validate:t.validate.bind(t),prepareArgValues:t.prepareArgValues.bind(t)}}throw new ga.default(`${r} validator is not registered!`)}addRules(r,t){let n=this.getValidator(r);return n.addValidationRules(t),n}registerPlugin(r,t){this._plugin.registerPlugin(r,t)}export(){let r={};this._validationRules.forEach((n,i)=>{let s=this._validators.get(i);r[i]={[Zn.RULES_KEY]:n,[Xn]:s[Xn]}}),wt("export schema",r);let t=this._plugin.export();return wt("plugin configs",t),{schema:r,plugins:t}}checkRuleCanExport(r){let t=r.filter(n=>n.external).map(n=>n.name);return wt("available externals",t),n=>{let{plugin:i}=n;return i?(wt("check plugin can export",i),this._plugin.isBuiltIn(i)||t.includes(i)):!1}}_appendRules(r,t){if(this._validationRules.has(r)){let n=this._validationRules.get(r);for(let i in n)t[i]&&(n[i]=n[i].concat((0,ii.toArray)(t[i])));this._validationRules.set(r,n)}else{let n={};for(let i in t)n[i]=(0,ii.toArray)(t[i]);wt("adding new rule",t,n),this._validationRules.set(r,n)}}_addValidationRules(r,t){return n=>{let i=this._checkInput(n);return this._appendRules(r,i),Reflect.apply(t.addValidationRules,t,[i])}}_checkInput(r){let{name:t}=r;if(t){let n=(0,si.cloneDeep)(r);return delete n.name,{[t]:n}}return r}};var Ea=le(ni()),gh=(0,Ea.default)("jsonql:valdiators-server"),va=class extends vr{constructor(r){super(r)}loadExternalPlugins(r){return Ar(this,null,function*(){return(yield this._importExternalPlugins(r)).map(n=>{gh("loaded plugin",n);let i=this._getPluginValue(n);return this._plugin.registerExternalPlugin(i.name,i),i})})}registerPlugins(r){r.forEach((t,n)=>{this.registerPlugin(n,t)})}_getPluginValue(r){let t=r.default;return t.default?t.default:t}_importExternalPlugins(r){return Ar(this,null,function*(){return new Promise((t,n)=>{(0,ba.default)(mh(r,"*.js"),(i,s)=>{if(i)return n(`Something went wrong ${i}`);if(s.length===0)return n("No plugin file found, we only support js files at the moment!");Promise.all(s.map(o=>import(o))).then(o=>{t(o)})})})})}};export{va as ValidatorsServer};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=esm.js.map
