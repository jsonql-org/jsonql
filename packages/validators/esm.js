"use strict";var ba=Object.create;var si=Object.defineProperty;var Ea=Object.getOwnPropertyDescriptor;var Aa=Object.getOwnPropertyNames;var Oa=Object.getPrototypeOf,Ca=Object.prototype.hasOwnProperty;var C=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,t)=>(typeof require!="undefined"?require:r)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var y=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ra=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Aa(r))!Ca.call(e,i)&&i!==t&&si(e,i,{get:()=>r[i],enumerable:!(n=Ea(r,i))||n.enumerable});return e};var le=(e,r,t)=>(t=e!=null?ba(Oa(e)):{},Ra(r||!e||!e.__esModule?si(t,"default",{value:e,enumerable:!0}):t,e));var Er=(e,r,t)=>new Promise((n,i)=>{var s=u=>{try{a(t.next(u))}catch(f){i(f)}},o=u=>{try{a(t.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(e,r)).next())});var oi=y(Ar=>{var Se=C("path"),ge=process.platform==="win32",me=C("fs"),Pa=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function wa(){var e;if(Pa){var r=new Error;e=t}else e=n;return e;function t(i){i&&(r.message=i.message,i=r,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function Ta(e){return typeof e=="function"?e:wa()}var gh=Se.normalize;ge?fe=/(.*?)(?:[\/\\]+|$)/g:fe=/(.*?)(?:[\/]+|$)/g;var fe;ge?ht=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ht=/^[\/]*/;var ht;Ar.realpathSync=function(r,t){if(r=Se.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];var n=r,i={},s={},o,a,u,f;c();function c(){var g=ht.exec(r);o=g[0].length,a=g[0],u=g[0],f="",ge&&!s[u]&&(me.lstatSync(u),s[u]=!0)}for(;o<r.length;){fe.lastIndex=o;var h=fe.exec(r);if(f=a,a+=h[0],u=f+h[1],o=fe.lastIndex,!(s[u]||t&&t[u]===u)){var l;if(t&&Object.prototype.hasOwnProperty.call(t,u))l=t[u];else{var d=me.lstatSync(u);if(!d.isSymbolicLink()){s[u]=!0,t&&(t[u]=u);continue}var _=null;if(!ge){var m=d.dev.toString(32)+":"+d.ino.toString(32);i.hasOwnProperty(m)&&(_=i[m])}_===null&&(me.statSync(u),_=me.readlinkSync(u)),l=Se.resolve(f,_),t&&(t[u]=l),ge||(i[m]=_)}r=Se.resolve(l,r.slice(o)),c()}}return t&&(t[n]=r),r};Ar.realpath=function(r,t,n){if(typeof n!="function"&&(n=Ta(t),t=null),r=Se.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return process.nextTick(n.bind(null,null,t[r]));var i=r,s={},o={},a,u,f,c;h();function h(){var g=ht.exec(r);a=g[0].length,u=g[0],f=g[0],c="",ge&&!o[f]?me.lstat(f,function(b){if(b)return n(b);o[f]=!0,l()}):process.nextTick(l)}function l(){if(a>=r.length)return t&&(t[i]=r),n(null,r);fe.lastIndex=a;var g=fe.exec(r);return c=u,u+=g[0],f=c+g[1],a=fe.lastIndex,o[f]||t&&t[f]===f?process.nextTick(l):t&&Object.prototype.hasOwnProperty.call(t,f)?m(t[f]):me.lstat(f,d)}function d(g,b){if(g)return n(g);if(!b.isSymbolicLink())return o[f]=!0,t&&(t[f]=f),process.nextTick(l);if(!ge){var P=b.dev.toString(32)+":"+b.ino.toString(32);if(s.hasOwnProperty(P))return _(null,s[P],f)}me.stat(f,function(J){if(J)return n(J);me.readlink(f,function(E,A){ge||(s[P]=A),_(E,A)})})}function _(g,b,P){if(g)return n(g);var J=Se.resolve(c,b);t&&(t[P]=J),m(J)}function m(g){r=Se.resolve(g,r.slice(a)),h()}}});var Pr=y((vh,li)=>{li.exports=ye;ye.realpath=ye;ye.sync=Rr;ye.realpathSync=Rr;ye.monkeypatch=Fa;ye.unmonkeypatch=ja;var De=C("fs"),Or=De.realpath,Cr=De.realpathSync,Sa=process.version,ai=/^v[0-5]\./.test(Sa),ui=oi();function ci(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function ye(e,r,t){if(ai)return Or(e,r,t);typeof r=="function"&&(t=r,r=null),Or(e,r,function(n,i){ci(n)?ui.realpath(e,r,t):t(n,i)})}function Rr(e,r){if(ai)return Cr(e,r);try{return Cr(e,r)}catch(t){if(ci(t))return ui.realpathSync(e,r);throw t}}function Fa(){De.realpath=ye,De.realpathSync=Rr}function ja(){De.realpath=Or,De.realpathSync=Cr}});var hi=y((bh,fi)=>{var Ia=typeof process=="object"&&process&&process.platform==="win32";fi.exports=Ia?{sep:"\\"}:{sep:"/"}});var gi=y((Eh,mi)=>{"use strict";mi.exports=pi;function pi(e,r,t){e instanceof RegExp&&(e=di(e,t)),r instanceof RegExp&&(r=di(r,t));var n=_i(e,r,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+e.length,n[1]),post:t.slice(n[1]+r.length)}}function di(e,r){var t=r.match(e);return t?t[0]:null}pi.range=_i;function _i(e,r,t){var n,i,s,o,a,u=t.indexOf(e),f=t.indexOf(r,u+1),c=u;if(u>=0&&f>0){if(e===r)return[u,f];for(n=[],s=t.length;c>=0&&!a;)c==u?(n.push(c),u=t.indexOf(e,c+1)):n.length==1?a=[n.pop(),f]:(i=n.pop(),i<s&&(s=i,o=f),f=t.indexOf(r,c+1)),c=u<f&&u>=0?u:f;n.length&&(a=[s,o])}return a}});var Ri=y((Ah,Ci)=>{var yi=gi();Ci.exports=Ma;var vi="\0SLASH"+Math.random()+"\0",bi="\0OPEN"+Math.random()+"\0",Tr="\0CLOSE"+Math.random()+"\0",Ei="\0COMMA"+Math.random()+"\0",Ai="\0PERIOD"+Math.random()+"\0";function wr(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function ka(e){return e.split("\\\\").join(vi).split("\\{").join(bi).split("\\}").join(Tr).split("\\,").join(Ei).split("\\.").join(Ai)}function Ya(e){return e.split(vi).join("\\").split(bi).join("{").split(Tr).join("}").split(Ei).join(",").split(Ai).join(".")}function Oi(e){if(!e)return[""];var r=[],t=yi("{","}",e);if(!t)return e.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Oi(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),r.push.apply(r,o),r}function Ma(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),dt(ka(e),!0).map(Ya)):[]}function La(e){return"{"+e+"}"}function Na(e){return/^-?0\d/.test(e)}function qa(e,r){return e<=r}function Da(e,r){return e>=r}function dt(e,r){var t=[],n=yi("{","}",e);if(!n)return[e];var i=n.pre,s=n.post.length?dt(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),c=u||f,h=n.body.indexOf(",")>=0;if(!c&&!h)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Tr+n.post,dt(e)):[e];var l;if(c)l=n.body.split(/\.\./);else if(l=Oi(n.body),l.length===1&&(l=dt(l[0],!1).map(La),l.length===1))return s.map(function(vr){return n.pre+l[0]+vr});var d;if(c){var _=wr(l[0]),m=wr(l[1]),g=Math.max(l[0].length,l[1].length),b=l.length==3?Math.abs(wr(l[2])):1,P=qa,J=m<_;J&&(b*=-1,P=Da);var E=l.some(Na);d=[];for(var A=_;P(A,m);A+=b){var w;if(f)w=String.fromCharCode(A),w==="\\"&&(w="");else if(w=String(A),E){var W=g-w.length;if(W>0){var j=new Array(W+1).join("0");A<0?w="-"+j+w.slice(1):w=j+w}}d.push(w)}}else{d=[];for(var H=0;H<l.length;H++)d.push.apply(d,dt(l[H],!1))}for(var H=0;H<d.length;H++)for(var o=0;o<s.length;o++){var a=i+d[H]+s[o];(!r||c||a)&&t.push(a)}}return t}});var Tt=y((Ch,Ir)=>{var z=Ir.exports=(e,r,t={})=>(wt(r),!t.nocomment&&r.charAt(0)==="#"?!1:new Ve(r,t).match(e));Ir.exports=z;var Fr=hi();z.sep=Fr.sep;var se=Symbol("globstar **");z.GLOBSTAR=se;var Va=Ri(),Pi={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},jr="[^/]",Sr=jr+"*?",xa="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ua="(?:(?!(?:\\/|^)\\.).)*?",Si=e=>e.split("").reduce((r,t)=>(r[t]=!0,r),{}),wi=Si("().*{}+?[]^$\\!"),Ka=Si("[.("),Ti=/\/+/;z.filter=(e,r={})=>(t,n,i)=>z(t,e,r);var ve=(e,r={})=>{let t={};return Object.keys(e).forEach(n=>t[n]=e[n]),Object.keys(r).forEach(n=>t[n]=r[n]),t};z.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return z;let r=z,t=(n,i,s)=>r(n,i,ve(e,s));return t.Minimatch=class extends r.Minimatch{constructor(i,s){super(i,ve(e,s))}},t.Minimatch.defaults=n=>r.defaults(ve(e,n)).Minimatch,t.filter=(n,i)=>r.filter(n,ve(e,i)),t.defaults=n=>r.defaults(ve(e,n)),t.makeRe=(n,i)=>r.makeRe(n,ve(e,i)),t.braceExpand=(n,i)=>r.braceExpand(n,ve(e,i)),t.match=(n,i,s)=>r.match(n,i,ve(e,s)),t};z.braceExpand=(e,r)=>Fi(e,r);var Fi=(e,r={})=>(wt(e),r.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Va(e)),Ga=1024*64,wt=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Ga)throw new TypeError("pattern is too long")},Pt=Symbol("subparse");z.makeRe=(e,r)=>new Ve(e,r||{}).makeRe();z.match=(e,r,t={})=>{let n=new Ve(r,t);return e=e.filter(i=>n.match(i)),n.options.nonull&&!e.length&&e.push(r),e};var Ba=e=>e.replace(/\\(.)/g,"$1"),$a=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ve=class{constructor(r,t){wt(r),t||(t={}),this.options=t,this.set=[],this.pattern=r,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let r=this.pattern,t=this.options;if(!t.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(Ti)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let r=this.pattern,t=!1,n=0;for(let i=0;i<r.length&&r.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=r.substr(n)),this.negate=t}matchOne(r,t,n){var i=this.options;this.debug("matchOne",{this:this,file:r,pattern:t}),this.debug("matchOne",r.length,t.length);for(var s=0,o=0,a=r.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var f=t[o],c=r[s];if(this.debug(t,f,c),f===!1)return!1;if(f===se){this.debug("GLOBSTAR",[t,f,c]);var h=s,l=o+1;if(l===u){for(this.debug("** at the end");s<a;s++)if(r[s]==="."||r[s]===".."||!i.dot&&r[s].charAt(0)===".")return!1;return!0}for(;h<a;){var d=r[h];if(this.debug(`
globstar while`,r,h,t,l,d),this.matchOne(r.slice(h),t.slice(l),n))return this.debug("globstar found match!",h,a,d),!0;if(d==="."||d===".."||!i.dot&&d.charAt(0)==="."){this.debug("dot detected!",r,h,t,l);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,r,h,t,l),h===a))}var _;if(typeof f=="string"?(_=c===f,this.debug("string match",f,c,_)):(_=c.match(f),this.debug("pattern match",f,c,_)),!_)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&r[s]==="";throw new Error("wtf?")}braceExpand(){return Fi(this.pattern,this.options)}parse(r,t){wt(r);let n=this.options;if(r==="**")if(n.noglobstar)r="*";else return se;if(r==="")return"";let i="",s=!!n.nocase,o=!1,a=[],u=[],f,c=!1,h=-1,l=-1,d,_,m,g=r.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(f){switch(f){case"*":i+=Sr,s=!0;break;case"?":i+=jr,s=!0;break;default:i+="\\"+f;break}this.debug("clearStateChar %j %j",f,i),f=!1}};for(let E=0,A;E<r.length&&(A=r.charAt(E));E++){if(this.debug("%s	%s %s %j",r,E,i,A),o){if(A==="/")return!1;wi[A]&&(i+="\\"),i+=A,o=!1;continue}switch(A){case"/":return!1;case"\\":b(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,E,i,A),c){this.debug("  in class"),A==="!"&&E===l+1&&(A="^"),i+=A;continue}this.debug("call clearStateChar %j",f),b(),f=A,n.noext&&b();continue;case"(":if(c){i+="(";continue}if(!f){i+="\\(";continue}a.push({type:f,start:E-1,reStart:i.length,open:Pi[f].open,close:Pi[f].close}),i+=f==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",f,i),f=!1;continue;case")":if(c||!a.length){i+="\\)";continue}b(),s=!0,_=a.pop(),i+=_.close,_.type==="!"&&u.push(_),_.reEnd=i.length;continue;case"|":if(c||!a.length){i+="\\|";continue}b(),i+="|";continue;case"[":if(b(),c){i+="\\"+A;continue}c=!0,l=E,h=i.length,i+=A;continue;case"]":if(E===l+1||!c){i+="\\"+A;continue}d=r.substring(l+1,E);try{RegExp("["+d+"]")}catch{m=this.parse(d,Pt),i=i.substr(0,h)+"\\["+m[0]+"\\]",s=s||m[1],c=!1;continue}s=!0,c=!1,i+=A;continue;default:b(),wi[A]&&!(A==="^"&&c)&&(i+="\\"),i+=A;break}}for(c&&(d=r.substr(l+1),m=this.parse(d,Pt),i=i.substr(0,h)+"\\["+m[0],s=s||m[1]),_=a.pop();_;_=a.pop()){let E;E=i.slice(_.reStart+_.open.length),this.debug("setting tail",i,_),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,(w,W,j)=>(j||(j="\\"),W+W+j+"|")),this.debug(`tail=%j
   %s`,E,E,_,i);let A=_.type==="*"?Sr:_.type==="?"?jr:"\\"+_.type;s=!0,i=i.slice(0,_.reStart)+A+"\\("+E}b(),o&&(i+="\\\\");let P=Ka[i.charAt(0)];for(let E=u.length-1;E>-1;E--){let A=u[E],w=i.slice(0,A.reStart),W=i.slice(A.reStart,A.reEnd-8),j=i.slice(A.reEnd),H=i.slice(A.reEnd-8,A.reEnd)+j,vr=w.split("(").length-1,br=j;for(let ii=0;ii<vr;ii++)br=br.replace(/\)[+*?]?/,"");j=br;let va=j===""&&t!==Pt?"$":"";i=w+W+j+va+H}if(i!==""&&s&&(i="(?=.)"+i),P&&(i=g+i),t===Pt)return[i,s];if(!s)return Ba(r);let J=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",J),{_glob:r,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let r=this.set;if(!r.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?Sr:t.dot?xa:Ua,i=t.nocase?"i":"",s=r.map(o=>(o=o.map(a=>typeof a=="string"?$a(a):a===se?se:a._src).reduce((a,u)=>(a[a.length-1]===se&&u===se||a.push(u),a),[]),o.forEach((a,u)=>{a!==se||o[u-1]===se||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=se))}),o.filter(a=>a!==se).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(r,t=this.partial){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&t)return!0;let n=this.options;Fr.sep!=="/"&&(r=r.split(Fr.sep).join("/")),r=r.split(Ti),this.debug(this.pattern,"split",r);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=r.length-1;o>=0&&(s=r[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=r;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(r){return z.defaults(r).Minimatch}};z.Minimatch=Ve});var ji=y((Rh,kr)=>{typeof Object.create=="function"?kr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:kr.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var Ii=y((Ph,Mr)=>{try{if(Yr=C("util"),typeof Yr.inherits!="function")throw"";Mr.exports=Yr.inherits}catch{Mr.exports=ji()}var Yr});var Nr=y(be=>{be.setopts=Za;be.ownProp=ki;be.makeAbs=pt;be.finish=Qa;be.mark=eu;be.isIgnored=Mi;be.childrenIgnored=tu;function ki(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Ja=C("fs"),Fe=C("path"),Ha=Tt(),Yi=C("path").isAbsolute,Lr=Ha.Minimatch;function Wa(e,r){return e.localeCompare(r,"en")}function za(e,r){e.ignore=r.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Xa))}function Xa(e){var r=null;if(e.slice(-3)==="/**"){var t=e.replace(/(\/\*\*)+$/,"");r=new Lr(t,{dot:!0})}return{matcher:new Lr(e,{dot:!0}),gmatcher:r}}function Za(e,r,t){if(t||(t={}),t.matchBase&&r.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!t.silent,e.pattern=r,e.strict=t.strict!==!1,e.realpath=!!t.realpath,e.realpathCache=t.realpathCache||Object.create(null),e.follow=!!t.follow,e.dot=!!t.dot,e.mark=!!t.mark,e.nodir=!!t.nodir,e.nodir&&(e.mark=!0),e.sync=!!t.sync,e.nounique=!!t.nounique,e.nonull=!!t.nonull,e.nosort=!!t.nosort,e.nocase=!!t.nocase,e.stat=!!t.stat,e.noprocess=!!t.noprocess,e.absolute=!!t.absolute,e.fs=t.fs||Ja,e.maxLength=t.maxLength||1/0,e.cache=t.cache||Object.create(null),e.statCache=t.statCache||Object.create(null),e.symlinks=t.symlinks||Object.create(null),za(e,t),e.changedCwd=!1;var n=process.cwd();ki(t,"cwd")?(e.cwd=Fe.resolve(t.cwd),e.changedCwd=e.cwd!==n):e.cwd=Fe.resolve(n),e.root=t.root||Fe.resolve(e.cwd,"/"),e.root=Fe.resolve(e.root),e.cwdAbs=Yi(e.cwd)?e.cwd:pt(e,e.cwd),e.nomount=!!t.nomount,process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/"),e.cwd=e.cwd.replace(/\\/g,"/"),e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),t.nonegate=!0,t.nocomment=!0,t.allowWindowsEscape=!0,e.minimatch=new Lr(r,t),e.options=e.minimatch.options}function Qa(e){for(var r=e.nounique,t=r?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var o=e.minimatch.globSet[n];r?t.push(o):t[o]=!0}}else{var a=Object.keys(s);r?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(r||(t=Object.keys(t)),e.nosort||(t=t.sort(Wa)),e.mark){for(var n=0;n<t.length;n++)t[n]=e._mark(t[n]);e.nodir&&(t=t.filter(function(u){var f=!/\/$/.test(u),c=e.cache[u]||e.cache[pt(e,u)];return f&&c&&(f=c!=="DIR"&&!Array.isArray(c)),f}))}e.ignore.length&&(t=t.filter(function(u){return!Mi(e,u)})),e.found=t}function eu(e,r){var t=pt(e,r),n=e.cache[t],i=r;if(n){var s=n==="DIR"||Array.isArray(n),o=r.slice(-1)==="/";if(s&&!o?i+="/":!s&&o&&(i=i.slice(0,-1)),i!==r){var a=pt(e,i);e.statCache[a]=e.statCache[t],e.cache[a]=e.cache[t]}}return i}function pt(e,r){var t=r;return r.charAt(0)==="/"?t=Fe.join(e.root,r):Yi(r)||r===""?t=r:e.changedCwd?t=Fe.resolve(e.cwd,r):t=Fe.resolve(r),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function Mi(e,r){return e.ignore.length?e.ignore.some(function(t){return t.matcher.match(r)||!!(t.gmatcher&&t.gmatcher.match(r))}):!1}function tu(e,r){return e.ignore.length?e.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(r))}):!1}});var Vi=y((jh,Di)=>{Di.exports=qi;qi.GlobSync=M;var ru=Pr(),Li=Tt(),Th=Li.Minimatch,Sh=Vr().Glob,Fh=C("util"),qr=C("path"),Ni=C("assert"),St=C("path").isAbsolute,je=Nr(),nu=je.setopts,Dr=je.ownProp,iu=je.childrenIgnored,su=je.isIgnored;function qi(e,r){if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new M(e,r).found}function M(e,r){if(!e)throw new Error("must provide pattern");if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof M))return new M(e,r);if(nu(this,e,r),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}M.prototype._finish=function(){if(Ni.ok(this instanceof M),this.realpath){var e=this;this.matches.forEach(function(r,t){var n=e.matches[t]=Object.create(null);for(var i in r)try{i=e._makeAbs(i);var s=ru.realpathSync(i,e.realpathCache);n[s]=!0}catch(o){if(o.syscall==="stat")n[e._makeAbs(i)]=!0;else throw o}})}je.finish(this)};M.prototype._process=function(e,r,t){Ni.ok(this instanceof M);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),r);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),o;i===null?o=".":((St(i)||St(e.map(function(f){return typeof f=="string"?f:"[*]"}).join("/")))&&(!i||!St(i))&&(i="/"+i),o=i);var a=this._makeAbs(o);if(!iu(this,o)){var u=s[0]===Li.GLOBSTAR;u?this._processGlobStar(i,o,a,s,r,t):this._processReaddir(i,o,a,s,r,t)}};M.prototype._processReaddir=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){for(var a=n[0],u=!!this.minimatch.negate,f=a._glob,c=this.dot||f.charAt(0)===".",h=[],l=0;l<o.length;l++){var d=o[l];if(d.charAt(0)!=="."||c){var _;u&&!e?_=!d.match(a):_=d.match(a),_&&h.push(d)}}var m=h.length;if(m!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var l=0;l<m;l++){var d=h[l];e&&(e.slice(-1)!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=qr.join(this.root,d)),this._emitMatch(i,d)}return}n.shift();for(var l=0;l<m;l++){var d=h[l],g;e?g=[e,d]:g=[d],this._process(g.concat(n),i,s)}}}};M.prototype._emitMatch=function(e,r){if(!su(this,r)){var t=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0,this.stat&&this._stat(r)}}};M.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var r,t,n;try{t=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[e]=i,!i&&t&&!t.isDirectory()?this.cache[e]="FILE":r=this._readdir(e,!1),r};M.prototype._readdir=function(e,r){var t;if(r&&!Dr(this.symlinks,e))return this._readdirInGlobStar(e);if(Dr(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};M.prototype._readdirEntries=function(e,r){if(!this.mark&&!this.stat)for(var t=0;t<r.length;t++){var n=r[t];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=r,r};M.prototype._readdirError=function(e,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(e);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(r.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=r.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw r;this.silent||console.error("glob error",r);break}};M.prototype._processGlobStar=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){var a=n.slice(1),u=e?[e]:[],f=u.concat(a);this._process(f,i,!1);var c=o.length,h=this.symlinks[t];if(!(h&&s))for(var l=0;l<c;l++){var d=o[l];if(!(d.charAt(0)==="."&&!this.dot)){var _=u.concat(o[l],a);this._process(_,i,!0);var m=u.concat(o[l],n);this._process(m,i,!0)}}}};M.prototype._processSimple=function(e,r){var t=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),!!t){if(e&&St(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=qr.join(this.root,e):(e=qr.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}};M.prototype._stat=function(e){var r=this._makeAbs(e),t=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&Dr(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var n,i=this.statCache[r];if(!i){var s;try{s=this.fs.lstatSync(r)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[r]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(r)}catch{i=s}else i=s}this.statCache[r]=i;var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,t&&o==="FILE"?!1:o};M.prototype._mark=function(e){return je.mark(this,e)};M.prototype._makeAbs=function(e){return je.makeAbs(this,e)}});var xr=y((Ih,Ui)=>{Ui.exports=xi;function xi(e,r){if(e&&r)return xi(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var Kr=y((kh,Ur)=>{var Ki=xr();Ur.exports=Ki(Ft);Ur.exports.strict=Ki(Gi);Ft.proto=Ft(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ft(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Gi(this)},configurable:!0})});function Ft(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function Gi(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var $i=y((Yh,Bi)=>{var ou=xr(),_t=Object.create(null),au=Kr();Bi.exports=ou(uu);function uu(e,r){return _t[e]?(_t[e].push(r),null):(_t[e]=[r],cu(e))}function cu(e){return au(function r(){var t=_t[e],n=t.length,i=lu(arguments);try{for(var s=0;s<n;s++)t[s].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){r.apply(null,i)})):delete _t[e]}})}function lu(e){for(var r=e.length,t=[],n=0;n<r;n++)t[n]=e[n];return t}});var Vr=y((Nh,Hi)=>{Hi.exports=Ie;var fu=Pr(),Ji=Tt(),Mh=Ji.Minimatch,hu=Ii(),du=C("events").EventEmitter,Gr=C("path"),Br=C("assert"),mt=C("path").isAbsolute,Jr=Vi(),ke=Nr(),pu=ke.setopts,$r=ke.ownProp,Hr=$i(),Lh=C("util"),_u=ke.childrenIgnored,mu=ke.isIgnored,gu=Kr();function Ie(e,r,t){if(typeof r=="function"&&(t=r,r={}),r||(r={}),r.sync){if(t)throw new TypeError("callback provided to sync glob");return Jr(e,r)}return new R(e,r,t)}Ie.sync=Jr;var yu=Ie.GlobSync=Jr.GlobSync;Ie.glob=Ie;function vu(e,r){if(r===null||typeof r!="object")return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}Ie.hasMagic=function(e,r){var t=vu({},r);t.noprocess=!0;var n=new R(e,t),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};Ie.Glob=R;hu(R,du);function R(e,r,t){if(typeof r=="function"&&(t=r,r=null),r&&r.sync){if(t)throw new TypeError("callback provided to sync glob");return new yu(e,r)}if(!(this instanceof R))return new R(e,r,t);pu(this,e,r),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=gu(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var s=!0,o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,a);s=!1;function a(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}R.prototype._finish=function(){if(Br(this instanceof R),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();ke.finish(this),this.emit("end",this.found)}};R.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var r=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--e===0&&r._finish()}};R.prototype._realpathSet=function(e,r){var t=this.matches[e];if(!t)return r();var n=Object.keys(t),i=this,s=n.length;if(s===0)return r();var o=this.matches[e]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),fu.realpath(a,i.realpathCache,function(f,c){f?f.syscall==="stat"?o[a]=!0:i.emit("error",f):o[c]=!0,--s===0&&(i.matches[e]=o,r())})})};R.prototype._mark=function(e){return ke.mark(this,e)};R.prototype._makeAbs=function(e){return ke.makeAbs(this,e)};R.prototype.abort=function(){this.aborted=!0,this.emit("abort")};R.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};R.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var r=0;r<e.length;r++){var t=e[r];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var r=0;r<n.length;r++){var i=n[r];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};R.prototype._process=function(e,r,t,n){if(Br(this instanceof R),Br(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,r,t,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),r,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var o=e.slice(i),a;s===null?a=".":((mt(s)||mt(e.map(function(c){return typeof c=="string"?c:"[*]"}).join("/")))&&(!s||!mt(s))&&(s="/"+s),a=s);var u=this._makeAbs(a);if(_u(this,a))return n();var f=o[0]===Ji.GLOBSTAR;f?this._processGlobStar(s,a,u,o,r,t,n):this._processReaddir(s,a,u,o,r,t,n)}};R.prototype._processReaddir=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){return a._processReaddir2(e,r,t,n,i,s,f,o)})};R.prototype._processReaddir2=function(e,r,t,n,i,s,o,a){if(!o)return a();for(var u=n[0],f=!!this.minimatch.negate,c=u._glob,h=this.dot||c.charAt(0)===".",l=[],d=0;d<o.length;d++){var _=o[d];if(_.charAt(0)!=="."||h){var m;f&&!e?m=!_.match(u):m=_.match(u),m&&l.push(_)}}var g=l.length;if(g===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<g;d++){var _=l[d];e&&(e!=="/"?_=e+"/"+_:_=e+_),_.charAt(0)==="/"&&!this.nomount&&(_=Gr.join(this.root,_)),this._emitMatch(i,_)}return a()}n.shift();for(var d=0;d<g;d++){var _=l[d],b;e&&(e!=="/"?_=e+"/"+_:_=e+_),this._process([_].concat(n),i,s,a)}a()};R.prototype._emitMatch=function(e,r){if(!this.aborted&&!mu(this,r)){if(this.paused){this._emitQueue.push([e,r]);return}var t=mt(r)?r:this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0;var i=this.statCache[t];i&&this.emit("stat",r,i),this.emit("match",r)}}};R.prototype._readdirInGlobStar=function(e,r){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,r);var t="lstat\0"+e,n=this,i=Hr(t,s);i&&n.fs.lstat(e,i);function s(o,a){if(o&&o.code==="ENOENT")return r();var u=a&&a.isSymbolicLink();n.symlinks[e]=u,!u&&a&&!a.isDirectory()?(n.cache[e]="FILE",r()):n._readdir(e,!1,r)}};R.prototype._readdir=function(e,r,t){if(!this.aborted&&(t=Hr("readdir\0"+e+"\0"+r,t),!!t)){if(r&&!$r(this.symlinks,e))return this._readdirInGlobStar(e,t);if($r(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(e,bu(this,e,t))}};function bu(e,r,t){return function(n,i){n?e._readdirError(r,n,t):e._readdirEntries(r,i,t)}}R.prototype._readdirEntries=function(e,r,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<r.length;n++){var i=r[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=r,t(null,r)}};R.prototype._readdirError=function(e,r,t){if(!this.aborted){switch(r.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(r.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=r.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",r),this.abort()),this.silent||console.error("glob error",r);break}return t()}};R.prototype._processGlobStar=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){a._processGlobStar2(e,r,t,n,i,s,f,o)})};R.prototype._processGlobStar2=function(e,r,t,n,i,s,o,a){if(!o)return a();var u=n.slice(1),f=e?[e]:[],c=f.concat(u);this._process(c,i,!1,a);var h=this.symlinks[t],l=o.length;if(h&&s)return a();for(var d=0;d<l;d++){var _=o[d];if(!(_.charAt(0)==="."&&!this.dot)){var m=f.concat(o[d],u);this._process(m,i,!0,a);var g=f.concat(o[d],n);this._process(g,i,!0,a)}}a()};R.prototype._processSimple=function(e,r,t){var n=this;this._stat(e,function(i,s){n._processSimple2(e,r,i,s,t)})};R.prototype._processSimple2=function(e,r,t,n,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!n)return i();if(e&&mt(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Gr.join(this.root,e):(e=Gr.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()};R.prototype._stat=function(e,r){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return r();if(!this.stat&&$r(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return r(null,i);if(n&&i==="FILE")return r()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return r(null,o);var a=o.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?r():r(null,a,o)}var u=this,f=Hr("stat\0"+t,c);f&&u.fs.lstat(t,f);function c(h,l){if(l&&l.isSymbolicLink())return u.fs.stat(t,function(d,_){d?u._stat2(e,t,null,l,r):u._stat2(e,t,d,_,r)});u._stat2(e,t,h,l,r)}};R.prototype._stat2=function(e,r,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[r]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[r]=n,r.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,s&&o==="FILE"?i():i(null,o,n)}});var kt=y((qh,It)=>{var Wi,zi,Xi,Zi,Qi,es,ts,rs,ns,jt,Wr,is,ss,xe,os,as,us,cs,ls,fs,hs,ds,ps;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof It=="object"&&typeof It.exports=="object"?e(t(r,t(It.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};Wi=function(t,n){r(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},zi=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Xi=function(t,n){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]]);return i},Zi=function(t,n,i,s){var o=arguments.length,a=o<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,i):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,i,s);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(a=(o<3?u(a):o>3?u(n,i,a):u(n,i))||a);return o>3&&a&&Object.defineProperty(n,i,a),a},Qi=function(t,n){return function(i,s){n(i,s,t)}},es=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},ts=function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(u){u(a)})}return new(i||(i=Promise))(function(a,u){function f(l){try{h(s.next(l))}catch(d){u(d)}}function c(l){try{h(s.throw(l))}catch(d){u(d)}}function h(l){l.done?a(l.value):o(l.value).then(f,c)}h((s=s.apply(t,n||[])).next())})},rs=function(t,n){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(l){return c([h,l])}}function c(h){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,o&&(a=h[0]&2?o.return:h[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,h[1])).done)return a;switch(o=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,o=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){i.label=h[1];break}if(h[0]===6&&i.label<a[1]){i.label=a[1],a=h;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(h);break}a[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(t,i)}catch(l){h=[6,l],o=0}finally{s=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},ps=function(t,n,i,s){s===void 0&&(s=i),t[s]=n[i]},ns=function(t,n){for(var i in t)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=t[i])},jt=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Wr=function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),o,a=[],u;try{for(;(n===void 0||n-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return a},is=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Wr(arguments[n]));return t},ss=function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var s=Array(t),o=0,n=0;n<i;n++)for(var a=arguments[n],u=0,f=a.length;u<f;u++,o++)s[o]=a[u];return s},xe=function(t){return this instanceof xe?(this.v=t,this):new xe(t)},os=function(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,n||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(_){s[_]&&(o[_]=function(m){return new Promise(function(g,b){a.push([_,m,g,b])>1||f(_,m)})})}function f(_,m){try{c(s[_](m))}catch(g){d(a[0][3],g)}}function c(_){_.value instanceof xe?Promise.resolve(_.value.v).then(h,l):d(a[0][2],_)}function h(_){f("next",_)}function l(_){f("throw",_)}function d(_,m){_(m),a.shift(),a.length&&f(a[0][0],a[0][1])}},as=function(t){var n,i;return n={},s("next"),s("throw",function(o){throw o}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(o,a){n[o]=t[o]?function(u){return(i=!i)?{value:xe(t[o](u)),done:o==="return"}:a?a(u):u}:a}},us=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof jt=="function"?jt(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(u){return new Promise(function(f,c){u=t[a](u),o(f,c,u.done,u.value)})}}function o(a,u,f,c){Promise.resolve(c).then(function(h){a({value:h,done:f})},u)}},cs=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t},ls=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n.default=t,n},fs=function(t){return t&&t.__esModule?t:{default:t}},hs=function(t,n){if(!n.has(t))throw new TypeError("attempted to get private field on non-instance");return n.get(t)},ds=function(t,n,i){if(!n.has(t))throw new TypeError("attempted to set private field on non-instance");return n.set(t,i),i},e("__extends",Wi),e("__assign",zi),e("__rest",Xi),e("__decorate",Zi),e("__param",Qi),e("__metadata",es),e("__awaiter",ts),e("__generator",rs),e("__exportStar",ns),e("__createBinding",ps),e("__values",jt),e("__read",Wr),e("__spread",is),e("__spreadArrays",ss),e("__await",xe),e("__asyncGenerator",os),e("__asyncDelegator",as),e("__asyncValues",us),e("__makeTemplateObject",cs),e("__importStar",ls),e("__importDefault",fs),e("__classPrivateFieldGet",hs),e("__classPrivateFieldSet",ds)})});var Yt=y(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});var Ue=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ue.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ue)}};zr.default=Ue});var gt=y(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});var Ke=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ke.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}};Xr.default=Ke});var Ge=y(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.trueTypeOf=void 0;function Eu(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}Mt.trueTypeOf=Eu});var Be=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.isString=X.flatMap=X.merge=X.curry=void 0;var Au=Ge(),Zr=he(),Ou=(e,...r)=>e.length<=r.length?e(...r):(...t)=>(0,X.curry)(e,...r,...t);X.curry=Ou;var Cu=(e,...r)=>{if(!r.length)return e;let t=r.shift();if((0,Zr.isObject)(e)&&(0,Zr.isObject)(t))for(let n in t)(0,Zr.isObject)(t[n])?(e[n]||Object.assign(e,{[n]:{}}),(0,X.merge)(e[n],t[n])):Object.assign(e,{[n]:t[n]});return(0,X.merge)(e,...r)};X.merge=Cu;function Ru(e,r){return r||(r=t=>t),e.flatMap(r)}X.flatMap=Ru;function Pu(e){return(0,Au.trueTypeOf)(e)==="string"}X.isString=Pu});var yt=y(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.formatStr=B.showDeep=B.nil=B.createEvtName=B.parseJson=B.toArray=B.inArray=void 0;var wu=Be(),Tu=(e,r)=>e.includes(r);B.inArray=Tu;var Su=e=>Array.isArray(e)?e:[e];B.toArray=Su;var Fu=(e,r=!0)=>{try{return(0,wu.isString)(e)?JSON.parse(e):JSON.parse(JSON.stringify(e))}catch(t){if(r)return e;throw t}};B.parseJson=Fu;var ju=(...e)=>e.join("_");B.createEvtName=ju;var Iu=()=>!1;B.nil=Iu;var ku=e=>{console.dir(e,{depth:null})};B.showDeep=ku;function Yu(e,...r){return e.replace(/{([0-9]+)}/g,(t,n)=>typeof r[n]>"u"?t:r[n])}B.formatStr=Yu});var he=y(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.readOnly=L.objectHasKey=L.arrToObj=L.assign=L.getConfigValue=L.isClass=L.isPlainObject=L.isObject=void 0;var Mu=yt(),Lu=Ge();function Qr(e){return(0,Lu.trueTypeOf)(e)==="object"}L.isObject=Qr;function en(e){if(Qr(e)){let t=e.constructor.prototype,n="[Object: null prototype]";return t.toString().substring(0,n.length)===n?!0:Qr(t)===!1?!1:Reflect.apply(t.hasOwnProperty,t,["isPrototypeOf"])}return!1}L.isPlainObject=en;var Nu=e=>!en(e);L.isClass=Nu;var qu=(e,r)=>r&&en(r)&&e in r?r[e]:void 0;L.getConfigValue=qu;var Du=(...e)=>Reflect.apply(Object.assign,Object,e);L.assign=Du;var Vu=(e,r,t={})=>e.map(r).reduce((n,i)=>(0,L.assign)(n,i),t);L.arrToObj=Vu;var xu=(e,r)=>{try{let t=Object.keys(e);return(0,Mu.inArray)(t,r)}catch(t){return!1}};L.objectHasKey=xu;var Uu=e=>Object.freeze(e);L.readOnly=Uu});var tn=y(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.isEmpty=te.notEmpty=te.isNotEmpty=te.isEmptyObj=void 0;var _s=he(),Ku=e=>e&&(0,_s.isPlainObject)(e)&&Object.keys(e).length===0;te.isEmptyObj=Ku;var Gu=e=>e!=null&&(e+"").trim()!=="";te.isNotEmpty=Gu;function ms(e,r=!1){return Array.isArray(e)?r?!!e.length:!1:(0,_s.isPlainObject)(e)?r?!(0,te.isEmptyObj)(e):!1:(0,te.isNotEmpty)(e)}te.notEmpty=ms;var Bu=(e,r)=>!ms(e,r);te.isEmpty=Bu});var rn=y($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.isAsyncFunction=$e.isFunction=void 0;var gs=Ge(),ys=["asyncfunction","function"],$u=function(e,r=!1){let t=(0,gs.trueTypeOf)(e);return ys.includes(t)?!0:(r&&console.error(`Expect to be Function type! Got ${typeof e}`),!1)};$e.isFunction=$u;function Ju(e){return(0,gs.trueTypeOf)(e)===ys[0]}$e.isAsyncFunction=Ju});var nn=y(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.queuePromisesProcess=Ee.chainProcessPromises=Ee.chainPromises=void 0;var vs=Be(),Hu=he();function Wu(e,r=!1){return e.reduce((t,n)=>t.then(i=>n.then(s=>r===!1?[...i,s]:(0,vs.merge)(i,s))),Promise.resolve(r===!1?[]:(0,Hu.isPlainObject)(r)?r:{}))}Ee.chainPromises=Wu;function bs(e,...r){return(...t)=>r.reduce((n,i)=>n.then(s=>i(s)),Reflect.apply(e,null,t))}Ee.chainProcessPromises=bs;function zu(e,...r){let t=(0,vs.flatMap)(e),n=Reflect.apply(bs,null,t);return Reflect.apply(n,null,r)}Ee.queuePromisesProcess=zu});var sn=y(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.checkString=void 0;var Xu=Be();function Zu(e){return(e+"").trim()!==""?(0,Xu.isString)(e):!1}Lt.checkString=Zu});var on=y(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.checkBoolean=void 0;function Qu(e){return e!=null&&typeof e=="boolean"}Nt.checkBoolean=Qu});var an=y(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.checkUnsigned=oe.checkFloat=oe.checkInteger=oe.checkNumber=void 0;var ec=Ge();function tc(e){return(0,ec.trueTypeOf)(e)!=="number"?!1:!isNaN(parseFloat(e+""))}oe.checkNumber=tc;function rc(e){console.log("@TODO checkInteger",e)}oe.checkInteger=rc;function nc(e){console.log("@TODO checkFloat",e)}oe.checkFloat=nc;function ic(e){console.log("@TODO check unsigned",e)}oe.checkUnsigned=ic});var un=y(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.checkAny=void 0;function sc(e,r=!0){return e!==void 0&&e!==""&&(e+"").trim()!==""&&(r===!1||r===!0&&e!==null)}qt.checkAny=sc});var de=y(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.KEYWORDS=v.MAIN_NOT_FOUND_ERR=v.ARG_NOT_MATCH_ERR=v.RESERVED_WORD_ERR=v.VALUE_KEY=v.IDX_KEY=v.PARAMS_KEY=v.NAME_KEY=v.RULES_KEY=v.PATTERN_KEY=v.PLUGIN_FN_KEY=v.PLUGIN_KEY=v.VALIDATE_ASYNC_KEY=v.VALIDATE_KEY=v.ARRAY_TYPE_RGT=v.ARRAY_TYPE_LFT=v.ARRAY_TS_TYPE_LFT=v.OBJECT_TYPE=v.ARRAY_TYPE=v.NUMBER_TYPE=v.STRING_TYPE=v.BOOLEAN_TYPE=v.OR_SEPERATOR=void 0;v.OR_SEPERATOR="|";v.BOOLEAN_TYPE="boolean";v.STRING_TYPE="string";v.NUMBER_TYPE="number";v.ARRAY_TYPE="array";v.OBJECT_TYPE="object";v.ARRAY_TS_TYPE_LFT="Array<";v.ARRAY_TYPE_LFT="array.<";v.ARRAY_TYPE_RGT=">";v.VALIDATE_KEY="validate";v.VALIDATE_ASYNC_KEY="validateAsync";v.PLUGIN_KEY="plugin";v.PLUGIN_FN_KEY="main";v.PATTERN_KEY="pattern";v.RULES_KEY="rules";v.NAME_KEY="name";v.PARAMS_KEY="params";v.IDX_KEY="$$idx";v.VALUE_KEY="$$value";v.RESERVED_WORD_ERR="Your plugin config argument contains reserved keywords";v.ARG_NOT_MATCH_ERR="Your params doesn't matching your main argument list";v.MAIN_NOT_FOUND_ERR="Can not find 'main' method in your plugin config";v.KEYWORDS=[v.PARAMS_KEY,v.PATTERN_KEY,v.VALIDATE_KEY,v.VALIDATE_ASYNC_KEY,v.PLUGIN_KEY,v.RULES_KEY,"name","type","types","server","tstype","value","optional","tmp","pos","lastResult"]});var vt=y(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.combineCheck=void 0;var oc=an(),ac=sn(),uc=on(),cc=un(),cn=de();function lc(e){switch(e){case cn.NUMBER_TYPE:return oc.checkNumber;case cn.STRING_TYPE:return ac.checkString;case cn.BOOLEAN_TYPE:return uc.checkBoolean;default:return cc.checkAny}}Dt.combineCheck=lc});var Vt=y(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.arrayTypeHandler=Oe.isArrayLike=Oe.checkArray=void 0;var fc=he(),ln=vt(),Ae=de(),Es={ts:Ae.ARRAY_TS_TYPE_LFT,jsdoc:Ae.ARRAY_TYPE_LFT};function Os(e,r){if(Array.isArray(e)){if(!r)return!0;let t;return Array.isArray(r)?t=e.filter(n=>{let i=r.length;for(let s=0;s<i;++s){let o=r[s];if(o===Ae.ARRAY_TYPE&&Array.isArray(n)||o===Ae.OBJECT_TYPE&&(0,fc.isPlainObject)(n)||(0,ln.combineCheck)(o)(n))return!1}return!0}):t=e.filter(n=>!(0,ln.combineCheck)(r)(n)),!(t.length>0)}return!1}Oe.checkArray=Os;function As(e,r="ts"){let t=Es[r];if(!t)throw new Error(`Syntax not supported! ${Object.keys(Es)}`);if(e.indexOf(t)>-1&&e.indexOf(Ae.ARRAY_TYPE_RGT)>-1){let n=e.replace(t,"").replace(Ae.ARRAY_TYPE_RGT,"");return n.indexOf(Ae.OR_SEPERATOR)?n.split(Ae.OR_SEPERATOR):[n]}return!1}function hc(e){return As(e)?!1:As(e,"jsdoc")}Oe.isArrayLike=hc;function dc(e,r){let{arg:t}=e;return r.length>1?!t.filter(n=>!(r.length>r.filter(i=>!(0,ln.combineCheck)(i)(n)).length)).length:r.length>r.filter(n=>!Os(t,n)).length}Oe.arrayTypeHandler=dc});var hn=y(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.isEmptyObject=Ce.objectTypeHandler=Ce.checkObject=void 0;var Cs=he(),pc=vt(),fn=Vt();function Rs(e,r){if((0,Cs.isPlainObject)(e)){if(!r)return!0;if(typeof r=="string")return r in e;if((0,fn.checkArray)(r))return typeof r[0]=="string"?_c(e,r):mc(e,r)}return!1}Ce.checkObject=Rs;function _c(e,r){return!r.filter(t=>!(t in e)).length}function mc(e,r){return!r.filter(t=>{let n=e[t.name];return!(t.type.length>t.type.filter(i=>{let s;return n!==void 0?(s=(0,fn.isArrayLike)(i))!==!1?!(0,fn.arrayTypeHandler)({arg:n},s):!(0,pc.combineCheck)(i)(n):!0}).length)}).length}var gc=function(e){let{arg:r,param:t}=e,n=[r];return Array.isArray(t.keys)&&t.keys.length&&n.push(t.keys),Reflect.apply(Rs,null,n)};Ce.objectTypeHandler=gc;var yc=function(e){return(0,Cs.isPlainObject)(e)?!Object.keys(e).length:!1};Ce.isEmptyObject=yc});var pe=y((rd,Kt)=>{var Ps,ws,Ts,Ss,Fs,js,Is,ks,Ys,xt,dn,Ms,Ls,Ns,Je,qs,Ds,Vs,xs,Us,Ks,Gs,Bs,$s,Ut;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Kt=="object"&&typeof Kt.exports=="object"?e(t(r,t(Kt.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Ps=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},ws=Object.assign||function(n){for(var i,s=1,o=arguments.length;s<o;s++){i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},Ts=function(n,i){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(n);a<o.length;a++)i.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(n,o[a])&&(s[o[a]]=n[o[a]]);return s},Ss=function(n,i,s,o){var a=arguments.length,u=a<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,s):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,o);else for(var c=n.length-1;c>=0;c--)(f=n[c])&&(u=(a<3?f(u):a>3?f(i,s,u):f(i,s))||u);return a>3&&u&&Object.defineProperty(i,s,u),u},Fs=function(n,i){return function(s,o){i(s,o,n)}},js=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Is=function(n,i,s,o){function a(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function c(d){try{l(o.next(d))}catch(_){f(_)}}function h(d){try{l(o.throw(d))}catch(_){f(_)}}function l(d){d.done?u(d.value):a(d.value).then(c,h)}l((o=o.apply(n,i||[])).next())})},ks=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,a,u,f;return f={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function c(l){return function(d){return h([l,d])}}function h(l){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,a=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){s=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){s.label=l[1];break}if(l[0]===6&&s.label<u[1]){s.label=u[1],u=l;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(l);break}u[2]&&s.ops.pop(),s.trys.pop();continue}l=i.call(n,s)}catch(d){l=[6,d],a=0}finally{o=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ys=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Ut(i,n,s)},Ut=Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]},xt=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],o=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},dn=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var o=s.call(n),a,u=[],f;try{for(;(i===void 0||i-- >0)&&!(a=o.next()).done;)u.push(a.value)}catch(c){f={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(f)throw f.error}}return u},Ms=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(dn(arguments[i]));return n},Ls=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var o=Array(n),a=0,i=0;i<s;i++)for(var u=arguments[i],f=0,c=u.length;f<c;f++,a++)o[a]=u[f];return o},Ns=function(n,i,s){if(s||arguments.length===2)for(var o=0,a=i.length,u;o<a;o++)(u||!(o in i))&&(u||(u=Array.prototype.slice.call(i,0,o)),u[o]=i[o]);return n.concat(u||Array.prototype.slice.call(i))},Je=function(n){return this instanceof Je?(this.v=n,this):new Je(n)},qs=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(n,i||[]),a,u=[];return a={},f("next"),f("throw"),f("return"),a[Symbol.asyncIterator]=function(){return this},a;function f(m){o[m]&&(a[m]=function(g){return new Promise(function(b,P){u.push([m,g,b,P])>1||c(m,g)})})}function c(m,g){try{h(o[m](g))}catch(b){_(u[0][3],b)}}function h(m){m.value instanceof Je?Promise.resolve(m.value.v).then(l,d):_(u[0][2],m)}function l(m){c("next",m)}function d(m){c("throw",m)}function _(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Ds=function(n){var i,s;return i={},o("next"),o("throw",function(a){throw a}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(a,u){i[a]=n[a]?function(f){return(s=!s)?{value:Je(n[a](f)),done:a==="return"}:u?u(f):f}:u}},Vs=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof xt=="function"?xt(n):n[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(u){s[u]=n[u]&&function(f){return new Promise(function(c,h){f=n[u](f),a(c,h,f.done,f.value)})}}function a(u,f,c,h){Promise.resolve(h).then(function(l){u({value:l,done:c})},f)}},xs=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Us=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ut(i,n,s);return t(i,n),i},Ks=function(n){return n&&n.__esModule?n:{default:n}},Gs=function(n,i,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(n):o?o.value:i.get(n)},Bs=function(n,i,s,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(n,s):a?a.value=s:i.set(n,s),s},$s=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},e("__extends",Ps),e("__assign",ws),e("__rest",Ts),e("__decorate",Ss),e("__param",Fs),e("__metadata",js),e("__awaiter",Is),e("__generator",ks),e("__exportStar",Ys),e("__createBinding",Ut),e("__values",xt),e("__read",dn),e("__spread",Ms),e("__spreadArrays",Ls),e("__spreadArray",Ns),e("__await",Je),e("__asyncGenerator",qs),e("__asyncDelegator",Ds),e("__asyncValues",Vs),e("__makeTemplateObject",xs),e("__importStar",Us),e("__importDefault",Ks),e("__classPrivateFieldGet",Gs),e("__classPrivateFieldSet",Bs),e("__classPrivateFieldIn",$s)})});var Zs=y(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.checkUnionSync=Re.checkUnion=Re.generateReversePromisesFn=void 0;var Js=pe(),vc=nn(),Hs=vt(),Ws=Vt(),zs=hn(),Gt=de();function pn(e,r){return e||r}function Xs(e,r,t){return r.map((n,i)=>{let s=[e];switch(t&&t[i]&&s.push(t[i]),n){case Gt.ARRAY_TYPE:return()=>pn(Reflect.apply(Ws.checkArray,null,s),n);case Gt.OBJECT_TYPE:return()=>pn(Reflect.apply(zs.checkObject,null,s),n);default:return()=>pn((0,Hs.combineCheck)(n)(e),n)}}).map(n=>()=>Js.__awaiter(this,void 0,void 0,function*(){let i=n();return i===!0?Promise.reject(!0):Promise.resolve(i)}))}Re.generateReversePromisesFn=Xs;function bc(e,r,t){return Js.__awaiter(this,void 0,void 0,function*(){let n=Xs(e,r,t);return new Promise((i,s)=>{(0,vc.queuePromisesProcess)(n,r[0]).then(o=>{s(o)}).catch(o=>{i(o)})})})}Re.checkUnion=bc;function Ec(e,r){let t=r.length;for(let n=0;n<t;++n){let i=r[n];switch(i){case Gt.ARRAY_TYPE:if((0,Ws.checkArray)(e))return!0;break;case Gt.OBJECT_TYPE:if((0,zs.checkObject)(e))return!0;break;default:if((0,Hs.combineCheck)(i)(e))return!0}}return!1}Re.checkUnionSync=Ec});var _n=y(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.reversePromisifyResult=He.promisify=void 0;var Qs=pe();function Ac(e){return(...r)=>Qs.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.resolve(t):Promise.reject(t)})}He.promisify=Ac;function Oc(e){return(...r)=>Qs.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.reject(t):Promise.resolve(t)})}He.reversePromisifyResult=Oc});var bt=y(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.len=void 0;function Cc(e){return typeof e=="string"?e.length:e}Bt.len=Cc});var gn=y(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var Rc=bt(),Pc="moreThan";function wc(e,r){return(0,Rc.len)(r)>e}mn.default={name:Pc,main:wc,params:["num"]}});var vn=y(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var Tc=bt(),Sc="lessThan";function Fc(e,r){return(0,Tc.len)(r)<e}yn.default={name:Sc,main:Fc,params:["num"]}});var to=y(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var eo=pe(),jc=eo.__importDefault(gn()),Ic=eo.__importDefault(vn()),kc="between";function Yc(e,r,t){return Ic.default.main(e,t)&&jc.default.main(r,t)}bn.default={main:Yc,name:kc,params:["max","min"]}});var ro=y(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Mc="email";function Lc(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}En.default={main:Lc,name:Mc}});var no=y(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.name=void 0;We.name="int";function Nc(e){return Number.isInteger(e)}We.default={name:We.name,main:Nc}});var On=y(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var qc=bt(),Dc="lessThanEqual";function Vc(e,r){return(0,qc.len)(r)<=e}An.default={name:Dc,main:Vc,params:["num"]}});var Rn=y(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var xc=bt(),Uc="moreThanEqual";function Kc(e,r){return(0,xc.len)(r)>=e}Cn.default={name:Uc,main:Kc,params:["num"]}});var io=y(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Gc="unit";function Bc(e){return Number.isInteger(e)&&e>=0}Pn.default={name:Gc,main:Bc}});var oo=y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var so=pe(),$c=so.__importDefault(Rn()),Jc=so.__importDefault(On()),Hc="main";function Wc(e,r,t){return Jc.default.main(e,t)&&$c.default.main(r,t)}wn.default={name:Hc,main:Wc,params:["max","min"]}});var Jt=y($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.plugins=void 0;var _e=pe(),zc=_e.__importDefault(to()),Xc=_e.__importDefault(ro()),Zc=_e.__importDefault(no()),Qc=_e.__importDefault(On()),el=_e.__importDefault(vn()),tl=_e.__importDefault(Rn()),rl=_e.__importDefault(gn()),nl=_e.__importDefault(io()),il=_e.__importDefault(oo());$t.plugins=[zc.default,Xc.default,Zc.default,Qc.default,el.default,tl.default,rl.default,nl.default,il.default]});var Sn=y(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.getPlugin=ze.curryPlugin=void 0;var ao=pe(),sl=Be(),Tn=ao.__importDefault(gt()),ol=de(),al=Jt();function ul(e,r){let{plugin:t}=e;if(t){let n=r[ol.PARAMS_KEY];if(n){if(!cl(e,n))throw new Tn.default(`Expected params: ${n.join(",")} not found!`);let i=n.map(s=>e[s]);return Reflect.apply((0,sl.curry)(r.main),null,i)}else throw new Tn.default(`This plugin ${r.name} can not be curry`)}throw new Tn.default("Unable to find plugin in config")}ze.curryPlugin=ul;function cl(e,r){return r.filter(t=>e[t]).length===r.length}function ll(e){let r=al.plugins[e];if(r)return r=r==="_"?e:r,Promise.resolve().then(()=>ao.__importStar(C("./"+[r,"js"].join("."))));throw new Error(`${e} is not found`)}ze.getPlugin=ll});var co=y(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getRegex=Xe.isRegExp=void 0;var fl=Be();function uo(e){return e instanceof RegExp}Xe.isRegExp=uo;function hl(e){switch(!0){case uo(e):return e;case(0,fl.isString)(e):return new RegExp(e);default:return!1}}Xe.getRegex=hl});var fo=y((yd,lo)=>{var Ze=1e3,Qe=Ze*60,et=Qe*60,Ye=et*24,dl=Ye*7,pl=Ye*365.25;lo.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return _l(e);if(t==="number"&&isFinite(e))return r.long?gl(e):ml(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function _l(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*pl;case"weeks":case"week":case"w":return t*dl;case"days":case"day":case"d":return t*Ye;case"hours":case"hour":case"hrs":case"hr":case"h":return t*et;case"minutes":case"minute":case"mins":case"min":case"m":return t*Qe;case"seconds":case"second":case"secs":case"sec":case"s":return t*Ze;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ml(e){var r=Math.abs(e);return r>=Ye?Math.round(e/Ye)+"d":r>=et?Math.round(e/et)+"h":r>=Qe?Math.round(e/Qe)+"m":r>=Ze?Math.round(e/Ze)+"s":e+"ms"}function gl(e){var r=Math.abs(e);return r>=Ye?Ht(e,r,Ye,"day"):r>=et?Ht(e,r,et,"hour"):r>=Qe?Ht(e,r,Qe,"minute"):r>=Ze?Ht(e,r,Ze,"second"):e+" ms"}function Ht(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var Fn=y((vd,ho)=>{function yl(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=fo(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}ho.exports=yl});var po=y((Z,Wt)=>{Z.formatArgs=bl;Z.save=El;Z.load=Al;Z.useColors=vl;Z.storage=Ol();Z.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function vl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bl(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Wt.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Z.log=console.debug||console.log||(()=>{});function El(e){try{e?Z.storage.setItem("debug",e):Z.storage.removeItem("debug")}catch{}}function Al(){let e;try{e=Z.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Ol(){try{return localStorage}catch{}}Wt.exports=Fn()(Z);var{formatters:Cl}=Wt.exports;Cl.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var mo=y((bd,_o)=>{"use strict";_o.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var vo=y((Ed,yo)=>{"use strict";var Rl=C("os"),go=C("tty"),re=mo(),{env:q}=process,Pe;re("no-color")||re("no-colors")||re("color=false")||re("color=never")?Pe=0:(re("color")||re("colors")||re("color=true")||re("color=always"))&&(Pe=1);"FORCE_COLOR"in q&&(q.FORCE_COLOR==="true"?Pe=1:q.FORCE_COLOR==="false"?Pe=0:Pe=q.FORCE_COLOR.length===0?1:Math.min(parseInt(q.FORCE_COLOR,10),3));function jn(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function In(e,r){if(Pe===0)return 0;if(re("color=16m")||re("color=full")||re("color=truecolor"))return 3;if(re("color=256"))return 2;if(e&&!r&&Pe===void 0)return 0;let t=Pe||0;if(q.TERM==="dumb")return t;if(process.platform==="win32"){let n=Rl.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in q)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in q)||q.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in q)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(q.TEAMCITY_VERSION)?1:0;if(q.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in q){let n=parseInt((q.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(q.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(q.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(q.TERM)||"COLORTERM"in q?1:t}function Pl(e){let r=In(e,e&&e.isTTY);return jn(r)}yo.exports={supportsColor:Pl,stdout:jn(In(!0,go.isatty(1))),stderr:jn(In(!0,go.isatty(2)))}});var Eo=y((x,Xt)=>{var wl=C("tty"),zt=C("util");x.init=Yl;x.log=jl;x.formatArgs=Sl;x.save=Il;x.load=kl;x.useColors=Tl;x.destroy=zt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");x.colors=[6,2,3,4,5,1];try{let e=vo();e&&(e.stderr||e).level>=2&&(x.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}x.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function Tl(){return"colors"in x.inspectOpts?Boolean(x.inspectOpts.colors):wl.isatty(process.stderr.fd)}function Sl(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Xt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Fl()+r+" "+e[0]}function Fl(){return x.inspectOpts.hideDate?"":new Date().toISOString()+" "}function jl(...e){return process.stderr.write(zt.format(...e)+`
`)}function Il(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function kl(){return process.env.DEBUG}function Yl(e){e.inspectOpts={};let r=Object.keys(x.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=x.inspectOpts[r[t]]}Xt.exports=Fn()(x);var{formatters:bo}=Xt.exports;bo.o=function(e){return this.inspectOpts.colors=this.useColors,zt.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};bo.O=function(e){return this.inspectOpts.colors=this.useColors,zt.inspect(e,this.inspectOpts)}});var Yn=y((Ad,kn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kn.exports=po():kn.exports=Eo()});var Mn=y(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.patternPluginFanctory=I.isResultPackage=I.successThen=I.constructRuleCb=I.extractFnArgs=I.paramMatches=I.searchParamsKey=I.pluginHasFunc=I.checkPluginArg=void 0;var Et=pe(),Ml=Et.__importDefault(Yt()),Ll=Et.__importDefault(gt()),ae=de(),Nl=yt(),ql=he(),Dl=rn(),Vl=co(),xl=Et.__importDefault(Yn()),Zt=(0,xl.default)("jsonql:validator-core:common");function Ao(e){return!(e.filter(r=>ae.KEYWORDS.includes(r)).length>0)}I.checkPluginArg=Ao;function Ul(e){return e[ae.PLUGIN_FN_KEY]&&(0,Dl.isFunction)(e[ae.PLUGIN_FN_KEY])}I.pluginHasFunc=Ul;function Oo(e){let r=Co(e.main.toString());return r.pop(),r}function Kl(e){let r=Oo(e);if(r.length===0)return e;if(!Ao(r))throw new Ll.default(ae.RESERVED_WORD_ERR);return e[ae.PARAMS_KEY]=r,e}I.searchParamsKey=Kl;function Gl(e){let r=Oo(e),t=r.length;if(t===0&&!e[ae.PARAMS_KEY])return!0;let n=e.params!==void 0&&Array.isArray(e.params)?e.params:!1;return n===!1?!1:t>0&&t===n.length&&!r.filter((i,s)=>i!==n[s]).length}I.paramMatches=Gl;function Co(e){return e.split("(")[1].split(")")[0].split(",").map(r=>r.trim()).filter(r=>r!=="")}I.extractFnArgs=Co;function Bl(e,r,t){return(n,i,s)=>Et.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(r,null,[n]).then(Ro(e,n,i,s)).catch(o=>(Zt("failed",e,n,o,s),Promise.reject(new Ml.default(t,s))))})}I.constructRuleCb=Bl;function Ro(e,r,t,n){return i=>{let s=n[0];Zt("passed",e,r,i,n),Zt("lastResult",t);let o={[ae.IDX_KEY]:s,[ae.VALUE_KEY]:r};if(t===void 0)return{[e]:o};if(e in t){let a=t[e];return Po(a)?a.includes(o)||t[e].push(o):a[ae.IDX_KEY]!==s&&(t[e]=(0,Nl.toArray)(t[e]).concat([o])),t}return(0,ql.assign)(t,{[e]:o})}}I.successThen=Ro;function Po(e,r=ae.IDX_KEY){try{if(Array.isArray(e))return!!e.filter(t=>r in t).length}catch(t){Zt("isResultPackage",t)}return!1}I.isResultPackage=Po;function $l(e){let r=(0,Vl.getRegex)(e);return t=>Et.__awaiter(this,void 0,void 0,function*(){return r.test(t)?Promise.resolve(!0):Promise.reject(!1)})}I.patternPluginFanctory=$l});var er=y(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ValidatorPlugins=void 0;var To=pe(),At=To.__importDefault(gt()),N=de(),Jl=Sn(),wo=_n(),tt=Mn(),Hl=Jt(),Wl=To.__importDefault(Yn()),Me=(0,Wl.default)("jsonql:validator-core:validator-plugin"),Ln=class{constructor(r){this.$version=r,this._plugins=new Map,this._internalPluginNames=[],Hl.plugins.forEach(t=>{let n=t[N.NAME_KEY];this._internalPluginNames.push(n),this._registerPlugin(n,t,!0)})}lookupPlugin(r,t){let n=r[N.PLUGIN_KEY];if(n&&this._plugins.has(n)){let i=this._plugins.get(n);if(i[N.PLUGIN_FN_KEY]&&!i[N.PARAMS_KEY]&&(i[N.VALIDATE_ASYNC_KEY]=(0,wo.promisify)(i[N.PLUGIN_FN_KEY])),i&&i[N.VALIDATE_ASYNC_KEY]&&!i[N.PARAMS_KEY])return(0,tt.constructRuleCb)(t,i[N.VALIDATE_ASYNC_KEY],n);if(i&&i[N.PARAMS_KEY]){Me("pluginConfig --->",i),Me("input----------->",r);let s=r;return(0,tt.constructRuleCb)(t,(0,wo.promisify)((0,Jl.curryPlugin)(s,i)),n)}}throw Me("lookupPlugin","unable to find",n),new At.default(`Unable to find plugin: ${n}`)}registerPlugin(r,t){this._registerPlugin(r,t)}_registerExternalPlugin(r,t){this._registerPlugin(r,t,!1,!0)}export(r=!0){let t=[];return this._plugins.forEach((n,i)=>{!this.isBuiltIn(i)&&n.external===r&&t.push(n)}),t}isBuiltIn(r){return this._internalPluginNames.includes(r)}_registerPlugin(r,t,n=!1,i=!1){if(!n){if(this._plugins.has(r))throw new At.default(`plugin ${r} already existed!`);if(!(0,tt.pluginHasFunc)(t))throw Me("registerPlugin",N.MAIN_NOT_FOUND_ERR),new At.default(N.MAIN_NOT_FOUND_ERR);if(t[N.PARAMS_KEY]===void 0)t=(0,tt.searchParamsKey)(t),Me("auto generate params for plugin",t);else if(t[N.PARAMS_KEY]!==void 0){if(!(0,tt.checkPluginArg)(t[N.PARAMS_KEY]))throw Me("registerPlugin",N.RESERVED_WORD_ERR),new At.default(N.RESERVED_WORD_ERR);if(!(0,tt.paramMatches)(t))throw Me("registerPlugin",N.ARG_NOT_MATCH_ERR),new At.default(N.ARG_NOT_MATCH_ERR)}}t.name=r,t.external=i,this._plugins.set(r,t)}};Qt.ValidatorPlugins=Ln});var Vn=y(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.VALUE_KEY=p.IDX_KEY=p.PARAMS_KEY=p.NAME_KEY=p.RULES_KEY=p.PATTERN_KEY=p.PLUGIN_FN_KEY=p.PLUGIN_KEY=p.VALIDATE_ASYNC_KEY=p.VALIDATE_KEY=p.KEYWORDS=p.ARRAY_TS_TYPE_LFT=p.ARRAY_TYPE_RGT=p.ARRAY_TYPE_LFT=p.OR_SEPERATOR=p.OBJECT_TYPE=p.ARRAY_TYPE=p.NUMBER_TYPE=p.STRING_TYPE=p.BOOLEAN_TYPE=p.ValidatorPlugins=p.patternPluginFanctory=p.isResultPackage=p.successThen=p.constructRuleCb=p.pluginHasFunc=p.checkPluginArg=p.curryPlugin=p.plugins=p.reversePromisifyResult=p.promisify=p.generateReversePromisesFn=p.checkUnionSync=p.checkUnion=p.combineCheck=p.isEmptyObject=p.objectTypeHandler=p.checkObject=p.arrayTypeHandler=p.isArrayLike=p.checkArray=p.checkAny=p.checkUnsigned=p.checkFloat=p.checkInteger=p.checkNumber=p.checkBoolean=p.checkString=void 0;var zl=sn();Object.defineProperty(p,"checkString",{enumerable:!0,get:function(){return zl.checkString}});var Xl=on();Object.defineProperty(p,"checkBoolean",{enumerable:!0,get:function(){return Xl.checkBoolean}});var tr=an();Object.defineProperty(p,"checkNumber",{enumerable:!0,get:function(){return tr.checkNumber}});Object.defineProperty(p,"checkInteger",{enumerable:!0,get:function(){return tr.checkInteger}});Object.defineProperty(p,"checkFloat",{enumerable:!0,get:function(){return tr.checkFloat}});Object.defineProperty(p,"checkUnsigned",{enumerable:!0,get:function(){return tr.checkUnsigned}});var Zl=un();Object.defineProperty(p,"checkAny",{enumerable:!0,get:function(){return Zl.checkAny}});var Nn=Vt();Object.defineProperty(p,"checkArray",{enumerable:!0,get:function(){return Nn.checkArray}});Object.defineProperty(p,"isArrayLike",{enumerable:!0,get:function(){return Nn.isArrayLike}});Object.defineProperty(p,"arrayTypeHandler",{enumerable:!0,get:function(){return Nn.arrayTypeHandler}});var qn=hn();Object.defineProperty(p,"checkObject",{enumerable:!0,get:function(){return qn.checkObject}});Object.defineProperty(p,"objectTypeHandler",{enumerable:!0,get:function(){return qn.objectTypeHandler}});Object.defineProperty(p,"isEmptyObject",{enumerable:!0,get:function(){return qn.isEmptyObject}});var Ql=vt();Object.defineProperty(p,"combineCheck",{enumerable:!0,get:function(){return Ql.combineCheck}});var Dn=Zs();Object.defineProperty(p,"checkUnion",{enumerable:!0,get:function(){return Dn.checkUnion}});Object.defineProperty(p,"checkUnionSync",{enumerable:!0,get:function(){return Dn.checkUnionSync}});Object.defineProperty(p,"generateReversePromisesFn",{enumerable:!0,get:function(){return Dn.generateReversePromisesFn}});var So=_n();Object.defineProperty(p,"promisify",{enumerable:!0,get:function(){return So.promisify}});Object.defineProperty(p,"reversePromisifyResult",{enumerable:!0,get:function(){return So.reversePromisifyResult}});var ef=Jt();Object.defineProperty(p,"plugins",{enumerable:!0,get:function(){return ef.plugins}});var tf=Sn();Object.defineProperty(p,"curryPlugin",{enumerable:!0,get:function(){return tf.curryPlugin}});var rt=Mn();Object.defineProperty(p,"checkPluginArg",{enumerable:!0,get:function(){return rt.checkPluginArg}});Object.defineProperty(p,"pluginHasFunc",{enumerable:!0,get:function(){return rt.pluginHasFunc}});Object.defineProperty(p,"constructRuleCb",{enumerable:!0,get:function(){return rt.constructRuleCb}});Object.defineProperty(p,"successThen",{enumerable:!0,get:function(){return rt.successThen}});Object.defineProperty(p,"isResultPackage",{enumerable:!0,get:function(){return rt.isResultPackage}});Object.defineProperty(p,"patternPluginFanctory",{enumerable:!0,get:function(){return rt.patternPluginFanctory}});var rf=er();Object.defineProperty(p,"ValidatorPlugins",{enumerable:!0,get:function(){return rf.ValidatorPlugins}});var k=de();Object.defineProperty(p,"BOOLEAN_TYPE",{enumerable:!0,get:function(){return k.BOOLEAN_TYPE}});Object.defineProperty(p,"STRING_TYPE",{enumerable:!0,get:function(){return k.STRING_TYPE}});Object.defineProperty(p,"NUMBER_TYPE",{enumerable:!0,get:function(){return k.NUMBER_TYPE}});Object.defineProperty(p,"ARRAY_TYPE",{enumerable:!0,get:function(){return k.ARRAY_TYPE}});Object.defineProperty(p,"OBJECT_TYPE",{enumerable:!0,get:function(){return k.OBJECT_TYPE}});Object.defineProperty(p,"OR_SEPERATOR",{enumerable:!0,get:function(){return k.OR_SEPERATOR}});Object.defineProperty(p,"ARRAY_TYPE_LFT",{enumerable:!0,get:function(){return k.ARRAY_TYPE_LFT}});Object.defineProperty(p,"ARRAY_TYPE_RGT",{enumerable:!0,get:function(){return k.ARRAY_TYPE_RGT}});Object.defineProperty(p,"ARRAY_TS_TYPE_LFT",{enumerable:!0,get:function(){return k.ARRAY_TS_TYPE_LFT}});Object.defineProperty(p,"KEYWORDS",{enumerable:!0,get:function(){return k.KEYWORDS}});Object.defineProperty(p,"VALIDATE_KEY",{enumerable:!0,get:function(){return k.VALIDATE_KEY}});Object.defineProperty(p,"VALIDATE_ASYNC_KEY",{enumerable:!0,get:function(){return k.VALIDATE_ASYNC_KEY}});Object.defineProperty(p,"PLUGIN_KEY",{enumerable:!0,get:function(){return k.PLUGIN_KEY}});Object.defineProperty(p,"PLUGIN_FN_KEY",{enumerable:!0,get:function(){return k.PLUGIN_FN_KEY}});Object.defineProperty(p,"PATTERN_KEY",{enumerable:!0,get:function(){return k.PATTERN_KEY}});Object.defineProperty(p,"RULES_KEY",{enumerable:!0,get:function(){return k.RULES_KEY}});Object.defineProperty(p,"NAME_KEY",{enumerable:!0,get:function(){return k.NAME_KEY}});Object.defineProperty(p,"PARAMS_KEY",{enumerable:!0,get:function(){return k.PARAMS_KEY}});Object.defineProperty(p,"IDX_KEY",{enumerable:!0,get:function(){return k.IDX_KEY}});Object.defineProperty(p,"VALUE_KEY",{enumerable:!0,get:function(){return k.VALUE_KEY}})});var Ot=y(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.RETURN_AS_RAW=O.RETURN_AS_ARR=O.RETURN_AS_OBJ=O.TS_TYPE_NAME=O.TS_TYPE_REF=O.TS_TYPE_LIT=O.DEFAULT_VALUE=O.TS_ARRAY_TYPE=O.TS_UNION_TYPE=O.SPREAD_ARG_TYPE=O.IS_SPREAD_VALUES_KEY=O.SPREAD_PREFIX=O.EXCEPTION_CASE_ERR=O.PARAMS_NOT_ARRAY_ERR=O.ARGS_NOT_ARRAY_ERR=void 0;O.ARGS_NOT_ARRAY_ERR="Input argument is not an array!";O.PARAMS_NOT_ARRAY_ERR="Parameter is not an array";O.EXCEPTION_CASE_ERR="Exception happened don't know how to handle it";O.SPREAD_PREFIX="$_spread_arg_";O.IS_SPREAD_VALUES_KEY="$$is_spread_values";O.SPREAD_ARG_TYPE="RestElement";O.TS_UNION_TYPE="TsUnionType";O.TS_ARRAY_TYPE="TsArrayType";O.DEFAULT_VALUE="defaultvalue";O.TS_TYPE_LIT="TsTypeLiteral";O.TS_TYPE_REF="TsTypeReference";O.TS_TYPE_NAME="tstype";O.RETURN_AS_OBJ="object";O.RETURN_AS_ARR="array";O.RETURN_AS_RAW="raw"});var jo=y((wd,Fo)=>{var nt=1e3,it=nt*60,st=it*60,Le=st*24,nf=Le*7,sf=Le*365.25;Fo.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return of(e);if(t==="number"&&isFinite(e))return r.long?uf(e):af(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function of(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*sf;case"weeks":case"week":case"w":return t*nf;case"days":case"day":case"d":return t*Le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*st;case"minutes":case"minute":case"mins":case"min":case"m":return t*it;case"seconds":case"second":case"secs":case"sec":case"s":return t*nt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function af(e){var r=Math.abs(e);return r>=Le?Math.round(e/Le)+"d":r>=st?Math.round(e/st)+"h":r>=it?Math.round(e/it)+"m":r>=nt?Math.round(e/nt)+"s":e+"ms"}function uf(e){var r=Math.abs(e);return r>=Le?rr(e,r,Le,"day"):r>=st?rr(e,r,st,"hour"):r>=it?rr(e,r,it,"minute"):r>=nt?rr(e,r,nt,"second"):e+" ms"}function rr(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var xn=y((Td,Io)=>{function cf(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=jo(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Io.exports=cf});var ko=y((Q,nr)=>{Q.formatArgs=ff;Q.save=hf;Q.load=df;Q.useColors=lf;Q.storage=pf();Q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function lf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ff(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+nr.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Q.log=console.debug||console.log||(()=>{});function hf(e){try{e?Q.storage.setItem("debug",e):Q.storage.removeItem("debug")}catch{}}function df(){let e;try{e=Q.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function pf(){try{return localStorage}catch{}}nr.exports=xn()(Q);var{formatters:_f}=nr.exports;_f.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var Mo=y((Sd,Yo)=>{"use strict";Yo.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var qo=y((Fd,No)=>{"use strict";var mf=C("os"),Lo=C("tty"),ne=Mo(),{env:D}=process,we;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?we=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(we=1);"FORCE_COLOR"in D&&(D.FORCE_COLOR==="true"?we=1:D.FORCE_COLOR==="false"?we=0:we=D.FORCE_COLOR.length===0?1:Math.min(parseInt(D.FORCE_COLOR,10),3));function Un(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Kn(e,r){if(we===0)return 0;if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2;if(e&&!r&&we===void 0)return 0;let t=we||0;if(D.TERM==="dumb")return t;if(process.platform==="win32"){let n=mf.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in D)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in D)||D.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in D)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(D.TEAMCITY_VERSION)?1:0;if(D.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in D){let n=parseInt((D.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(D.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(D.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(D.TERM)||"COLORTERM"in D?1:t}function gf(e){let r=Kn(e,e&&e.isTTY);return Un(r)}No.exports={supportsColor:gf,stdout:Un(Kn(!0,Lo.isatty(1))),stderr:Un(Kn(!0,Lo.isatty(2)))}});var Vo=y((U,sr)=>{var yf=C("tty"),ir=C("util");U.init=Rf;U.log=Af;U.formatArgs=bf;U.save=Of;U.load=Cf;U.useColors=vf;U.destroy=ir.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");U.colors=[6,2,3,4,5,1];try{let e=qo();e&&(e.stderr||e).level>=2&&(U.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}U.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function vf(){return"colors"in U.inspectOpts?Boolean(U.inspectOpts.colors):yf.isatty(process.stderr.fd)}function bf(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+sr.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Ef()+r+" "+e[0]}function Ef(){return U.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Af(...e){return process.stderr.write(ir.format(...e)+`
`)}function Of(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Cf(){return process.env.DEBUG}function Rf(e){e.inspectOpts={};let r=Object.keys(U.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=U.inspectOpts[r[t]]}sr.exports=xn()(U);var{formatters:Do}=sr.exports;Do.o=function(e){return this.inspectOpts.colors=this.useColors,ir.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};Do.O=function(e){return this.inspectOpts.colors=this.useColors,ir.inspect(e,this.inspectOpts)}});var or=y((jd,Gn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Gn.exports=ko():Gn.exports=Vo()});var Bn=y(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.getKey=Y.checkDuplicateRules=Y.getOptionalValue=Y.unwrapPreparedValidateResult=Y.processValidateResultsAsArrOfObj=Y.processValidateResults=Y.processValidateResultsAsObj=Y.processValidateResultsAsArr=Y.createAutomaticRules=void 0;var ue=kt(),T=Vn(),K=Ot(),Pf=tn(),xo=he(),wf=ue.__importDefault(or()),ot=(0,wf.default)("jsonql:validator:class:fn");function Tf(e){return e.map(r=>{let{name:t}=r,n=jf(r),i=r[K.TS_TYPE_NAME]||r.type;return ot("createAutomaticRules",t,i),r[T.RULES_KEY]=[(0,T.constructRuleCb)(t,n,i)],r})}Y.createAutomaticRules=Tf;function Sf(e,r){return ue.__awaiter(this,void 0,void 0,function*(){return Uo(e,r).then(Go)})}Y.processValidateResultsAsArr=Sf;function Ff(e,r){return Ko(e,r).reduce((t,n)=>(0,xo.assign)(t,n),{})}Y.processValidateResultsAsObj=Ff;function Uo(e,r){return ue.__awaiter(this,void 0,void 0,function*(){return e.map(t=>T.VALUE_KEY in r[t]?r[t][T.VALUE_KEY]:(0,T.isResultPackage)(r[t])?{[K.IS_SPREAD_VALUES_KEY]:r[t].map(n=>n[T.VALUE_KEY])}:(ot(`Return result when we couldn't find way to destruct: ${t}`,r[t]),r[t]))})}Y.processValidateResults=Uo;function Ko(e,r){return e.map(t=>{switch(!0){case T.VALUE_KEY in r[t]:return{[t]:r[t][T.VALUE_KEY]};case(0,T.isResultPackage)(r[t]):return{[t]:r[t].map(n=>n[T.VALUE_KEY])};default:return{[t]:r[t]}}})}Y.processValidateResultsAsArrOfObj=Ko;function Go(e){return ue.__awaiter(this,void 0,void 0,function*(){ot("unwrapPreparedValidateResult",e);let r=e.length;if(r===1&&(0,xo.objectHasKey)(e[0],K.IS_SPREAD_VALUES_KEY))return e[0][K.IS_SPREAD_VALUES_KEY];if((0,T.isResultPackage)(e,K.IS_SPREAD_VALUES_KEY)){let t=[];for(let n=0;n<r;++n)K.IS_SPREAD_VALUES_KEY in e[n]?t=t.concat(e[n][K.IS_SPREAD_VALUES_KEY]):t.push(e[n]);return t}return e})}Y.unwrapPreparedValidateResult=Go;function jf(e){switch(ot("getValidateRules ast",e),e[K.TS_TYPE_NAME]){case K.TS_UNION_TYPE:return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.checkUnion)(t,e.type)})};case(K.TS_ARRAY_TYPE||K.SPREAD_ARG_TYPE):return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkArray)(t,e.types)})};case(K.TS_TYPE_REF||K.TS_TYPE_LIT):return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkAny)(t)})};case K.SPREAD_ARG_TYPE:return function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.types))(t)})};default:return(0,T.checkString)(e.type)?(ot("validation type",e.type),function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.type))(t)})}):(ot("getValidateRules",e),function(t){return ue.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(Pf.notEmpty)(t,!0)})})}}function If(e,r){return r.tstype!==K.SPREAD_ARG_TYPE&&e===void 0?r[K.DEFAULT_VALUE]!==void 0?r[K.DEFAULT_VALUE]:void 0:e}Y.getOptionalValue=If;function kf(e){return[T.VALIDATE_KEY,T.VALIDATE_ASYNC_KEY,T.PLUGIN_FN_KEY].filter(r=>e[r]!==void 0)}Y.checkDuplicateRules=kf;function Yf(e){let r=Object.keys(e);return r.length?r[0]:void 0}Y.getKey=Yf});var Jo=y(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.ValidatorBase=void 0;var Ne=kt(),Bo=Ne.__importDefault(Yt()),Mf=Ne.__importDefault(gt()),Lf=tn(),Nf=yt(),ar=he(),$o=rn(),qf=nn(),F=Vn(),at=Bn(),ur=Ot(),Df=Ne.__importDefault(or()),$=(0,Df.default)("jsonql:validator:validator-base"),$n=class{constructor(r,t){this._validatorPluginsInstance=t,this._astWithBaseRules=(0,at.createAutomaticRules)(r),this._arguments=this._astWithBaseRules.map(n=>n[F.NAME_KEY])}validate(r){let t=this._normalizeArgValues(r);return(0,qf.queuePromisesProcess)(t,void 0)}prepareArgValues(r){return this._normalizeArgValues(r,!1)}get schema(){return this._schema||this._astWithBaseRules}addValidationRules(r){$("addValidationRules",r);let t={};for(let n in r)t[n]=(0,Nf.toArray)(r[n]).map(i=>(0,$o.isFunction)(i)?this._updateInput(i):i);this._createSchema(t)}_updateInput(r){return{[F.VALIDATE_ASYNC_KEY]:(0,$o.isAsyncFunction)(r)?r:(0,F.promisify)(r)}}_normalizeArgValues(r,t=!0){$("_normalizeArgValues",r);let n=this.schema,i=n.length;if(i===0)return[];if(!(0,F.checkArray)(r))throw $(r),new Bo.default(ur.ARGS_NOT_ARRAY_ERR,r);let s=r.length;switch(!0){case s===i:return t===!1?(0,ar.arrToObj)(r,(o,a)=>({[n[a].name]:o})):r.map((o,a)=>this._prepareForExecution(o,n[a],a));case s<i:return $("Values pass less than params"),t===!1?(0,ar.arrToObj)(n,(o,a)=>{let u=(0,at.getOptionalValue)(r[a],o);return{[o.name]:u}}):n.map((o,a)=>{let u=(0,at.getOptionalValue)(r[a],o);return this._prepareForExecution(u,o,a)});case s>i:return $("spread params",s,i),this._processSpreadLikeArg(r,n,t);default:throw new Bo.default(ur.EXCEPTION_CASE_ERR,[s,i])}}_processSpreadLikeArg(r,t,n){let i=t.filter(s=>s.tstype===ur.SPREAD_ARG_TYPE)[0];return n===!1?r.map((s,o)=>t[o]?t[o].name!==i.name?{[t[o].name]:s}:{[i.name]:[s]}:{[i.name]:[s]}).reduce((s,o)=>{if(!(0,at.getKey)(s))return o;let u=(0,at.getKey)(o);return s[u]?(s[u]=s[u].concat(o[u]),s):(0,ar.assign)({},s,o)},{}):r.map((s,o)=>{let a=t[o]||(0,ar.assign)({},i,{name:`${ur.SPREAD_PREFIX}${o}`});return $("spread param",s,a.name),this._prepareForExecution(s,a,o)})}_prepareForExecution(r,t,n){let{rules:i,required:s,name:o}=t;return i&&i.length?i.map((a,u)=>r===void 0&&!s?($("skip the validation",s),f=>Ne.__awaiter(this,void 0,void 0,function*(){return(0,F.successThen)(o,r,f,[n,u])(!0)})):f=>Ne.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(a,null,[r,f,[n,u]]).then(c=>($("Post rule result",c),c))})):($("No rules to run"),()=>Ne.__awaiter(this,void 0,void 0,function*(){return!0}))}_createSchema(r){let t=this._astWithBaseRules;(0,Lf.notEmpty)(r,!0)&&(t=this._applyObjectInput(t,r)),$("_createSchema",t),this._schema=t}_applyObjectInput(r,t){return r.map(n=>{var i;let s=n.name;if(t[s]){let o=t[s].map(u=>(u.name=s,u)),a=this._transformInput(o,s);a&&a.length&&(n[F.RULES_KEY]=(i=n[F.RULES_KEY])===null||i===void 0?void 0:i.concat(a))}return n})}_transformInput(r,t){return $("_transformInput",r),r.map((n,i)=>{let s=(0,at.checkDuplicateRules)(n);if(s.length>1)throw new Error(`You can only set one rule at a time! We found ${s.join(",")}`);let o=n.name||`customPluginName${i}`;switch(!0){case n[F.PLUGIN_KEY]!==void 0:return $("Should got here ----->",n[F.PLUGIN_KEY]),this._lookupPlugin(n,t);case n[F.VALIDATE_KEY]!==void 0:return $(`${F.VALIDATE_KEY} ----->`,n),(0,F.constructRuleCb)(t,(0,F.promisify)(n[F.VALIDATE_KEY]),o);case n[F.VALIDATE_ASYNC_KEY]!==void 0:return $(`${F.VALIDATE_ASYNC_KEY} ---->`,n),(0,F.constructRuleCb)(t,n[F.VALIDATE_ASYNC_KEY],o);default:throw new Mf.default(`unable to find rule for ${t},
            we expect ${F.PLUGIN_KEY}, ${F.VALIDATE_KEY} or ${F.VALIDATE_ASYNC_KEY}`)}})}_lookupPlugin(r,t){try{if(this._validatorPluginsInstance)return $("_lookupPlugin --->",r,t),this._validatorPluginsInstance.lookupPlugin(r,t)}catch(n){$("catch _lookupPlugin error",n)}return(0,F.constructRuleCb)(t,()=>Ne.__awaiter(this,void 0,void 0,function*(){return Promise.reject(!1)}),"NO_PLUGIN_DUMMY_FUNCTION")}};cr.ValidatorBase=$n});var Xo=y(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.Validator=void 0;var fr=kt(),Vf=Jo(),Ho=er(),Wo=Bn(),lr=Ot(),xf=fr.__importDefault(or()),zo=(0,xf.default)("jsonql:validator:class:index"),Jn=class extends Vf.ValidatorBase{constructor(r,t){super(r,t&&t instanceof Ho.ValidatorPlugins?t:new Ho.ValidatorPlugins(-1))}validate(r,t=lr.RETURN_AS_ARR){let n=Object.create(null,{validate:{get:()=>super.validate}});return fr.__awaiter(this,void 0,void 0,function*(){return n.validate.call(this,r).then(i=>{switch(t){case lr.RETURN_AS_RAW:return i;case lr.RETURN_AS_ARR:return this._prepareValidateResultForFuncCall(i);case lr.RETURN_AS_OBJ:default:return this._prepareValidateResultAsObject(i)}})})}registerPlugin(r,t){this._validatorPluginsInstance&&this._validatorPluginsInstance.registerPlugin(r,t)}_prepareValidateResultForFuncCall(r){return fr.__awaiter(this,void 0,void 0,function*(){return zo("validateResult return as array",this._arguments,r),(0,Wo.processValidateResultsAsArr)(this._arguments,r)})}_prepareValidateResultAsObject(r){return fr.__awaiter(this,void 0,void 0,function*(){return zo("validateResult return as object",this._arguments,r),(0,Wo.processValidateResultsAsObj)(this._arguments,r)})}};hr.Validator=Jn});var Zo=y(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.RETURN_AS_RAW=S.RETURN_AS_ARR=S.RETURN_AS_OBJ=S.TS_TYPE_NAME=S.TS_TYPE_REF=S.TS_TYPE_LIT=S.DEFAULT_VALUE=S.TS_ARRAY_TYPE=S.TS_UNION_TYPE=S.SPREAD_ARG_TYPE=S.Validator=void 0;var Uf=Xo();Object.defineProperty(S,"Validator",{enumerable:!0,get:function(){return Uf.Validator}});var ce=Ot();Object.defineProperty(S,"SPREAD_ARG_TYPE",{enumerable:!0,get:function(){return ce.SPREAD_ARG_TYPE}});Object.defineProperty(S,"TS_UNION_TYPE",{enumerable:!0,get:function(){return ce.TS_UNION_TYPE}});Object.defineProperty(S,"TS_ARRAY_TYPE",{enumerable:!0,get:function(){return ce.TS_ARRAY_TYPE}});Object.defineProperty(S,"DEFAULT_VALUE",{enumerable:!0,get:function(){return ce.DEFAULT_VALUE}});Object.defineProperty(S,"TS_TYPE_LIT",{enumerable:!0,get:function(){return ce.TS_TYPE_LIT}});Object.defineProperty(S,"TS_TYPE_REF",{enumerable:!0,get:function(){return ce.TS_TYPE_REF}});Object.defineProperty(S,"TS_TYPE_NAME",{enumerable:!0,get:function(){return ce.TS_TYPE_NAME}});Object.defineProperty(S,"RETURN_AS_OBJ",{enumerable:!0,get:function(){return ce.RETURN_AS_OBJ}});Object.defineProperty(S,"RETURN_AS_ARR",{enumerable:!0,get:function(){return ce.RETURN_AS_ARR}});Object.defineProperty(S,"RETURN_AS_RAW",{enumerable:!0,get:function(){return ce.RETURN_AS_RAW}})});var Qo=y(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.ExternalPluginLoader=void 0;var Kf=er(),Hn=class extends Kf.ValidatorPlugins{registerExternalPlugin(r,t){this._registerExternalPlugin(r,t)}};dr.ExternalPluginLoader=Hn});var ea=y(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.cloneDeep=ut.cloneDeepCheap=void 0;var Gf=Ge(),Bf=e=>JSON.parse(JSON.stringify(e));ut.cloneDeepCheap=Bf;function Ct(e){function r(u){for(let f in e)Object.prototype.hasOwnProperty.call(e,f)&&(u[f]=Ct(e[f]))}function t(){let u={};return r(u),u}function n(){return e.map(function(u){return Ct(u)})}function i(){let u=new Map;for(let[f,c]of e)u.set(f,Ct(c));return u}function s(){let u=new Set;for(let f of e)u.add(Ct(f));return u}function o(){let u=this,f=e.bind(u);return r(f),f}switch((0,Gf.trueTypeOf)(e)){case"object":return t();case"array":return n();case"map":return i();case"set":return s();case"function":return o();default:return e}}ut.cloneDeep=Ct});var ra=y((Dd,ta)=>{var ct=1e3,lt=ct*60,ft=lt*60,qe=ft*24,$f=qe*7,Jf=qe*365.25;ta.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Hf(e);if(t==="number"&&isFinite(e))return r.long?zf(e):Wf(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Hf(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Jf;case"weeks":case"week":case"w":return t*$f;case"days":case"day":case"d":return t*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ft;case"minutes":case"minute":case"mins":case"min":case"m":return t*lt;case"seconds":case"second":case"secs":case"sec":case"s":return t*ct;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Wf(e){var r=Math.abs(e);return r>=qe?Math.round(e/qe)+"d":r>=ft?Math.round(e/ft)+"h":r>=lt?Math.round(e/lt)+"m":r>=ct?Math.round(e/ct)+"s":e+"ms"}function zf(e){var r=Math.abs(e);return r>=qe?pr(e,r,qe,"day"):r>=ft?pr(e,r,ft,"hour"):r>=lt?pr(e,r,lt,"minute"):r>=ct?pr(e,r,ct,"second"):e+" ms"}function pr(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var Xn=y((Vd,na)=>{function Xf(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=ra(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}na.exports=Xf});var ia=y((ee,_r)=>{ee.formatArgs=Qf;ee.save=eh;ee.load=th;ee.useColors=Zf;ee.storage=rh();ee.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ee.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Qf(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+_r.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}ee.log=console.debug||console.log||(()=>{});function eh(e){try{e?ee.storage.setItem("debug",e):ee.storage.removeItem("debug")}catch{}}function th(){let e;try{e=ee.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function rh(){try{return localStorage}catch{}}_r.exports=Xn()(ee);var{formatters:nh}=_r.exports;nh.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var oa=y((xd,sa)=>{"use strict";sa.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var ca=y((Ud,ua)=>{"use strict";var ih=C("os"),aa=C("tty"),ie=oa(),{env:V}=process,Te;ie("no-color")||ie("no-colors")||ie("color=false")||ie("color=never")?Te=0:(ie("color")||ie("colors")||ie("color=true")||ie("color=always"))&&(Te=1);"FORCE_COLOR"in V&&(V.FORCE_COLOR==="true"?Te=1:V.FORCE_COLOR==="false"?Te=0:Te=V.FORCE_COLOR.length===0?1:Math.min(parseInt(V.FORCE_COLOR,10),3));function Zn(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Qn(e,r){if(Te===0)return 0;if(ie("color=16m")||ie("color=full")||ie("color=truecolor"))return 3;if(ie("color=256"))return 2;if(e&&!r&&Te===void 0)return 0;let t=Te||0;if(V.TERM==="dumb")return t;if(process.platform==="win32"){let n=ih.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in V)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in V)||V.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in V)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(V.TEAMCITY_VERSION)?1:0;if(V.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in V){let n=parseInt((V.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(V.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(V.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(V.TERM)||"COLORTERM"in V?1:t}function sh(e){let r=Qn(e,e&&e.isTTY);return Zn(r)}ua.exports={supportsColor:sh,stdout:Zn(Qn(!0,aa.isatty(1))),stderr:Zn(Qn(!0,aa.isatty(2)))}});var fa=y((G,gr)=>{var oh=C("tty"),mr=C("util");G.init=dh;G.log=lh;G.formatArgs=uh;G.save=fh;G.load=hh;G.useColors=ah;G.destroy=mr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");G.colors=[6,2,3,4,5,1];try{let e=ca();e&&(e.stderr||e).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function ah(){return"colors"in G.inspectOpts?Boolean(G.inspectOpts.colors):oh.isatty(process.stderr.fd)}function uh(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+gr.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=ch()+r+" "+e[0]}function ch(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}function lh(...e){return process.stderr.write(mr.format(...e)+`
`)}function fh(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function hh(){return process.env.DEBUG}function dh(e){e.inspectOpts={};let r=Object.keys(G.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=G.inspectOpts[r[t]]}gr.exports=Xn()(G);var{formatters:la}=gr.exports;la.o=function(e){return this.inspectOpts.colors=this.useColors,mr.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};la.O=function(e){return this.inspectOpts.colors=this.useColors,mr.inspect(e,this.inspectOpts)}});var ti=y((Kd,ei)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ei.exports=ia():ei.exports=fa()});var ga=le(Vr());import{join as ph}from"node:path";var ha=le(Zo()),da=le(Qo()),pa=le(Yt()),ri=le(yt()),ni=le(ea());var zn=le(de()),Wn="schema";var _a=le(ti()),Rt=(0,_a.default)("velocejs:validator:main"),yr=class{constructor(r){this._validationRules=new Map;this._validators=new Map;this._plugin=new da.ExternalPluginLoader;this._astMap=(0,ni.cloneDeep)(r);for(let t in this._astMap)this._validators.set(t,new ha.Validator(this._astMap[t],this._plugin))}getValidator(r){if(this._validators.has(r)){let t=this._validators.get(r);return{addValidationRules:this._addValidationRules(r,t),validate:t.validate.bind(t),prepareArgValues:t.prepareArgValues.bind(t)}}throw new pa.default(`${r} validator is not registered!`)}addRules(r,t){let n=this.getValidator(r);return n.addValidationRules(t),n}registerPlugin(r,t){this._plugin.registerPlugin(r,t)}export(){let r={};this._validationRules.forEach((n,i)=>{let s=this._validators.get(i);r[i]={[zn.RULES_KEY]:n,[Wn]:s[Wn]}}),Rt("export schema",r);let t=this._plugin.export();return Rt("plugin configs",t),{schema:r,plugins:t}}checkRuleCanExport(r){let t=r.filter(n=>n.external).map(n=>n.name);return Rt("available externals",t),n=>{let{plugin:i}=n;return i?(Rt("check plugin can export",i),this._plugin.isBuiltIn(i)||t.includes(i)):!1}}_appendRules(r,t){if(this._validationRules.has(r)){let n=this._validationRules.get(r);for(let i in n)t[i]&&(n[i]=n[i].concat((0,ri.toArray)(t[i])));this._validationRules.set(r,n)}else{let n={};for(let i in t)n[i]=(0,ri.toArray)(t[i]);Rt("adding new rule",t,n),this._validationRules.set(r,n)}}_addValidationRules(r,t){return n=>{let i=this._checkInput(n);return this._appendRules(r,i),Reflect.apply(t.addValidationRules,t,[i])}}_checkInput(r){let{name:t}=r;if(t){let n=(0,ni.cloneDeep)(r);return delete n.name,{[t]:n}}return r}};var ya=le(ti()),_h=(0,ya.default)("jsonql:valdiators-server"),ma=class extends yr{constructor(r){super(r)}loadExternalPlugins(r){return Er(this,null,function*(){return(yield this._importExternalPlugins(r)).map(n=>{_h("loaded plugin",n);let i=this._getPluginValue(n);return this._plugin.registerExternalPlugin(i.name,i),i})})}registerPlugins(r){r.forEach((t,n)=>{this.registerPlugin(n,t)})}_getPluginValue(r){let t=r.default;return t.default?t.default:t}_importExternalPlugins(r){return Er(this,null,function*(){return new Promise((t,n)=>{(0,ga.default)(ph(r,"*.js"),(i,s)=>{if(i)return n(`Something went wrong ${i}`);if(s.length===0)return n("No plugin file found, we only support js files at the moment!");Promise.all(s.map(o=>import(o))).then(o=>{t(o)})})})})}};export{ma as ValidatorsServer};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=esm.js.map
