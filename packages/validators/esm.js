"use strict";var Ra=Object.create;var ui=Object.defineProperty;var Pa=Object.getOwnPropertyDescriptor;var wa=Object.getOwnPropertyNames;var Ta=Object.getPrototypeOf,Sa=Object.prototype.hasOwnProperty;var C=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,t)=>(typeof require!="undefined"?require:r)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var y=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Fa=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of wa(r))!Sa.call(e,i)&&i!==t&&ui(e,i,{get:()=>r[i],enumerable:!(n=Pa(r,i))||n.enumerable});return e};var fe=(e,r,t)=>(t=e!=null?Ra(Ta(e)):{},Fa(r||!e||!e.__esModule?ui(t,"default",{value:e,enumerable:!0}):t,e));var Or=(e,r,t)=>new Promise((n,i)=>{var s=u=>{try{a(t.next(u))}catch(f){i(f)}},o=u=>{try{a(t.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(e,r)).next())});var ci=y(Cr=>{var Fe=C("path"),ge=process.platform==="win32",me=C("fs"),ja=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Ia(){var e;if(ja){var r=new Error;e=t}else e=n;return e;function t(i){i&&(r.message=i.message,i=r,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function ka(e){return typeof e=="function"?e:Ia()}var Ph=Fe.normalize;ge?he=/(.*?)(?:[\/\\]+|$)/g:he=/(.*?)(?:[\/]+|$)/g;var he;ge?dt=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:dt=/^[\/]*/;var dt;Cr.realpathSync=function(r,t){if(r=Fe.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];var n=r,i={},s={},o,a,u,f;c();function c(){var g=dt.exec(r);o=g[0].length,a=g[0],u=g[0],f="",ge&&!s[u]&&(me.lstatSync(u),s[u]=!0)}for(;o<r.length;){he.lastIndex=o;var h=he.exec(r);if(f=a,a+=h[0],u=f+h[1],o=he.lastIndex,!(s[u]||t&&t[u]===u)){var l;if(t&&Object.prototype.hasOwnProperty.call(t,u))l=t[u];else{var d=me.lstatSync(u);if(!d.isSymbolicLink()){s[u]=!0,t&&(t[u]=u);continue}var _=null;if(!ge){var m=d.dev.toString(32)+":"+d.ino.toString(32);i.hasOwnProperty(m)&&(_=i[m])}_===null&&(me.statSync(u),_=me.readlinkSync(u)),l=Fe.resolve(f,_),t&&(t[u]=l),ge||(i[m]=_)}r=Fe.resolve(l,r.slice(o)),c()}}return t&&(t[n]=r),r};Cr.realpath=function(r,t,n){if(typeof n!="function"&&(n=ka(t),t=null),r=Fe.resolve(r),t&&Object.prototype.hasOwnProperty.call(t,r))return process.nextTick(n.bind(null,null,t[r]));var i=r,s={},o={},a,u,f,c;h();function h(){var g=dt.exec(r);a=g[0].length,u=g[0],f=g[0],c="",ge&&!o[f]?me.lstat(f,function(b){if(b)return n(b);o[f]=!0,l()}):process.nextTick(l)}function l(){if(a>=r.length)return t&&(t[i]=r),n(null,r);he.lastIndex=a;var g=he.exec(r);return c=u,u+=g[0],f=c+g[1],a=he.lastIndex,o[f]||t&&t[f]===f?process.nextTick(l):t&&Object.prototype.hasOwnProperty.call(t,f)?m(t[f]):me.lstat(f,d)}function d(g,b){if(g)return n(g);if(!b.isSymbolicLink())return o[f]=!0,t&&(t[f]=f),process.nextTick(l);if(!ge){var P=b.dev.toString(32)+":"+b.ino.toString(32);if(s.hasOwnProperty(P))return _(null,s[P],f)}me.stat(f,function(J){if(J)return n(J);me.readlink(f,function(E,A){ge||(s[P]=A),_(E,A)})})}function _(g,b,P){if(g)return n(g);var J=Fe.resolve(c,b);t&&(t[P]=J),m(J)}function m(g){r=Fe.resolve(g,r.slice(a)),h()}}});var Tr=y((Th,di)=>{di.exports=ye;ye.realpath=ye;ye.sync=wr;ye.realpathSync=wr;ye.monkeypatch=Ma;ye.unmonkeypatch=qa;var Ve=C("fs"),Rr=Ve.realpath,Pr=Ve.realpathSync,Ya=process.version,li=/^v[0-5]\./.test(Ya),fi=ci();function hi(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function ye(e,r,t){if(li)return Rr(e,r,t);typeof r=="function"&&(t=r,r=null),Rr(e,r,function(n,i){hi(n)?fi.realpath(e,r,t):t(n,i)})}function wr(e,r){if(li)return Pr(e,r);try{return Pr(e,r)}catch(t){if(hi(t))return fi.realpathSync(e,r);throw t}}function Ma(){Ve.realpath=ye,Ve.realpathSync=wr}function qa(){Ve.realpath=Rr,Ve.realpathSync=Pr}});var _i=y((Sh,pi)=>{var La=typeof process=="object"&&process&&process.platform==="win32";pi.exports=La?{sep:"\\"}:{sep:"/"}});var bi=y((Fh,vi)=>{"use strict";vi.exports=gi;function gi(e,r,t){e instanceof RegExp&&(e=mi(e,t)),r instanceof RegExp&&(r=mi(r,t));var n=yi(e,r,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+e.length,n[1]),post:t.slice(n[1]+r.length)}}function mi(e,r){var t=r.match(e);return t?t[0]:null}gi.range=yi;function yi(e,r,t){var n,i,s,o,a,u=t.indexOf(e),f=t.indexOf(r,u+1),c=u;if(u>=0&&f>0){if(e===r)return[u,f];for(n=[],s=t.length;c>=0&&!a;)c==u?(n.push(c),u=t.indexOf(e,c+1)):n.length==1?a=[n.pop(),f]:(i=n.pop(),i<s&&(s=i,o=f),f=t.indexOf(r,c+1)),c=u<f&&u>=0?u:f;n.length&&(a=[s,o])}return a}});var Ti=y((jh,wi)=>{var Ei=bi();wi.exports=Va;var Ai="\0SLASH"+Math.random()+"\0",Oi="\0OPEN"+Math.random()+"\0",Fr="\0CLOSE"+Math.random()+"\0",Ci="\0COMMA"+Math.random()+"\0",Ri="\0PERIOD"+Math.random()+"\0";function Sr(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function Na(e){return e.split("\\\\").join(Ai).split("\\{").join(Oi).split("\\}").join(Fr).split("\\,").join(Ci).split("\\.").join(Ri)}function Da(e){return e.split(Ai).join("\\").split(Oi).join("{").split(Fr).join("}").split(Ci).join(",").split(Ri).join(".")}function Pi(e){if(!e)return[""];var r=[],t=Ei("{","}",e);if(!t)return e.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Pi(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),r.push.apply(r,o),r}function Va(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),pt(Na(e),!0).map(Da)):[]}function xa(e){return"{"+e+"}"}function Ua(e){return/^-?0\d/.test(e)}function Ka(e,r){return e<=r}function Ga(e,r){return e>=r}function pt(e,r){var t=[],n=Ei("{","}",e);if(!n)return[e];var i=n.pre,s=n.post.length?pt(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),c=u||f,h=n.body.indexOf(",")>=0;if(!c&&!h)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Fr+n.post,pt(e)):[e];var l;if(c)l=n.body.split(/\.\./);else if(l=Pi(n.body),l.length===1&&(l=pt(l[0],!1).map(xa),l.length===1))return s.map(function(Er){return n.pre+l[0]+Er});var d;if(c){var _=Sr(l[0]),m=Sr(l[1]),g=Math.max(l[0].length,l[1].length),b=l.length==3?Math.abs(Sr(l[2])):1,P=Ka,J=m<_;J&&(b*=-1,P=Ga);var E=l.some(Ua);d=[];for(var A=_;P(A,m);A+=b){var w;if(f)w=String.fromCharCode(A),w==="\\"&&(w="");else if(w=String(A),E){var W=g-w.length;if(W>0){var j=new Array(W+1).join("0");A<0?w="-"+j+w.slice(1):w=j+w}}d.push(w)}}else{d=[];for(var H=0;H<l.length;H++)d.push.apply(d,pt(l[H],!1))}for(var H=0;H<d.length;H++)for(var o=0;o<s.length;o++){var a=i+d[H]+s[o];(!r||c||a)&&t.push(a)}}return t}});var Ft=y((kh,Yr)=>{var z=Yr.exports=(e,r,t={})=>(St(r),!t.nocomment&&r.charAt(0)==="#"?!1:new xe(r,t).match(e));Yr.exports=z;var Ir=_i();z.sep=Ir.sep;var se=Symbol("globstar **");z.GLOBSTAR=se;var Ba=Ti(),Si={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},kr="[^/]",jr=kr+"*?",$a="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ja="(?:(?!(?:\\/|^)\\.).)*?",Ii=e=>e.split("").reduce((r,t)=>(r[t]=!0,r),{}),Fi=Ii("().*{}+?[]^$\\!"),Ha=Ii("[.("),ji=/\/+/;z.filter=(e,r={})=>(t,n,i)=>z(t,e,r);var ve=(e,r={})=>{let t={};return Object.keys(e).forEach(n=>t[n]=e[n]),Object.keys(r).forEach(n=>t[n]=r[n]),t};z.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return z;let r=z,t=(n,i,s)=>r(n,i,ve(e,s));return t.Minimatch=class extends r.Minimatch{constructor(i,s){super(i,ve(e,s))}},t.Minimatch.defaults=n=>r.defaults(ve(e,n)).Minimatch,t.filter=(n,i)=>r.filter(n,ve(e,i)),t.defaults=n=>r.defaults(ve(e,n)),t.makeRe=(n,i)=>r.makeRe(n,ve(e,i)),t.braceExpand=(n,i)=>r.braceExpand(n,ve(e,i)),t.match=(n,i,s)=>r.match(n,i,ve(e,s)),t};z.braceExpand=(e,r)=>ki(e,r);var ki=(e,r={})=>(St(e),r.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Ba(e)),Wa=1024*64,St=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Wa)throw new TypeError("pattern is too long")},Tt=Symbol("subparse");z.makeRe=(e,r)=>new xe(e,r||{}).makeRe();z.match=(e,r,t={})=>{let n=new xe(r,t);return e=e.filter(i=>n.match(i)),n.options.nonull&&!e.length&&e.push(r),e};var za=e=>e.replace(/\\(.)/g,"$1"),Xa=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),xe=class{constructor(r,t){St(r),t||(t={}),this.options=t,this.set=[],this.pattern=r,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let r=this.pattern,t=this.options;if(!t.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(ji)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let r=this.pattern,t=!1,n=0;for(let i=0;i<r.length&&r.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=r.substr(n)),this.negate=t}matchOne(r,t,n){var i=this.options;this.debug("matchOne",{this:this,file:r,pattern:t}),this.debug("matchOne",r.length,t.length);for(var s=0,o=0,a=r.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var f=t[o],c=r[s];if(this.debug(t,f,c),f===!1)return!1;if(f===se){this.debug("GLOBSTAR",[t,f,c]);var h=s,l=o+1;if(l===u){for(this.debug("** at the end");s<a;s++)if(r[s]==="."||r[s]===".."||!i.dot&&r[s].charAt(0)===".")return!1;return!0}for(;h<a;){var d=r[h];if(this.debug(`
globstar while`,r,h,t,l,d),this.matchOne(r.slice(h),t.slice(l),n))return this.debug("globstar found match!",h,a,d),!0;if(d==="."||d===".."||!i.dot&&d.charAt(0)==="."){this.debug("dot detected!",r,h,t,l);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,r,h,t,l),h===a))}var _;if(typeof f=="string"?(_=c===f,this.debug("string match",f,c,_)):(_=c.match(f),this.debug("pattern match",f,c,_)),!_)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&r[s]==="";throw new Error("wtf?")}braceExpand(){return ki(this.pattern,this.options)}parse(r,t){St(r);let n=this.options;if(r==="**")if(n.noglobstar)r="*";else return se;if(r==="")return"";let i="",s=!!n.nocase,o=!1,a=[],u=[],f,c=!1,h=-1,l=-1,d,_,m,g=r.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(f){switch(f){case"*":i+=jr,s=!0;break;case"?":i+=kr,s=!0;break;default:i+="\\"+f;break}this.debug("clearStateChar %j %j",f,i),f=!1}};for(let E=0,A;E<r.length&&(A=r.charAt(E));E++){if(this.debug("%s	%s %s %j",r,E,i,A),o){if(A==="/")return!1;Fi[A]&&(i+="\\"),i+=A,o=!1;continue}switch(A){case"/":return!1;case"\\":b(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,E,i,A),c){this.debug("  in class"),A==="!"&&E===l+1&&(A="^"),i+=A;continue}this.debug("call clearStateChar %j",f),b(),f=A,n.noext&&b();continue;case"(":if(c){i+="(";continue}if(!f){i+="\\(";continue}a.push({type:f,start:E-1,reStart:i.length,open:Si[f].open,close:Si[f].close}),i+=f==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",f,i),f=!1;continue;case")":if(c||!a.length){i+="\\)";continue}b(),s=!0,_=a.pop(),i+=_.close,_.type==="!"&&u.push(_),_.reEnd=i.length;continue;case"|":if(c||!a.length){i+="\\|";continue}b(),i+="|";continue;case"[":if(b(),c){i+="\\"+A;continue}c=!0,l=E,h=i.length,i+=A;continue;case"]":if(E===l+1||!c){i+="\\"+A;continue}d=r.substring(l+1,E);try{RegExp("["+d+"]")}catch{m=this.parse(d,Tt),i=i.substr(0,h)+"\\["+m[0]+"\\]",s=s||m[1],c=!1;continue}s=!0,c=!1,i+=A;continue;default:b(),Fi[A]&&!(A==="^"&&c)&&(i+="\\"),i+=A;break}}for(c&&(d=r.substr(l+1),m=this.parse(d,Tt),i=i.substr(0,h)+"\\["+m[0],s=s||m[1]),_=a.pop();_;_=a.pop()){let E;E=i.slice(_.reStart+_.open.length),this.debug("setting tail",i,_),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,(w,W,j)=>(j||(j="\\"),W+W+j+"|")),this.debug(`tail=%j
   %s`,E,E,_,i);let A=_.type==="*"?jr:_.type==="?"?kr:"\\"+_.type;s=!0,i=i.slice(0,_.reStart)+A+"\\("+E}b(),o&&(i+="\\\\");let P=Ha[i.charAt(0)];for(let E=u.length-1;E>-1;E--){let A=u[E],w=i.slice(0,A.reStart),W=i.slice(A.reStart,A.reEnd-8),j=i.slice(A.reEnd),H=i.slice(A.reEnd-8,A.reEnd)+j,Er=w.split("(").length-1,Ar=j;for(let ai=0;ai<Er;ai++)Ar=Ar.replace(/\)[+*?]?/,"");j=Ar;let Ca=j===""&&t!==Tt?"$":"";i=w+W+j+Ca+H}if(i!==""&&s&&(i="(?=.)"+i),P&&(i=g+i),t===Tt)return[i,s];if(!s)return za(r);let J=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",J),{_glob:r,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let r=this.set;if(!r.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?jr:t.dot?$a:Ja,i=t.nocase?"i":"",s=r.map(o=>(o=o.map(a=>typeof a=="string"?Xa(a):a===se?se:a._src).reduce((a,u)=>(a[a.length-1]===se&&u===se||a.push(u),a),[]),o.forEach((a,u)=>{a!==se||o[u-1]===se||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=se))}),o.filter(a=>a!==se).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(r,t=this.partial){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&t)return!0;let n=this.options;Ir.sep!=="/"&&(r=r.split(Ir.sep).join("/")),r=r.split(ji),this.debug(this.pattern,"split",r);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=r.length-1;o>=0&&(s=r[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=r;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(r){return z.defaults(r).Minimatch}};z.Minimatch=xe});var Yi=y((Yh,Mr)=>{typeof Object.create=="function"?Mr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Mr.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var Mi=y((Mh,Lr)=>{try{if(qr=C("util"),typeof qr.inherits!="function")throw"";Lr.exports=qr.inherits}catch{Lr.exports=Yi()}var qr});var Dr=y(be=>{be.setopts=nu;be.ownProp=qi;be.makeAbs=_t;be.finish=iu;be.mark=su;be.isIgnored=Ni;be.childrenIgnored=ou;function qi(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Za=C("fs"),je=C("path"),Qa=Ft(),Li=C("path").isAbsolute,Nr=Qa.Minimatch;function eu(e,r){return e.localeCompare(r,"en")}function tu(e,r){e.ignore=r.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(ru))}function ru(e){var r=null;if(e.slice(-3)==="/**"){var t=e.replace(/(\/\*\*)+$/,"");r=new Nr(t,{dot:!0})}return{matcher:new Nr(e,{dot:!0}),gmatcher:r}}function nu(e,r,t){if(t||(t={}),t.matchBase&&r.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!t.silent,e.pattern=r,e.strict=t.strict!==!1,e.realpath=!!t.realpath,e.realpathCache=t.realpathCache||Object.create(null),e.follow=!!t.follow,e.dot=!!t.dot,e.mark=!!t.mark,e.nodir=!!t.nodir,e.nodir&&(e.mark=!0),e.sync=!!t.sync,e.nounique=!!t.nounique,e.nonull=!!t.nonull,e.nosort=!!t.nosort,e.nocase=!!t.nocase,e.stat=!!t.stat,e.noprocess=!!t.noprocess,e.absolute=!!t.absolute,e.fs=t.fs||Za,e.maxLength=t.maxLength||1/0,e.cache=t.cache||Object.create(null),e.statCache=t.statCache||Object.create(null),e.symlinks=t.symlinks||Object.create(null),tu(e,t),e.changedCwd=!1;var n=process.cwd();qi(t,"cwd")?(e.cwd=je.resolve(t.cwd),e.changedCwd=e.cwd!==n):e.cwd=je.resolve(n),e.root=t.root||je.resolve(e.cwd,"/"),e.root=je.resolve(e.root),e.cwdAbs=Li(e.cwd)?e.cwd:_t(e,e.cwd),e.nomount=!!t.nomount,process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/"),e.cwd=e.cwd.replace(/\\/g,"/"),e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),t.nonegate=!0,t.nocomment=!0,t.allowWindowsEscape=!0,e.minimatch=new Nr(r,t),e.options=e.minimatch.options}function iu(e){for(var r=e.nounique,t=r?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(!s||Object.keys(s).length===0){if(e.nonull){var o=e.minimatch.globSet[n];r?t.push(o):t[o]=!0}}else{var a=Object.keys(s);r?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(r||(t=Object.keys(t)),e.nosort||(t=t.sort(eu)),e.mark){for(var n=0;n<t.length;n++)t[n]=e._mark(t[n]);e.nodir&&(t=t.filter(function(u){var f=!/\/$/.test(u),c=e.cache[u]||e.cache[_t(e,u)];return f&&c&&(f=c!=="DIR"&&!Array.isArray(c)),f}))}e.ignore.length&&(t=t.filter(function(u){return!Ni(e,u)})),e.found=t}function su(e,r){var t=_t(e,r),n=e.cache[t],i=r;if(n){var s=n==="DIR"||Array.isArray(n),o=r.slice(-1)==="/";if(s&&!o?i+="/":!s&&o&&(i=i.slice(0,-1)),i!==r){var a=_t(e,i);e.statCache[a]=e.statCache[t],e.cache[a]=e.cache[t]}}return i}function _t(e,r){var t=r;return r.charAt(0)==="/"?t=je.join(e.root,r):Li(r)||r===""?t=r:e.changedCwd?t=je.resolve(e.cwd,r):t=je.resolve(r),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function Ni(e,r){return e.ignore.length?e.ignore.some(function(t){return t.matcher.match(r)||!!(t.gmatcher&&t.gmatcher.match(r))}):!1}function ou(e,r){return e.ignore.length?e.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(r))}):!1}});var Ki=y((Vh,Ui)=>{Ui.exports=xi;xi.GlobSync=M;var au=Tr(),Di=Ft(),Lh=Di.Minimatch,Nh=Ur().Glob,Dh=C("util"),Vr=C("path"),Vi=C("assert"),jt=C("path").isAbsolute,Ie=Dr(),uu=Ie.setopts,xr=Ie.ownProp,cu=Ie.childrenIgnored,lu=Ie.isIgnored;function xi(e,r){if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new M(e,r).found}function M(e,r){if(!e)throw new Error("must provide pattern");if(typeof r=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof M))return new M(e,r);if(uu(this,e,r),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}M.prototype._finish=function(){if(Vi.ok(this instanceof M),this.realpath){var e=this;this.matches.forEach(function(r,t){var n=e.matches[t]=Object.create(null);for(var i in r)try{i=e._makeAbs(i);var s=au.realpathSync(i,e.realpathCache);n[s]=!0}catch(o){if(o.syscall==="stat")n[e._makeAbs(i)]=!0;else throw o}})}Ie.finish(this)};M.prototype._process=function(e,r,t){Vi.ok(this instanceof M);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),r);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n),o;i===null?o=".":((jt(i)||jt(e.map(function(f){return typeof f=="string"?f:"[*]"}).join("/")))&&(!i||!jt(i))&&(i="/"+i),o=i);var a=this._makeAbs(o);if(!cu(this,o)){var u=s[0]===Di.GLOBSTAR;u?this._processGlobStar(i,o,a,s,r,t):this._processReaddir(i,o,a,s,r,t)}};M.prototype._processReaddir=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){for(var a=n[0],u=!!this.minimatch.negate,f=a._glob,c=this.dot||f.charAt(0)===".",h=[],l=0;l<o.length;l++){var d=o[l];if(d.charAt(0)!=="."||c){var _;u&&!e?_=!d.match(a):_=d.match(a),_&&h.push(d)}}var m=h.length;if(m!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var l=0;l<m;l++){var d=h[l];e&&(e.slice(-1)!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=Vr.join(this.root,d)),this._emitMatch(i,d)}return}n.shift();for(var l=0;l<m;l++){var d=h[l],g;e?g=[e,d]:g=[d],this._process(g.concat(n),i,s)}}}};M.prototype._emitMatch=function(e,r){if(!lu(this,r)){var t=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0,this.stat&&this._stat(r)}}};M.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var r,t,n;try{t=this.fs.lstatSync(e)}catch(s){if(s.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[e]=i,!i&&t&&!t.isDirectory()?this.cache[e]="FILE":r=this._readdir(e,!1),r};M.prototype._readdir=function(e,r){var t;if(r&&!xr(this.symlinks,e))return this._readdirInGlobStar(e);if(xr(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};M.prototype._readdirEntries=function(e,r){if(!this.mark&&!this.stat)for(var t=0;t<r.length;t++){var n=r[t];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=r,r};M.prototype._readdirError=function(e,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(e);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(r.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=r.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw r;this.silent||console.error("glob error",r);break}};M.prototype._processGlobStar=function(e,r,t,n,i,s){var o=this._readdir(t,s);if(!!o){var a=n.slice(1),u=e?[e]:[],f=u.concat(a);this._process(f,i,!1);var c=o.length,h=this.symlinks[t];if(!(h&&s))for(var l=0;l<c;l++){var d=o[l];if(!(d.charAt(0)==="."&&!this.dot)){var _=u.concat(o[l],a);this._process(_,i,!0);var m=u.concat(o[l],n);this._process(m,i,!0)}}}};M.prototype._processSimple=function(e,r){var t=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),!!t){if(e&&jt(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Vr.join(this.root,e):(e=Vr.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}};M.prototype._stat=function(e){var r=this._makeAbs(e),t=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&xr(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var n,i=this.statCache[r];if(!i){var s;try{s=this.fs.lstatSync(r)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[r]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(r)}catch{i=s}else i=s}this.statCache[r]=i;var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,t&&o==="FILE"?!1:o};M.prototype._mark=function(e){return Ie.mark(this,e)};M.prototype._makeAbs=function(e){return Ie.makeAbs(this,e)}});var Kr=y((xh,Bi)=>{Bi.exports=Gi;function Gi(e,r){if(e&&r)return Gi(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=e.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var Br=y((Uh,Gr)=>{var $i=Kr();Gr.exports=$i(It);Gr.exports.strict=$i(Ji);It.proto=It(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return It(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Ji(this)},configurable:!0})});function It(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function Ji(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var Wi=y((Kh,Hi)=>{var fu=Kr(),mt=Object.create(null),hu=Br();Hi.exports=fu(du);function du(e,r){return mt[e]?(mt[e].push(r),null):(mt[e]=[r],pu(e))}function pu(e){return hu(function r(){var t=mt[e],n=t.length,i=_u(arguments);try{for(var s=0;s<n;s++)t[s].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){r.apply(null,i)})):delete mt[e]}})}function _u(e){for(var r=e.length,t=[],n=0;n<r;n++)t[n]=e[n];return t}});var Ur=y(($h,Xi)=>{Xi.exports=ke;var mu=Tr(),zi=Ft(),Gh=zi.Minimatch,gu=Mi(),yu=C("events").EventEmitter,$r=C("path"),Jr=C("assert"),gt=C("path").isAbsolute,Wr=Ki(),Ye=Dr(),vu=Ye.setopts,Hr=Ye.ownProp,zr=Wi(),Bh=C("util"),bu=Ye.childrenIgnored,Eu=Ye.isIgnored,Au=Br();function ke(e,r,t){if(typeof r=="function"&&(t=r,r={}),r||(r={}),r.sync){if(t)throw new TypeError("callback provided to sync glob");return Wr(e,r)}return new R(e,r,t)}ke.sync=Wr;var Ou=ke.GlobSync=Wr.GlobSync;ke.glob=ke;function Cu(e,r){if(r===null||typeof r!="object")return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e}ke.hasMagic=function(e,r){var t=Cu({},r);t.noprocess=!0;var n=new R(e,t),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};ke.Glob=R;gu(R,yu);function R(e,r,t){if(typeof r=="function"&&(t=r,r=null),r&&r.sync){if(t)throw new TypeError("callback provided to sync glob");return new Ou(e,r)}if(!(this instanceof R))return new R(e,r,t);vu(this,e,r),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=Au(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var s=!0,o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,a);s=!1;function a(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}R.prototype._finish=function(){if(Jr(this instanceof R),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Ye.finish(this),this.emit("end",this.found)}};R.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var r=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--e===0&&r._finish()}};R.prototype._realpathSet=function(e,r){var t=this.matches[e];if(!t)return r();var n=Object.keys(t),i=this,s=n.length;if(s===0)return r();var o=this.matches[e]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),mu.realpath(a,i.realpathCache,function(f,c){f?f.syscall==="stat"?o[a]=!0:i.emit("error",f):o[c]=!0,--s===0&&(i.matches[e]=o,r())})})};R.prototype._mark=function(e){return Ye.mark(this,e)};R.prototype._makeAbs=function(e){return Ye.makeAbs(this,e)};R.prototype.abort=function(){this.aborted=!0,this.emit("abort")};R.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};R.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var r=0;r<e.length;r++){var t=e[r];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var r=0;r<n.length;r++){var i=n[r];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};R.prototype._process=function(e,r,t,n){if(Jr(this instanceof R),Jr(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,r,t,n]);return}for(var i=0;typeof e[i]=="string";)i++;var s;switch(i){case e.length:this._processSimple(e.join("/"),r,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var o=e.slice(i),a;s===null?a=".":((gt(s)||gt(e.map(function(c){return typeof c=="string"?c:"[*]"}).join("/")))&&(!s||!gt(s))&&(s="/"+s),a=s);var u=this._makeAbs(a);if(bu(this,a))return n();var f=o[0]===zi.GLOBSTAR;f?this._processGlobStar(s,a,u,o,r,t,n):this._processReaddir(s,a,u,o,r,t,n)}};R.prototype._processReaddir=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){return a._processReaddir2(e,r,t,n,i,s,f,o)})};R.prototype._processReaddir2=function(e,r,t,n,i,s,o,a){if(!o)return a();for(var u=n[0],f=!!this.minimatch.negate,c=u._glob,h=this.dot||c.charAt(0)===".",l=[],d=0;d<o.length;d++){var _=o[d];if(_.charAt(0)!=="."||h){var m;f&&!e?m=!_.match(u):m=_.match(u),m&&l.push(_)}}var g=l.length;if(g===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<g;d++){var _=l[d];e&&(e!=="/"?_=e+"/"+_:_=e+_),_.charAt(0)==="/"&&!this.nomount&&(_=$r.join(this.root,_)),this._emitMatch(i,_)}return a()}n.shift();for(var d=0;d<g;d++){var _=l[d],b;e&&(e!=="/"?_=e+"/"+_:_=e+_),this._process([_].concat(n),i,s,a)}a()};R.prototype._emitMatch=function(e,r){if(!this.aborted&&!Eu(this,r)){if(this.paused){this._emitQueue.push([e,r]);return}var t=gt(r)?r:this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=t),!this.matches[e][r]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[e][r]=!0;var i=this.statCache[t];i&&this.emit("stat",r,i),this.emit("match",r)}}};R.prototype._readdirInGlobStar=function(e,r){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,r);var t="lstat\0"+e,n=this,i=zr(t,s);i&&n.fs.lstat(e,i);function s(o,a){if(o&&o.code==="ENOENT")return r();var u=a&&a.isSymbolicLink();n.symlinks[e]=u,!u&&a&&!a.isDirectory()?(n.cache[e]="FILE",r()):n._readdir(e,!1,r)}};R.prototype._readdir=function(e,r,t){if(!this.aborted&&(t=zr("readdir\0"+e+"\0"+r,t),!!t)){if(r&&!Hr(this.symlinks,e))return this._readdirInGlobStar(e,t);if(Hr(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(e,Ru(this,e,t))}};function Ru(e,r,t){return function(n,i){n?e._readdirError(r,n,t):e._readdirEntries(r,i,t)}}R.prototype._readdirEntries=function(e,r,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<r.length;n++){var i=r[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=r,t(null,r)}};R.prototype._readdirError=function(e,r,t){if(!this.aborted){switch(r.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(r.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=r.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",r),this.abort()),this.silent||console.error("glob error",r);break}return t()}};R.prototype._processGlobStar=function(e,r,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,f){a._processGlobStar2(e,r,t,n,i,s,f,o)})};R.prototype._processGlobStar2=function(e,r,t,n,i,s,o,a){if(!o)return a();var u=n.slice(1),f=e?[e]:[],c=f.concat(u);this._process(c,i,!1,a);var h=this.symlinks[t],l=o.length;if(h&&s)return a();for(var d=0;d<l;d++){var _=o[d];if(!(_.charAt(0)==="."&&!this.dot)){var m=f.concat(o[d],u);this._process(m,i,!0,a);var g=f.concat(o[d],n);this._process(g,i,!0,a)}}a()};R.prototype._processSimple=function(e,r,t){var n=this;this._stat(e,function(i,s){n._processSimple2(e,r,i,s,t)})};R.prototype._processSimple2=function(e,r,t,n,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!n)return i();if(e&&gt(e)&&!this.nomount){var s=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=$r.join(this.root,e):(e=$r.resolve(this.root,e),s&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()};R.prototype._stat=function(e,r){var t=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return r();if(!this.stat&&Hr(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return r(null,i);if(n&&i==="FILE")return r()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return r(null,o);var a=o.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?r():r(null,a,o)}var u=this,f=zr("stat\0"+t,c);f&&u.fs.lstat(t,f);function c(h,l){if(l&&l.isSymbolicLink())return u.fs.stat(t,function(d,_){d?u._stat2(e,t,null,l,r):u._stat2(e,t,d,_,r)});u._stat2(e,t,h,l,r)}};R.prototype._stat2=function(e,r,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[r]=!1,i();var s=e.slice(-1)==="/";if(this.statCache[r]=n,r.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||o,s&&o==="FILE"?i():i(null,o,n)}});var Mt=y((Jh,Yt)=>{var Zi,Qi,es,ts,rs,ns,is,ss,os,kt,Xr,as,us,Ue,cs,ls,fs,hs,ds,ps,_s,ms,gs;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Yt=="object"&&typeof Yt.exports=="object"?e(t(r,t(Yt.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};Zi=function(t,n){r(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},Qi=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},es=function(t,n){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]]);return i},ts=function(t,n,i,s){var o=arguments.length,a=o<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,i):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,i,s);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(a=(o<3?u(a):o>3?u(n,i,a):u(n,i))||a);return o>3&&a&&Object.defineProperty(n,i,a),a},rs=function(t,n){return function(i,s){n(i,s,t)}},ns=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},is=function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(u){u(a)})}return new(i||(i=Promise))(function(a,u){function f(l){try{h(s.next(l))}catch(d){u(d)}}function c(l){try{h(s.throw(l))}catch(d){u(d)}}function h(l){l.done?a(l.value):o(l.value).then(f,c)}h((s=s.apply(t,n||[])).next())})},ss=function(t,n){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(l){return c([h,l])}}function c(h){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,o&&(a=h[0]&2?o.return:h[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,h[1])).done)return a;switch(o=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,o=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){i.label=h[1];break}if(h[0]===6&&i.label<a[1]){i.label=a[1],a=h;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(h);break}a[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(t,i)}catch(l){h=[6,l],o=0}finally{s=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},gs=function(t,n,i,s){s===void 0&&(s=i),t[s]=n[i]},os=function(t,n){for(var i in t)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=t[i])},kt=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Xr=function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),o,a=[],u;try{for(;(n===void 0||n-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(u)throw u.error}}return a},as=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Xr(arguments[n]));return t},us=function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var s=Array(t),o=0,n=0;n<i;n++)for(var a=arguments[n],u=0,f=a.length;u<f;u++,o++)s[o]=a[u];return s},Ue=function(t){return this instanceof Ue?(this.v=t,this):new Ue(t)},cs=function(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,n||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(_){s[_]&&(o[_]=function(m){return new Promise(function(g,b){a.push([_,m,g,b])>1||f(_,m)})})}function f(_,m){try{c(s[_](m))}catch(g){d(a[0][3],g)}}function c(_){_.value instanceof Ue?Promise.resolve(_.value.v).then(h,l):d(a[0][2],_)}function h(_){f("next",_)}function l(_){f("throw",_)}function d(_,m){_(m),a.shift(),a.length&&f(a[0][0],a[0][1])}},ls=function(t){var n,i;return n={},s("next"),s("throw",function(o){throw o}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(o,a){n[o]=t[o]?function(u){return(i=!i)?{value:Ue(t[o](u)),done:o==="return"}:a?a(u):u}:a}},fs=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof kt=="function"?kt(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(a){i[a]=t[a]&&function(u){return new Promise(function(f,c){u=t[a](u),o(f,c,u.done,u.value)})}}function o(a,u,f,c){Promise.resolve(c).then(function(h){a({value:h,done:f})},u)}},hs=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t},ds=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n.default=t,n},ps=function(t){return t&&t.__esModule?t:{default:t}},_s=function(t,n){if(!n.has(t))throw new TypeError("attempted to get private field on non-instance");return n.get(t)},ms=function(t,n,i){if(!n.has(t))throw new TypeError("attempted to set private field on non-instance");return n.set(t,i),i},e("__extends",Zi),e("__assign",Qi),e("__rest",es),e("__decorate",ts),e("__param",rs),e("__metadata",ns),e("__awaiter",is),e("__generator",ss),e("__exportStar",os),e("__createBinding",gs),e("__values",kt),e("__read",Xr),e("__spread",as),e("__spreadArrays",us),e("__await",Ue),e("__asyncGenerator",cs),e("__asyncDelegator",ls),e("__asyncValues",fs),e("__makeTemplateObject",hs),e("__importStar",ds),e("__importDefault",ps),e("__classPrivateFieldGet",_s),e("__classPrivateFieldSet",ms)})});var qt=y(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var Ke=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ke.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}};Zr.default=Ke});var yt=y(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var Ge=class extends Error{constructor(...r){super(...r),this.message=r[0],this.detail=r[1],this.className=Ge.name,Error.captureStackTrace&&Error.captureStackTrace(this,Ge)}};Qr.default=Ge});var Ee=y(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.trueTypeOf=void 0;function Pu(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}Lt.trueTypeOf=Pu});var vt=y(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.formatStr=B.showDeep=B.nil=B.createEvtName=B.parseJson=B.toArray=B.inArray=void 0;var wu=Ee(),Tu=(e,r)=>e.includes(r);B.inArray=Tu;var Su=e=>Array.isArray(e)?e:[e];B.toArray=Su;var Fu=(e,r=!0)=>{try{return(0,wu.trueTypeOf)(e)==="string"?JSON.parse(e):JSON.parse(JSON.stringify(e))}catch(t){if(r)return e;throw t}};B.parseJson=Fu;var ju=(...e)=>e.join("_");B.createEvtName=ju;var Iu=()=>!1;B.nil=Iu;var ku=e=>{console.dir(e,{depth:null})};B.showDeep=ku;function Yu(e,...r){return e.replace(/{([0-9]+)}/g,(t,n)=>typeof r[n]>"u"?t:r[n])}B.formatStr=Yu});var de=y(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.readOnly=q.objectHasKey=q.arrToObj=q.assign=q.getConfigValue=q.isClass=q.isPlainObject=q.isObject=void 0;var Mu=vt(),qu=Ee();function en(e){return(0,qu.trueTypeOf)(e)==="object"}q.isObject=en;function tn(e){if(en(e)){let t=e.constructor.prototype,n="[Object: null prototype]";return t.toString().substring(0,n.length)===n?!0:en(t)===!1?!1:Reflect.apply(t.hasOwnProperty,t,["isPrototypeOf"])}return!1}q.isPlainObject=tn;var Lu=e=>!tn(e);q.isClass=Lu;var Nu=(e,r)=>r&&tn(r)&&e in r?r[e]:void 0;q.getConfigValue=Nu;var Du=(...e)=>Reflect.apply(Object.assign,Object,e);q.assign=Du;var Vu=(e,r,t={})=>e.map(r).reduce((n,i)=>(0,q.assign)(n,i),t);q.arrToObj=Vu;var xu=(e,r)=>{try{let t=Object.keys(e);return(0,Mu.inArray)(t,r)}catch{return!1}};q.objectHasKey=xu;var Uu=e=>Object.freeze(e);q.readOnly=Uu});var rn=y(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.isEmpty=te.notEmpty=te.isNotEmpty=te.isEmptyObj=void 0;var ys=de(),Ku=e=>e&&(0,ys.isPlainObject)(e)&&Object.keys(e).length===0;te.isEmptyObj=Ku;var Gu=e=>e!=null&&(e+"").trim()!=="";te.isNotEmpty=Gu;function vs(e,r=!1){return Array.isArray(e)?r?!!e.length:!1:(0,ys.isPlainObject)(e)?r?!(0,te.isEmptyObj)(e):!1:(0,te.isNotEmpty)(e)}te.notEmpty=vs;var Bu=(e,r)=>!vs(e,r);te.isEmpty=Bu});var nn=y(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.isAsyncFunction=Be.isFunction=void 0;var bs=Ee(),Es=["asyncfunction","function"],$u=function(e,r=!1){let t=(0,bs.trueTypeOf)(e);return Es.includes(t)?!0:(r&&console.error(`Expect to be Function type! Got ${typeof e}`),!1)};Be.isFunction=$u;function Ju(e){return(0,bs.trueTypeOf)(e)===Es[0]}Be.isAsyncFunction=Ju});var bt=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.isString=X.flatMap=X.merge=X.curry=void 0;var Hu=Ee(),sn=de(),Wu=(e,...r)=>e.length<=r.length?e(...r):(...t)=>(0,X.curry)(e,...r,...t);X.curry=Wu;var zu=(e,...r)=>{if(!r.length)return e;let t=r.shift();if((0,sn.isObject)(e)&&(0,sn.isObject)(t))for(let n in t)(0,sn.isObject)(t[n])?(e[n]||Object.assign(e,{[n]:{}}),(0,X.merge)(e[n],t[n])):Object.assign(e,{[n]:t[n]});return(0,X.merge)(e,...r)};X.merge=zu;function Xu(e,r){return r||(r=t=>t),e.flatMap(r)}X.flatMap=Xu;function Zu(e){return(0,Hu.trueTypeOf)(e)==="string"}X.isString=Zu});var on=y(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.queuePromisesProcess=Ae.chainProcessPromises=Ae.chainPromises=void 0;var As=bt(),Qu=de();function ec(e,r=!1){return e.reduce((t,n)=>t.then(i=>n.then(s=>r===!1?[...i,s]:(0,As.merge)(i,s))),Promise.resolve(r===!1?[]:(0,Qu.isPlainObject)(r)?r:{}))}Ae.chainPromises=ec;function Os(e,...r){return(...t)=>r.reduce((n,i)=>n.then(s=>i(s)),Reflect.apply(e,null,t))}Ae.chainProcessPromises=Os;function tc(e,...r){let t=(0,As.flatMap)(e),n=Reflect.apply(Os,null,t);return Reflect.apply(n,null,r)}Ae.queuePromisesProcess=tc});var an=y(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.checkString=void 0;var rc=bt();function nc(e){return(e+"").trim()!==""?(0,rc.isString)(e):!1}Nt.checkString=nc});var un=y(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.checkBoolean=void 0;var ic=Ee();function sc(e){return(0,ic.trueTypeOf)(e)==="boolean"}Dt.checkBoolean=sc});var $e=y(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.checkUnsigned=oe.checkFloat=oe.checkInteger=oe.checkNumber=void 0;var cn=Ee(),ln="number";function oc(e){return(0,cn.trueTypeOf)(e)!==ln?!1:!isNaN(parseFloat(e+""))}oe.checkNumber=oc;function Cs(e){return(0,cn.trueTypeOf)(e)===ln&&Number.isInteger(e)}oe.checkInteger=Cs;function ac(e){return(0,cn.trueTypeOf)(e)===ln&&!isNaN(e)&&!Number.isInteger(e)}oe.checkFloat=ac;function uc(e){return Cs(e)&&e>=0}oe.checkUnsigned=uc});var fn=y(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.checkAny=void 0;function cc(e,r=!0){return e!==void 0&&e!==""&&(e+"").trim()!==""&&(r===!1||r===!0&&e!==null)}Vt.checkAny=cc});var pe=y(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.KEYWORDS=v.MAIN_NOT_FOUND_ERR=v.ARG_NOT_MATCH_ERR=v.RESERVED_WORD_ERR=v.VALUE_KEY=v.IDX_KEY=v.PARAMS_KEY=v.NAME_KEY=v.RULES_KEY=v.PATTERN_KEY=v.PLUGIN_FN_KEY=v.PLUGIN_KEY=v.VALIDATE_ASYNC_KEY=v.VALIDATE_KEY=v.ARRAY_TYPE_RGT=v.ARRAY_TYPE_LFT=v.ARRAY_TS_TYPE_LFT=v.OBJECT_TYPE=v.ARRAY_TYPE=v.NUMBER_TYPE=v.STRING_TYPE=v.BOOLEAN_TYPE=v.OR_SEPERATOR=void 0;v.OR_SEPERATOR="|";v.BOOLEAN_TYPE="boolean";v.STRING_TYPE="string";v.NUMBER_TYPE="number";v.ARRAY_TYPE="array";v.OBJECT_TYPE="object";v.ARRAY_TS_TYPE_LFT="Array<";v.ARRAY_TYPE_LFT="array.<";v.ARRAY_TYPE_RGT=">";v.VALIDATE_KEY="validate";v.VALIDATE_ASYNC_KEY="validateAsync";v.PLUGIN_KEY="plugin";v.PLUGIN_FN_KEY="main";v.PATTERN_KEY="pattern";v.RULES_KEY="rules";v.NAME_KEY="name";v.PARAMS_KEY="params";v.IDX_KEY="$$idx";v.VALUE_KEY="$$value";v.RESERVED_WORD_ERR="Your plugin config argument contains reserved keywords";v.ARG_NOT_MATCH_ERR="Your params doesn't matching your main argument list";v.MAIN_NOT_FOUND_ERR="Can not find 'main' method in your plugin config";v.KEYWORDS=[v.PARAMS_KEY,v.PATTERN_KEY,v.VALIDATE_KEY,v.VALIDATE_ASYNC_KEY,v.PLUGIN_KEY,v.RULES_KEY,"name","type","types","server","tstype","value","optional","tmp","pos","lastResult"]});var Et=y(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.combineCheck=void 0;var lc=$e(),fc=an(),hc=un(),dc=fn(),hn=pe();function pc(e){switch(e){case hn.NUMBER_TYPE:return lc.checkNumber;case hn.STRING_TYPE:return fc.checkString;case hn.BOOLEAN_TYPE:return hc.checkBoolean;default:return dc.checkAny}}xt.combineCheck=pc});var Ut=y(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.arrayTypeHandler=Ce.isArrayLike=Ce.checkArray=void 0;var _c=de(),dn=Et(),Oe=pe(),Rs={ts:Oe.ARRAY_TS_TYPE_LFT,jsdoc:Oe.ARRAY_TYPE_LFT};function ws(e,r){if(Array.isArray(e)){if(!r)return!0;let t;return Array.isArray(r)?t=e.filter(n=>{let i=r.length;for(let s=0;s<i;++s){let o=r[s];if(o===Oe.ARRAY_TYPE&&Array.isArray(n)||o===Oe.OBJECT_TYPE&&(0,_c.isPlainObject)(n)||(0,dn.combineCheck)(o)(n))return!1}return!0}):t=e.filter(n=>!(0,dn.combineCheck)(r)(n)),!(t.length>0)}return!1}Ce.checkArray=ws;function Ps(e,r="ts"){let t=Rs[r];if(!t)throw new Error(`Syntax not supported! ${Object.keys(Rs)}`);if(e.indexOf(t)>-1&&e.indexOf(Oe.ARRAY_TYPE_RGT)>-1){let n=e.replace(t,"").replace(Oe.ARRAY_TYPE_RGT,"");return n.indexOf(Oe.OR_SEPERATOR)?n.split(Oe.OR_SEPERATOR):[n]}return!1}function mc(e){return Ps(e)?!1:Ps(e,"jsdoc")}Ce.isArrayLike=mc;function gc(e,r){let{arg:t}=e;return r.length>1?!t.filter(n=>!(r.length>r.filter(i=>!(0,dn.combineCheck)(i)(n)).length)).length:r.length>r.filter(n=>!ws(t,n)).length}Ce.arrayTypeHandler=gc});var _n=y(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.isEmptyObject=Re.objectTypeHandler=Re.checkObject=void 0;var Ts=de(),yc=Et(),pn=Ut();function Ss(e,r){if((0,Ts.isPlainObject)(e)){if(!r)return!0;if(typeof r=="string")return r in e;if((0,pn.checkArray)(r))return typeof r[0]=="string"?vc(e,r):bc(e,r)}return!1}Re.checkObject=Ss;function vc(e,r){return!r.filter(t=>!(t in e)).length}function bc(e,r){return!r.filter(t=>{let n=e[t.name];return!(t.type.length>t.type.filter(i=>{let s;return n!==void 0?(s=(0,pn.isArrayLike)(i))!==!1?!(0,pn.arrayTypeHandler)({arg:n},s):!(0,yc.combineCheck)(i)(n):!0}).length)}).length}var Ec=function(e){let{arg:r,param:t}=e,n=[r];return Array.isArray(t.keys)&&t.keys.length&&n.push(t.keys),Reflect.apply(Ss,null,n)};Re.objectTypeHandler=Ec;var Ac=function(e){return(0,Ts.isPlainObject)(e)?!Object.keys(e).length:!1};Re.isEmptyObject=Ac});var _e=y((fd,Bt)=>{var Fs,js,Is,ks,Ys,Ms,qs,Ls,Ns,Kt,mn,Ds,Vs,xs,Je,Us,Ks,Gs,Bs,$s,Js,Hs,Ws,zs,Gt;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):typeof Bt=="object"&&typeof Bt.exports=="object"?e(t(r,t(Bt.exports))):e(t(r));function t(n,i){return n!==r&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Fs=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},js=Object.assign||function(n){for(var i,s=1,o=arguments.length;s<o;s++){i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},Is=function(n,i){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(n);a<o.length;a++)i.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(n,o[a])&&(s[o[a]]=n[o[a]]);return s},ks=function(n,i,s,o){var a=arguments.length,u=a<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,s):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,o);else for(var c=n.length-1;c>=0;c--)(f=n[c])&&(u=(a<3?f(u):a>3?f(i,s,u):f(i,s))||u);return a>3&&u&&Object.defineProperty(i,s,u),u},Ys=function(n,i){return function(s,o){i(s,o,n)}},Ms=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},qs=function(n,i,s,o){function a(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function c(d){try{l(o.next(d))}catch(_){f(_)}}function h(d){try{l(o.throw(d))}catch(_){f(_)}}function l(d){d.done?u(d.value):a(d.value).then(c,h)}l((o=o.apply(n,i||[])).next())})},Ls=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,a,u,f;return f={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function c(l){return function(d){return h([l,d])}}function h(l){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,a=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){s=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){s.label=l[1];break}if(l[0]===6&&s.label<u[1]){s.label=u[1],u=l;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(l);break}u[2]&&s.ops.pop(),s.trys.pop();continue}l=i.call(n,s)}catch(d){l=[6,d],a=0}finally{o=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ns=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Gt(i,n,s)},Gt=Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]},Kt=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],o=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},mn=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var o=s.call(n),a,u=[],f;try{for(;(i===void 0||i-- >0)&&!(a=o.next()).done;)u.push(a.value)}catch(c){f={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(f)throw f.error}}return u},Ds=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(mn(arguments[i]));return n},Vs=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var o=Array(n),a=0,i=0;i<s;i++)for(var u=arguments[i],f=0,c=u.length;f<c;f++,a++)o[a]=u[f];return o},xs=function(n,i,s){if(s||arguments.length===2)for(var o=0,a=i.length,u;o<a;o++)(u||!(o in i))&&(u||(u=Array.prototype.slice.call(i,0,o)),u[o]=i[o]);return n.concat(u||Array.prototype.slice.call(i))},Je=function(n){return this instanceof Je?(this.v=n,this):new Je(n)},Us=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(n,i||[]),a,u=[];return a={},f("next"),f("throw"),f("return"),a[Symbol.asyncIterator]=function(){return this},a;function f(m){o[m]&&(a[m]=function(g){return new Promise(function(b,P){u.push([m,g,b,P])>1||c(m,g)})})}function c(m,g){try{h(o[m](g))}catch(b){_(u[0][3],b)}}function h(m){m.value instanceof Je?Promise.resolve(m.value.v).then(l,d):_(u[0][2],m)}function l(m){c("next",m)}function d(m){c("throw",m)}function _(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Ks=function(n){var i,s;return i={},o("next"),o("throw",function(a){throw a}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(a,u){i[a]=n[a]?function(f){return(s=!s)?{value:Je(n[a](f)),done:a==="return"}:u?u(f):f}:u}},Gs=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Kt=="function"?Kt(n):n[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(u){s[u]=n[u]&&function(f){return new Promise(function(c,h){f=n[u](f),a(c,h,f.done,f.value)})}}function a(u,f,c,h){Promise.resolve(h).then(function(l){u({value:l,done:c})},f)}},Bs=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};$s=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Gt(i,n,s);return t(i,n),i},Js=function(n){return n&&n.__esModule?n:{default:n}},Hs=function(n,i,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(n):o?o.value:i.get(n)},Ws=function(n,i,s,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(n,s):a?a.value=s:i.set(n,s),s},zs=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},e("__extends",Fs),e("__assign",js),e("__rest",Is),e("__decorate",ks),e("__param",Ys),e("__metadata",Ms),e("__awaiter",qs),e("__generator",Ls),e("__exportStar",Ns),e("__createBinding",Gt),e("__values",Kt),e("__read",mn),e("__spread",Ds),e("__spreadArrays",Vs),e("__spreadArray",xs),e("__await",Je),e("__asyncGenerator",Us),e("__asyncDelegator",Ks),e("__asyncValues",Gs),e("__makeTemplateObject",Bs),e("__importStar",$s),e("__importDefault",Js),e("__classPrivateFieldGet",Hs),e("__classPrivateFieldSet",Ws),e("__classPrivateFieldIn",zs)})});var ro=y(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.checkUnionSync=Pe.checkUnion=Pe.generateReversePromisesFn=void 0;var Xs=_e(),Oc=on(),Zs=Et(),Qs=Ut(),eo=_n(),$t=pe();function gn(e,r){return e||r}function to(e,r,t){return r.map((n,i)=>{let s=[e];switch(t&&t[i]&&s.push(t[i]),n){case $t.ARRAY_TYPE:return()=>gn(Reflect.apply(Qs.checkArray,null,s),n);case $t.OBJECT_TYPE:return()=>gn(Reflect.apply(eo.checkObject,null,s),n);default:return()=>gn((0,Zs.combineCheck)(n)(e),n)}}).map(n=>()=>Xs.__awaiter(this,void 0,void 0,function*(){let i=n();return i===!0?Promise.reject(!0):Promise.resolve(i)}))}Pe.generateReversePromisesFn=to;function Cc(e,r,t){return Xs.__awaiter(this,void 0,void 0,function*(){let n=to(e,r,t);return new Promise((i,s)=>{(0,Oc.queuePromisesProcess)(n,r[0]).then(o=>{s(o)}).catch(o=>{i(o)})})})}Pe.checkUnion=Cc;function Rc(e,r){let t=r.length;for(let n=0;n<t;++n){let i=r[n];switch(i){case $t.ARRAY_TYPE:if((0,Qs.checkArray)(e))return!0;break;case $t.OBJECT_TYPE:if((0,eo.checkObject)(e))return!0;break;default:if((0,Zs.combineCheck)(i)(e))return!0}}return!1}Pe.checkUnionSync=Rc});var yn=y(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.reversePromisifyResult=He.promisify=void 0;var no=_e();function Pc(e){return(...r)=>no.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.resolve(t):Promise.reject(t)})}He.promisify=Pc;function wc(e){return(...r)=>no.__awaiter(this,void 0,void 0,function*(){let t=yield Reflect.apply(e,null,r);return t?Promise.reject(t):Promise.resolve(t)})}He.reversePromisifyResult=wc});var At=y(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.len=void 0;function Tc(e){return typeof e=="string"?e.length:e}Jt.len=Tc});var bn=y(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var Sc=At(),Fc="moreThan";function jc(e,r){return(0,Sc.len)(r)>e}vn.default={name:Fc,main:jc,params:["num"]}});var An=y(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Ic=At(),kc="lessThan";function Yc(e,r){return(0,Ic.len)(r)<e}En.default={name:kc,main:Yc,params:["num"]}});var so=y(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var io=_e(),Mc=io.__importDefault(bn()),qc=io.__importDefault(An()),Lc="between";function Nc(e,r,t){return qc.default.main(e,t)&&Mc.default.main(r,t)}On.default={main:Nc,name:Lc,params:["max","min"]}});var oo=y(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var Dc="email";function Vc(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}Cn.default={main:Vc,name:Dc}});var ao=y(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.name=void 0;var xc=$e();We.name="float";function Uc(e){return(0,xc.checkFloat)(e)}We.default={name:We.name,main:Uc}});var uo=y(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.name=void 0;var Kc=$e();ze.name="int";function Gc(e){return(0,Kc.checkInteger)(e)}ze.default={name:ze.name,main:Gc}});var Pn=y(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Bc=At(),$c="lessThanEqual";function Jc(e,r){return(0,Bc.len)(r)<=e}Rn.default={name:$c,main:Jc,params:["num"]}});var Tn=y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Hc=At(),Wc="moreThanEqual";function zc(e,r){return(0,Hc.len)(r)>=e}wn.default={name:Wc,main:zc,params:["num"]}});var co=y(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var Xc=$e(),Zc="unit";function Qc(e){return(0,Xc.checkUnsigned)(e)}Sn.default={name:Zc,main:Qc}});var fo=y(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var lo=_e(),el=lo.__importDefault(Tn()),tl=lo.__importDefault(Pn()),rl="main";function nl(e,r,t){return tl.default.main(e,t)&&el.default.main(r,t)}Fn.default={name:rl,main:nl,params:["max","min"]}});var Wt=y(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.plugins=void 0;var ae=_e(),il=ae.__importDefault(so()),sl=ae.__importDefault(oo()),ol=ae.__importDefault(ao()),al=ae.__importDefault(uo()),ul=ae.__importDefault(Pn()),cl=ae.__importDefault(An()),ll=ae.__importDefault(Tn()),fl=ae.__importDefault(bn()),hl=ae.__importDefault(co()),dl=ae.__importDefault(fo());Ht.plugins=[il.default,sl.default,ol.default,al.default,ul.default,cl.default,ll.default,fl.default,hl.default,dl.default]});var In=y(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getPlugin=Xe.curryPlugin=void 0;var ho=_e(),pl=bt(),jn=ho.__importDefault(yt()),_l=pe(),ml=Wt();function gl(e,r){let{plugin:t}=e;if(t){let n=r[_l.PARAMS_KEY];if(n){if(!yl(e,n))throw new jn.default(`Expected params: ${n.join(",")} not found!`);let i=n.map(s=>e[s]);return Reflect.apply((0,pl.curry)(r.main),null,i)}else throw new jn.default(`This plugin ${r.name} can not be curry`)}throw new jn.default("Unable to find plugin in config")}Xe.curryPlugin=gl;function yl(e,r){return r.filter(t=>e[t]).length===r.length}function vl(e){let r=ml.plugins[e];if(r)return r=r==="_"?e:r,Promise.resolve().then(()=>ho.__importStar(C("./"+[r,"js"].join("."))));throw new Error(`${e} is not found`)}Xe.getPlugin=vl});var _o=y(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getRegex=Ze.isRegExp=void 0;var bl=bt();function po(e){return e instanceof RegExp}Ze.isRegExp=po;function El(e){switch(!0){case po(e):return e;case(0,bl.isString)(e):return new RegExp(e);default:return!1}}Ze.getRegex=El});var go=y((Td,mo)=>{var Qe=1e3,et=Qe*60,tt=et*60,Me=tt*24,Al=Me*7,Ol=Me*365.25;mo.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Cl(e);if(t==="number"&&isFinite(e))return r.long?Pl(e):Rl(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Cl(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Ol;case"weeks":case"week":case"w":return t*Al;case"days":case"day":case"d":return t*Me;case"hours":case"hour":case"hrs":case"hr":case"h":return t*tt;case"minutes":case"minute":case"mins":case"min":case"m":return t*et;case"seconds":case"second":case"secs":case"sec":case"s":return t*Qe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Rl(e){var r=Math.abs(e);return r>=Me?Math.round(e/Me)+"d":r>=tt?Math.round(e/tt)+"h":r>=et?Math.round(e/et)+"m":r>=Qe?Math.round(e/Qe)+"s":e+"ms"}function Pl(e){var r=Math.abs(e);return r>=Me?zt(e,r,Me,"day"):r>=tt?zt(e,r,tt,"hour"):r>=et?zt(e,r,et,"minute"):r>=Qe?zt(e,r,Qe,"second"):e+" ms"}function zt(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var kn=y((Sd,yo)=>{function wl(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=go(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}yo.exports=wl});var vo=y((Z,Xt)=>{Z.formatArgs=Sl;Z.save=Fl;Z.load=jl;Z.useColors=Tl;Z.storage=Il();Z.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Tl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Sl(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Xt.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Z.log=console.debug||console.log||(()=>{});function Fl(e){try{e?Z.storage.setItem("debug",e):Z.storage.removeItem("debug")}catch{}}function jl(){let e;try{e=Z.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Il(){try{return localStorage}catch{}}Xt.exports=kn()(Z);var{formatters:kl}=Xt.exports;kl.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var Eo=y((Fd,bo)=>{"use strict";bo.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Co=y((jd,Oo)=>{"use strict";var Yl=C("os"),Ao=C("tty"),re=Eo(),{env:N}=process,we;re("no-color")||re("no-colors")||re("color=false")||re("color=never")?we=0:(re("color")||re("colors")||re("color=true")||re("color=always"))&&(we=1);"FORCE_COLOR"in N&&(N.FORCE_COLOR==="true"?we=1:N.FORCE_COLOR==="false"?we=0:we=N.FORCE_COLOR.length===0?1:Math.min(parseInt(N.FORCE_COLOR,10),3));function Yn(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Mn(e,r){if(we===0)return 0;if(re("color=16m")||re("color=full")||re("color=truecolor"))return 3;if(re("color=256"))return 2;if(e&&!r&&we===void 0)return 0;let t=we||0;if(N.TERM==="dumb")return t;if(process.platform==="win32"){let n=Yl.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in N)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in N)||N.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in N)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(N.TEAMCITY_VERSION)?1:0;if(N.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in N){let n=parseInt((N.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(N.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(N.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(N.TERM)||"COLORTERM"in N?1:t}function Ml(e){let r=Mn(e,e&&e.isTTY);return Yn(r)}Oo.exports={supportsColor:Ml,stdout:Yn(Mn(!0,Ao.isatty(1))),stderr:Yn(Mn(!0,Ao.isatty(2)))}});var Po=y((x,Qt)=>{var ql=C("tty"),Zt=C("util");x.init=Kl;x.log=Vl;x.formatArgs=Nl;x.save=xl;x.load=Ul;x.useColors=Ll;x.destroy=Zt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");x.colors=[6,2,3,4,5,1];try{let e=Co();e&&(e.stderr||e).level>=2&&(x.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}x.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function Ll(){return"colors"in x.inspectOpts?Boolean(x.inspectOpts.colors):ql.isatty(process.stderr.fd)}function Nl(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Qt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Dl()+r+" "+e[0]}function Dl(){return x.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Vl(...e){return process.stderr.write(Zt.format(...e)+`
`)}function xl(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Ul(){return process.env.DEBUG}function Kl(e){e.inspectOpts={};let r=Object.keys(x.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=x.inspectOpts[r[t]]}Qt.exports=kn()(x);var{formatters:Ro}=Qt.exports;Ro.o=function(e){return this.inspectOpts.colors=this.useColors,Zt.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};Ro.O=function(e){return this.inspectOpts.colors=this.useColors,Zt.inspect(e,this.inspectOpts)}});var Ln=y((Id,qn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?qn.exports=vo():qn.exports=Po()});var Nn=y(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.patternPluginFanctory=I.isResultPackage=I.successThen=I.constructRuleCb=I.extractFnArgs=I.paramMatches=I.searchParamsKey=I.pluginHasFunc=I.checkPluginArg=void 0;var Ot=_e(),Gl=Ot.__importDefault(qt()),Bl=Ot.__importDefault(yt()),ue=pe(),$l=vt(),Jl=de(),Hl=nn(),Wl=_o(),zl=Ot.__importDefault(Ln()),er=(0,zl.default)("jsonql:validator-core:common");function wo(e){return!(e.filter(r=>ue.KEYWORDS.includes(r)).length>0)}I.checkPluginArg=wo;function Xl(e){return e[ue.PLUGIN_FN_KEY]&&(0,Hl.isFunction)(e[ue.PLUGIN_FN_KEY])}I.pluginHasFunc=Xl;function To(e){let r=So(e.main.toString());return r.pop(),r}function Zl(e){let r=To(e);if(r.length===0)return e;if(!wo(r))throw new Bl.default(ue.RESERVED_WORD_ERR);return e[ue.PARAMS_KEY]=r,e}I.searchParamsKey=Zl;function Ql(e){let r=To(e),t=r.length;if(t===0&&!e[ue.PARAMS_KEY])return!0;let n=e.params!==void 0&&Array.isArray(e.params)?e.params:!1;return n===!1?!1:t>0&&t===n.length&&!r.filter((i,s)=>i!==n[s]).length}I.paramMatches=Ql;function So(e){return e.split("(")[1].split(")")[0].split(",").map(r=>r.trim()).filter(r=>r!=="")}I.extractFnArgs=So;function ef(e,r,t){return(n,i,s)=>Ot.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(r,null,[n]).then(Fo(e,n,i,s)).catch(o=>(er("failed",e,n,o,s),Promise.reject(new Gl.default(t,s))))})}I.constructRuleCb=ef;function Fo(e,r,t,n){return i=>{let s=n[0];er("passed",e,r,i,n),er("lastResult",t);let o={[ue.IDX_KEY]:s,[ue.VALUE_KEY]:r};if(t===void 0)return{[e]:o};if(e in t){let a=t[e];return jo(a)?a.includes(o)||t[e].push(o):a[ue.IDX_KEY]!==s&&(t[e]=(0,$l.toArray)(t[e]).concat([o])),t}return(0,Jl.assign)(t,{[e]:o})}}I.successThen=Fo;function jo(e,r=ue.IDX_KEY){try{if(Array.isArray(e))return!!e.filter(t=>r in t).length}catch(t){er("isResultPackage",t)}return!1}I.isResultPackage=jo;function tf(e){let r=(0,Wl.getRegex)(e);return t=>Ot.__awaiter(this,void 0,void 0,function*(){return r.test(t)?Promise.resolve(!0):Promise.reject(!1)})}I.patternPluginFanctory=tf});var rr=y(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.ValidatorPlugins=void 0;var ko=_e(),Ct=ko.__importDefault(yt()),L=pe(),rf=In(),Io=yn(),rt=Nn(),nf=Wt(),sf=ko.__importDefault(Ln()),qe=(0,sf.default)("jsonql:validator-core:validator-plugin"),Dn=class{constructor(r){this.$version=r,this._plugins=new Map,this._internalPluginNames=[],nf.plugins.forEach(t=>{let n=t[L.NAME_KEY];this._internalPluginNames.push(n),this._registerPlugin(n,t,!0)})}lookupPlugin(r,t){let n=r[L.PLUGIN_KEY];if(n&&this._plugins.has(n)){let i=this._plugins.get(n);if(i[L.PLUGIN_FN_KEY]&&!i[L.PARAMS_KEY]&&(i[L.VALIDATE_ASYNC_KEY]=(0,Io.promisify)(i[L.PLUGIN_FN_KEY])),i&&i[L.VALIDATE_ASYNC_KEY]&&!i[L.PARAMS_KEY])return(0,rt.constructRuleCb)(t,i[L.VALIDATE_ASYNC_KEY],n);if(i&&i[L.PARAMS_KEY]){qe("pluginConfig --->",i),qe("input----------->",r);let s=r;return(0,rt.constructRuleCb)(t,(0,Io.promisify)((0,rf.curryPlugin)(s,i)),n)}}throw qe("lookupPlugin","unable to find",n),new Ct.default(`Unable to find plugin: ${n}`)}registerPlugin(r,t){this._registerPlugin(r,t)}_registerExternalPlugin(r,t){this._registerPlugin(r,t,!1,!0)}export(r=!0){let t=[];return this._plugins.forEach((n,i)=>{!this.isBuiltIn(i)&&n.external===r&&t.push(n)}),t}isBuiltIn(r){return this._internalPluginNames.includes(r)}_registerPlugin(r,t,n=!1,i=!1){if(!n){if(this._plugins.has(r))throw new Ct.default(`plugin ${r} already existed!`);if(!(0,rt.pluginHasFunc)(t))throw qe("registerPlugin",L.MAIN_NOT_FOUND_ERR),new Ct.default(L.MAIN_NOT_FOUND_ERR);if(t[L.PARAMS_KEY]===void 0)t=(0,rt.searchParamsKey)(t),qe("auto generate params for plugin",t);else if(t[L.PARAMS_KEY]!==void 0){if(!(0,rt.checkPluginArg)(t[L.PARAMS_KEY]))throw qe("registerPlugin",L.RESERVED_WORD_ERR),new Ct.default(L.RESERVED_WORD_ERR);if(!(0,rt.paramMatches)(t))throw qe("registerPlugin",L.ARG_NOT_MATCH_ERR),new Ct.default(L.ARG_NOT_MATCH_ERR)}}t.name=r,t.external=i,this._plugins.set(r,t)}};tr.ValidatorPlugins=Dn});var Kn=y(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.VALUE_KEY=p.IDX_KEY=p.PARAMS_KEY=p.NAME_KEY=p.RULES_KEY=p.PATTERN_KEY=p.PLUGIN_FN_KEY=p.PLUGIN_KEY=p.VALIDATE_ASYNC_KEY=p.VALIDATE_KEY=p.KEYWORDS=p.ARRAY_TS_TYPE_LFT=p.ARRAY_TYPE_RGT=p.ARRAY_TYPE_LFT=p.OR_SEPERATOR=p.OBJECT_TYPE=p.ARRAY_TYPE=p.NUMBER_TYPE=p.STRING_TYPE=p.BOOLEAN_TYPE=p.ValidatorPlugins=p.patternPluginFanctory=p.isResultPackage=p.successThen=p.constructRuleCb=p.pluginHasFunc=p.checkPluginArg=p.curryPlugin=p.plugins=p.reversePromisifyResult=p.promisify=p.generateReversePromisesFn=p.checkUnionSync=p.checkUnion=p.combineCheck=p.isEmptyObject=p.objectTypeHandler=p.checkObject=p.arrayTypeHandler=p.isArrayLike=p.checkArray=p.checkAny=p.checkUnsigned=p.checkFloat=p.checkInteger=p.checkNumber=p.checkBoolean=p.checkString=void 0;var of=an();Object.defineProperty(p,"checkString",{enumerable:!0,get:function(){return of.checkString}});var af=un();Object.defineProperty(p,"checkBoolean",{enumerable:!0,get:function(){return af.checkBoolean}});var nr=$e();Object.defineProperty(p,"checkNumber",{enumerable:!0,get:function(){return nr.checkNumber}});Object.defineProperty(p,"checkInteger",{enumerable:!0,get:function(){return nr.checkInteger}});Object.defineProperty(p,"checkFloat",{enumerable:!0,get:function(){return nr.checkFloat}});Object.defineProperty(p,"checkUnsigned",{enumerable:!0,get:function(){return nr.checkUnsigned}});var uf=fn();Object.defineProperty(p,"checkAny",{enumerable:!0,get:function(){return uf.checkAny}});var Vn=Ut();Object.defineProperty(p,"checkArray",{enumerable:!0,get:function(){return Vn.checkArray}});Object.defineProperty(p,"isArrayLike",{enumerable:!0,get:function(){return Vn.isArrayLike}});Object.defineProperty(p,"arrayTypeHandler",{enumerable:!0,get:function(){return Vn.arrayTypeHandler}});var xn=_n();Object.defineProperty(p,"checkObject",{enumerable:!0,get:function(){return xn.checkObject}});Object.defineProperty(p,"objectTypeHandler",{enumerable:!0,get:function(){return xn.objectTypeHandler}});Object.defineProperty(p,"isEmptyObject",{enumerable:!0,get:function(){return xn.isEmptyObject}});var cf=Et();Object.defineProperty(p,"combineCheck",{enumerable:!0,get:function(){return cf.combineCheck}});var Un=ro();Object.defineProperty(p,"checkUnion",{enumerable:!0,get:function(){return Un.checkUnion}});Object.defineProperty(p,"checkUnionSync",{enumerable:!0,get:function(){return Un.checkUnionSync}});Object.defineProperty(p,"generateReversePromisesFn",{enumerable:!0,get:function(){return Un.generateReversePromisesFn}});var Yo=yn();Object.defineProperty(p,"promisify",{enumerable:!0,get:function(){return Yo.promisify}});Object.defineProperty(p,"reversePromisifyResult",{enumerable:!0,get:function(){return Yo.reversePromisifyResult}});var lf=Wt();Object.defineProperty(p,"plugins",{enumerable:!0,get:function(){return lf.plugins}});var ff=In();Object.defineProperty(p,"curryPlugin",{enumerable:!0,get:function(){return ff.curryPlugin}});var nt=Nn();Object.defineProperty(p,"checkPluginArg",{enumerable:!0,get:function(){return nt.checkPluginArg}});Object.defineProperty(p,"pluginHasFunc",{enumerable:!0,get:function(){return nt.pluginHasFunc}});Object.defineProperty(p,"constructRuleCb",{enumerable:!0,get:function(){return nt.constructRuleCb}});Object.defineProperty(p,"successThen",{enumerable:!0,get:function(){return nt.successThen}});Object.defineProperty(p,"isResultPackage",{enumerable:!0,get:function(){return nt.isResultPackage}});Object.defineProperty(p,"patternPluginFanctory",{enumerable:!0,get:function(){return nt.patternPluginFanctory}});var hf=rr();Object.defineProperty(p,"ValidatorPlugins",{enumerable:!0,get:function(){return hf.ValidatorPlugins}});var k=pe();Object.defineProperty(p,"BOOLEAN_TYPE",{enumerable:!0,get:function(){return k.BOOLEAN_TYPE}});Object.defineProperty(p,"STRING_TYPE",{enumerable:!0,get:function(){return k.STRING_TYPE}});Object.defineProperty(p,"NUMBER_TYPE",{enumerable:!0,get:function(){return k.NUMBER_TYPE}});Object.defineProperty(p,"ARRAY_TYPE",{enumerable:!0,get:function(){return k.ARRAY_TYPE}});Object.defineProperty(p,"OBJECT_TYPE",{enumerable:!0,get:function(){return k.OBJECT_TYPE}});Object.defineProperty(p,"OR_SEPERATOR",{enumerable:!0,get:function(){return k.OR_SEPERATOR}});Object.defineProperty(p,"ARRAY_TYPE_LFT",{enumerable:!0,get:function(){return k.ARRAY_TYPE_LFT}});Object.defineProperty(p,"ARRAY_TYPE_RGT",{enumerable:!0,get:function(){return k.ARRAY_TYPE_RGT}});Object.defineProperty(p,"ARRAY_TS_TYPE_LFT",{enumerable:!0,get:function(){return k.ARRAY_TS_TYPE_LFT}});Object.defineProperty(p,"KEYWORDS",{enumerable:!0,get:function(){return k.KEYWORDS}});Object.defineProperty(p,"VALIDATE_KEY",{enumerable:!0,get:function(){return k.VALIDATE_KEY}});Object.defineProperty(p,"VALIDATE_ASYNC_KEY",{enumerable:!0,get:function(){return k.VALIDATE_ASYNC_KEY}});Object.defineProperty(p,"PLUGIN_KEY",{enumerable:!0,get:function(){return k.PLUGIN_KEY}});Object.defineProperty(p,"PLUGIN_FN_KEY",{enumerable:!0,get:function(){return k.PLUGIN_FN_KEY}});Object.defineProperty(p,"PATTERN_KEY",{enumerable:!0,get:function(){return k.PATTERN_KEY}});Object.defineProperty(p,"RULES_KEY",{enumerable:!0,get:function(){return k.RULES_KEY}});Object.defineProperty(p,"NAME_KEY",{enumerable:!0,get:function(){return k.NAME_KEY}});Object.defineProperty(p,"PARAMS_KEY",{enumerable:!0,get:function(){return k.PARAMS_KEY}});Object.defineProperty(p,"IDX_KEY",{enumerable:!0,get:function(){return k.IDX_KEY}});Object.defineProperty(p,"VALUE_KEY",{enumerable:!0,get:function(){return k.VALUE_KEY}})});var Rt=y(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.RETURN_AS_RAW=O.RETURN_AS_ARR=O.RETURN_AS_OBJ=O.TS_TYPE_NAME=O.TS_TYPE_REF=O.TS_TYPE_LIT=O.DEFAULT_VALUE=O.TS_ARRAY_TYPE=O.TS_UNION_TYPE=O.SPREAD_ARG_TYPE=O.IS_SPREAD_VALUES_KEY=O.SPREAD_PREFIX=O.EXCEPTION_CASE_ERR=O.PARAMS_NOT_ARRAY_ERR=O.ARGS_NOT_ARRAY_ERR=void 0;O.ARGS_NOT_ARRAY_ERR="Input argument is not an array!";O.PARAMS_NOT_ARRAY_ERR="Parameter is not an array";O.EXCEPTION_CASE_ERR="Exception happened don't know how to handle it";O.SPREAD_PREFIX="$_spread_arg_";O.IS_SPREAD_VALUES_KEY="$$is_spread_values";O.SPREAD_ARG_TYPE="RestElement";O.TS_UNION_TYPE="TsUnionType";O.TS_ARRAY_TYPE="TsArrayType";O.DEFAULT_VALUE="defaultvalue";O.TS_TYPE_LIT="TsTypeLiteral";O.TS_TYPE_REF="TsTypeReference";O.TS_TYPE_NAME="tstype";O.RETURN_AS_OBJ="object";O.RETURN_AS_ARR="array";O.RETURN_AS_RAW="raw"});var qo=y((Ld,Mo)=>{var it=1e3,st=it*60,ot=st*60,Le=ot*24,df=Le*7,pf=Le*365.25;Mo.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return _f(e);if(t==="number"&&isFinite(e))return r.long?gf(e):mf(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function _f(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*pf;case"weeks":case"week":case"w":return t*df;case"days":case"day":case"d":return t*Le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ot;case"minutes":case"minute":case"mins":case"min":case"m":return t*st;case"seconds":case"second":case"secs":case"sec":case"s":return t*it;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function mf(e){var r=Math.abs(e);return r>=Le?Math.round(e/Le)+"d":r>=ot?Math.round(e/ot)+"h":r>=st?Math.round(e/st)+"m":r>=it?Math.round(e/it)+"s":e+"ms"}function gf(e){var r=Math.abs(e);return r>=Le?ir(e,r,Le,"day"):r>=ot?ir(e,r,ot,"hour"):r>=st?ir(e,r,st,"minute"):r>=it?ir(e,r,it,"second"):e+" ms"}function ir(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var Gn=y((Nd,Lo)=>{function yf(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=qo(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Lo.exports=yf});var No=y((Q,sr)=>{Q.formatArgs=bf;Q.save=Ef;Q.load=Af;Q.useColors=vf;Q.storage=Of();Q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function vf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bf(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+sr.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}Q.log=console.debug||console.log||(()=>{});function Ef(e){try{e?Q.storage.setItem("debug",e):Q.storage.removeItem("debug")}catch{}}function Af(){let e;try{e=Q.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Of(){try{return localStorage}catch{}}sr.exports=Gn()(Q);var{formatters:Cf}=sr.exports;Cf.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var Vo=y((Dd,Do)=>{"use strict";Do.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Ko=y((Vd,Uo)=>{"use strict";var Rf=C("os"),xo=C("tty"),ne=Vo(),{env:D}=process,Te;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?Te=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(Te=1);"FORCE_COLOR"in D&&(D.FORCE_COLOR==="true"?Te=1:D.FORCE_COLOR==="false"?Te=0:Te=D.FORCE_COLOR.length===0?1:Math.min(parseInt(D.FORCE_COLOR,10),3));function Bn(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function $n(e,r){if(Te===0)return 0;if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2;if(e&&!r&&Te===void 0)return 0;let t=Te||0;if(D.TERM==="dumb")return t;if(process.platform==="win32"){let n=Rf.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in D)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in D)||D.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in D)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(D.TEAMCITY_VERSION)?1:0;if(D.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in D){let n=parseInt((D.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(D.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(D.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(D.TERM)||"COLORTERM"in D?1:t}function Pf(e){let r=$n(e,e&&e.isTTY);return Bn(r)}Uo.exports={supportsColor:Pf,stdout:Bn($n(!0,xo.isatty(1))),stderr:Bn($n(!0,xo.isatty(2)))}});var Bo=y((U,ar)=>{var wf=C("tty"),or=C("util");U.init=Yf;U.log=jf;U.formatArgs=Sf;U.save=If;U.load=kf;U.useColors=Tf;U.destroy=or.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");U.colors=[6,2,3,4,5,1];try{let e=Ko();e&&(e.stderr||e).level>=2&&(U.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}U.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function Tf(){return"colors"in U.inspectOpts?Boolean(U.inspectOpts.colors):wf.isatty(process.stderr.fd)}function Sf(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+ar.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Ff()+r+" "+e[0]}function Ff(){return U.inspectOpts.hideDate?"":new Date().toISOString()+" "}function jf(...e){return process.stderr.write(or.format(...e)+`
`)}function If(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function kf(){return process.env.DEBUG}function Yf(e){e.inspectOpts={};let r=Object.keys(U.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=U.inspectOpts[r[t]]}ar.exports=Gn()(U);var{formatters:Go}=ar.exports;Go.o=function(e){return this.inspectOpts.colors=this.useColors,or.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};Go.O=function(e){return this.inspectOpts.colors=this.useColors,or.inspect(e,this.inspectOpts)}});var ur=y((xd,Jn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Jn.exports=No():Jn.exports=Bo()});var Hn=y(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.getKey=Y.checkDuplicateRules=Y.getOptionalValue=Y.unwrapPreparedValidateResult=Y.processValidateResultsAsArrOfObj=Y.processValidateResults=Y.processValidateResultsAsObj=Y.processValidateResultsAsArr=Y.createAutomaticRules=void 0;var ce=Mt(),T=Kn(),K=Rt(),Mf=rn(),$o=de(),qf=ce.__importDefault(ur()),at=(0,qf.default)("jsonql:validator:class:fn");function Lf(e){return e.map(r=>{let{name:t}=r,n=Vf(r),i=r[K.TS_TYPE_NAME]||r.type;return at("createAutomaticRules",t,i),r[T.RULES_KEY]=[(0,T.constructRuleCb)(t,n,i)],r})}Y.createAutomaticRules=Lf;function Nf(e,r){return ce.__awaiter(this,void 0,void 0,function*(){return Jo(e,r).then(Wo)})}Y.processValidateResultsAsArr=Nf;function Df(e,r){return Ho(e,r).reduce((t,n)=>(0,$o.assign)(t,n),{})}Y.processValidateResultsAsObj=Df;function Jo(e,r){return ce.__awaiter(this,void 0,void 0,function*(){return e.map(t=>T.VALUE_KEY in r[t]?r[t][T.VALUE_KEY]:(0,T.isResultPackage)(r[t])?{[K.IS_SPREAD_VALUES_KEY]:r[t].map(n=>n[T.VALUE_KEY])}:(at(`Return result when we couldn't find way to destruct: ${t}`,r[t]),r[t]))})}Y.processValidateResults=Jo;function Ho(e,r){return e.map(t=>{switch(!0){case T.VALUE_KEY in r[t]:return{[t]:r[t][T.VALUE_KEY]};case(0,T.isResultPackage)(r[t]):return{[t]:r[t].map(n=>n[T.VALUE_KEY])};default:return{[t]:r[t]}}})}Y.processValidateResultsAsArrOfObj=Ho;function Wo(e){return ce.__awaiter(this,void 0,void 0,function*(){at("unwrapPreparedValidateResult",e);let r=e.length;if(r===1&&(0,$o.objectHasKey)(e[0],K.IS_SPREAD_VALUES_KEY))return e[0][K.IS_SPREAD_VALUES_KEY];if((0,T.isResultPackage)(e,K.IS_SPREAD_VALUES_KEY)){let t=[];for(let n=0;n<r;++n)K.IS_SPREAD_VALUES_KEY in e[n]?t=t.concat(e[n][K.IS_SPREAD_VALUES_KEY]):t.push(e[n]);return t}return e})}Y.unwrapPreparedValidateResult=Wo;function Vf(e){switch(at("getValidateRules ast",e),e[K.TS_TYPE_NAME]){case K.TS_UNION_TYPE:return function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.checkUnion)(t,e.type)})};case(K.TS_ARRAY_TYPE||K.SPREAD_ARG_TYPE):return function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkArray)(t,e.types)})};case(K.TS_TYPE_REF||K.TS_TYPE_LIT):return function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(T.checkAny)(t)})};case K.SPREAD_ARG_TYPE:return function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.types))(t)})};default:return(0,T.checkString)(e.type)?(at("validation type",e.type),function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)((0,T.combineCheck)(e.type))(t)})}):(at("getValidateRules",e),function(t){return ce.__awaiter(this,void 0,void 0,function*(){return(0,T.promisify)(Mf.notEmpty)(t,!0)})})}}function xf(e,r){return r.tstype!==K.SPREAD_ARG_TYPE&&e===void 0?r[K.DEFAULT_VALUE]!==void 0?r[K.DEFAULT_VALUE]:void 0:e}Y.getOptionalValue=xf;function Uf(e){return[T.VALIDATE_KEY,T.VALIDATE_ASYNC_KEY,T.PLUGIN_FN_KEY].filter(r=>e[r]!==void 0)}Y.checkDuplicateRules=Uf;function Kf(e){let r=Object.keys(e);return r.length?r[0]:void 0}Y.getKey=Kf});var Zo=y(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ValidatorBase=void 0;var Ne=Mt(),zo=Ne.__importDefault(qt()),Gf=Ne.__importDefault(yt()),Bf=rn(),$f=vt(),cr=de(),Xo=nn(),Jf=on(),F=Kn(),ut=Hn(),lr=Rt(),Hf=Ne.__importDefault(ur()),$=(0,Hf.default)("jsonql:validator:validator-base"),Wn=class{constructor(r,t){this._validatorPluginsInstance=t,this._astWithBaseRules=(0,ut.createAutomaticRules)(r),this._arguments=this._astWithBaseRules.map(n=>n[F.NAME_KEY])}validate(r){let t=this._normalizeArgValues(r);return(0,Jf.queuePromisesProcess)(t,void 0)}prepareArgValues(r){return this._normalizeArgValues(r,!1)}get schema(){return this._schema||this._astWithBaseRules}addValidationRules(r){$("addValidationRules",r);let t={};for(let n in r)t[n]=(0,$f.toArray)(r[n]).map(i=>(0,Xo.isFunction)(i)?this._updateInput(i):i);this._createSchema(t)}_updateInput(r){return{[F.VALIDATE_ASYNC_KEY]:(0,Xo.isAsyncFunction)(r)?r:(0,F.promisify)(r)}}_normalizeArgValues(r,t=!0){$("_normalizeArgValues",r);let n=this.schema,i=n.length;if(i===0)return[];if(!(0,F.checkArray)(r))throw $(r),new zo.default(lr.ARGS_NOT_ARRAY_ERR,r);let s=r.length;switch(!0){case s===i:return t===!1?(0,cr.arrToObj)(r,(o,a)=>({[n[a].name]:o})):r.map((o,a)=>this._prepareForExecution(o,n[a],a));case s<i:return $("Values pass less than params"),t===!1?(0,cr.arrToObj)(n,(o,a)=>{let u=(0,ut.getOptionalValue)(r[a],o);return{[o.name]:u}}):n.map((o,a)=>{let u=(0,ut.getOptionalValue)(r[a],o);return this._prepareForExecution(u,o,a)});case s>i:return $("spread params",s,i),this._processSpreadLikeArg(r,n,t);default:throw new zo.default(lr.EXCEPTION_CASE_ERR,[s,i])}}_processSpreadLikeArg(r,t,n){let i=t.filter(s=>s.tstype===lr.SPREAD_ARG_TYPE)[0];return n===!1?r.map((s,o)=>t[o]?t[o].name!==i.name?{[t[o].name]:s}:{[i.name]:[s]}:{[i.name]:[s]}).reduce((s,o)=>{if(!(0,ut.getKey)(s))return o;let u=(0,ut.getKey)(o);return s[u]?(s[u]=s[u].concat(o[u]),s):(0,cr.assign)({},s,o)},{}):r.map((s,o)=>{let a=t[o]||(0,cr.assign)({},i,{name:`${lr.SPREAD_PREFIX}${o}`});return $("spread param",s,a.name),this._prepareForExecution(s,a,o)})}_prepareForExecution(r,t,n){let{rules:i,required:s,name:o}=t;return i&&i.length?i.map((a,u)=>r===void 0&&!s?($("skip the validation",s),f=>Ne.__awaiter(this,void 0,void 0,function*(){return(0,F.successThen)(o,r,f,[n,u])(!0)})):f=>Ne.__awaiter(this,void 0,void 0,function*(){return Reflect.apply(a,null,[r,f,[n,u]]).then(c=>($("Post rule result",c),c))})):($("No rules to run"),()=>Ne.__awaiter(this,void 0,void 0,function*(){return!0}))}_createSchema(r){let t=this._astWithBaseRules;(0,Bf.notEmpty)(r,!0)&&(t=this._applyObjectInput(t,r)),$("_createSchema",t),this._schema=t}_applyObjectInput(r,t){return r.map(n=>{var i;let s=n.name;if(t[s]){let o=t[s].map(u=>(u.name=s,u)),a=this._transformInput(o,s);a&&a.length&&(n[F.RULES_KEY]=(i=n[F.RULES_KEY])===null||i===void 0?void 0:i.concat(a))}return n})}_transformInput(r,t){return $("_transformInput",r),r.map((n,i)=>{let s=(0,ut.checkDuplicateRules)(n);if(s.length>1)throw new Error(`You can only set one rule at a time! We found ${s.join(",")}`);let o=n.name||`customPluginName${i}`;switch(!0){case n[F.PLUGIN_KEY]!==void 0:return $("Should got here ----->",n[F.PLUGIN_KEY]),this._lookupPlugin(n,t);case n[F.VALIDATE_KEY]!==void 0:return $(`${F.VALIDATE_KEY} ----->`,n),(0,F.constructRuleCb)(t,(0,F.promisify)(n[F.VALIDATE_KEY]),o);case n[F.VALIDATE_ASYNC_KEY]!==void 0:return $(`${F.VALIDATE_ASYNC_KEY} ---->`,n),(0,F.constructRuleCb)(t,n[F.VALIDATE_ASYNC_KEY],o);default:throw new Gf.default(`unable to find rule for ${t},
            we expect ${F.PLUGIN_KEY}, ${F.VALIDATE_KEY} or ${F.VALIDATE_ASYNC_KEY}`)}})}_lookupPlugin(r,t){try{if(this._validatorPluginsInstance)return $("_lookupPlugin --->",r,t),this._validatorPluginsInstance.lookupPlugin(r,t)}catch(n){$("catch _lookupPlugin error",n)}return(0,F.constructRuleCb)(t,()=>Ne.__awaiter(this,void 0,void 0,function*(){return Promise.reject(!1)}),"NO_PLUGIN_DUMMY_FUNCTION")}};fr.ValidatorBase=Wn});var ra=y(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.Validator=void 0;var dr=Mt(),Wf=Zo(),Qo=rr(),ea=Hn(),hr=Rt(),zf=dr.__importDefault(ur()),ta=(0,zf.default)("jsonql:validator:class:index"),zn=class extends Wf.ValidatorBase{constructor(r,t){super(r,t&&t instanceof Qo.ValidatorPlugins?t:new Qo.ValidatorPlugins(-1))}validate(r,t=hr.RETURN_AS_ARR){let n=Object.create(null,{validate:{get:()=>super.validate}});return dr.__awaiter(this,void 0,void 0,function*(){return n.validate.call(this,r).then(i=>{switch(t){case hr.RETURN_AS_RAW:return i;case hr.RETURN_AS_ARR:return this._prepareValidateResultForFuncCall(i);case hr.RETURN_AS_OBJ:default:return this._prepareValidateResultAsObject(i)}})})}registerPlugin(r,t){this._validatorPluginsInstance&&this._validatorPluginsInstance.registerPlugin(r,t)}_prepareValidateResultForFuncCall(r){return dr.__awaiter(this,void 0,void 0,function*(){return ta("validateResult return as array",this._arguments,r),(0,ea.processValidateResultsAsArr)(this._arguments,r)})}_prepareValidateResultAsObject(r){return dr.__awaiter(this,void 0,void 0,function*(){return ta("validateResult return as object",this._arguments,r),(0,ea.processValidateResultsAsObj)(this._arguments,r)})}};pr.Validator=zn});var na=y(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.RETURN_AS_RAW=S.RETURN_AS_ARR=S.RETURN_AS_OBJ=S.TS_TYPE_NAME=S.TS_TYPE_REF=S.TS_TYPE_LIT=S.DEFAULT_VALUE=S.TS_ARRAY_TYPE=S.TS_UNION_TYPE=S.SPREAD_ARG_TYPE=S.Validator=void 0;var Xf=ra();Object.defineProperty(S,"Validator",{enumerable:!0,get:function(){return Xf.Validator}});var le=Rt();Object.defineProperty(S,"SPREAD_ARG_TYPE",{enumerable:!0,get:function(){return le.SPREAD_ARG_TYPE}});Object.defineProperty(S,"TS_UNION_TYPE",{enumerable:!0,get:function(){return le.TS_UNION_TYPE}});Object.defineProperty(S,"TS_ARRAY_TYPE",{enumerable:!0,get:function(){return le.TS_ARRAY_TYPE}});Object.defineProperty(S,"DEFAULT_VALUE",{enumerable:!0,get:function(){return le.DEFAULT_VALUE}});Object.defineProperty(S,"TS_TYPE_LIT",{enumerable:!0,get:function(){return le.TS_TYPE_LIT}});Object.defineProperty(S,"TS_TYPE_REF",{enumerable:!0,get:function(){return le.TS_TYPE_REF}});Object.defineProperty(S,"TS_TYPE_NAME",{enumerable:!0,get:function(){return le.TS_TYPE_NAME}});Object.defineProperty(S,"RETURN_AS_OBJ",{enumerable:!0,get:function(){return le.RETURN_AS_OBJ}});Object.defineProperty(S,"RETURN_AS_ARR",{enumerable:!0,get:function(){return le.RETURN_AS_ARR}});Object.defineProperty(S,"RETURN_AS_RAW",{enumerable:!0,get:function(){return le.RETURN_AS_RAW}})});var ia=y(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.ExternalPluginLoader=void 0;var Zf=rr(),Xn=class extends Zf.ValidatorPlugins{registerExternalPlugin(r,t){this._registerExternalPlugin(r,t)}};_r.ExternalPluginLoader=Xn});var sa=y(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.cloneDeep=ct.cloneDeepCheap=void 0;var Qf=Ee(),eh=e=>JSON.parse(JSON.stringify(e));ct.cloneDeepCheap=eh;function Pt(e){function r(u){for(let f in e)Object.prototype.hasOwnProperty.call(e,f)&&(u[f]=Pt(e[f]))}function t(){let u={};return r(u),u}function n(){return e.map(function(u){return Pt(u)})}function i(){let u=new Map;for(let[f,c]of e)u.set(f,Pt(c));return u}function s(){let u=new Set;for(let f of e)u.add(Pt(f));return u}function o(){let u=this,f=e.bind(u);return r(f),f}switch((0,Qf.trueTypeOf)(e)){case"object":return t();case"array":return n();case"map":return i();case"set":return s();case"function":return o();default:return e}}ct.cloneDeep=Pt});var aa=y((Wd,oa)=>{var lt=1e3,ft=lt*60,ht=ft*60,De=ht*24,th=De*7,rh=De*365.25;oa.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return nh(e);if(t==="number"&&isFinite(e))return r.long?sh(e):ih(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function nh(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*rh;case"weeks":case"week":case"w":return t*th;case"days":case"day":case"d":return t*De;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ht;case"minutes":case"minute":case"mins":case"min":case"m":return t*ft;case"seconds":case"second":case"secs":case"sec":case"s":return t*lt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ih(e){var r=Math.abs(e);return r>=De?Math.round(e/De)+"d":r>=ht?Math.round(e/ht)+"h":r>=ft?Math.round(e/ft)+"m":r>=lt?Math.round(e/lt)+"s":e+"ms"}function sh(e){var r=Math.abs(e);return r>=De?mr(e,r,De,"day"):r>=ht?mr(e,r,ht,"hour"):r>=ft?mr(e,r,ft,"minute"):r>=lt?mr(e,r,lt,"second"):e+" ms"}function mr(e,r,t,n){var i=r>=t*1.5;return Math.round(e/t)+" "+n+(i?"s":"")}});var ei=y((zd,ua)=>{function oh(e){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=aa(),t.destroy=f,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=r;function t(c){let h,l=null,d,_;function m(...g){if(!m.enabled)return;let b=m,P=Number(new Date),J=P-(h||P);b.diff=J,b.prev=h,b.curr=P,h=P,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,W)=>{if(w==="%%")return"%";E++;let j=t.formatters[W];if(typeof j=="function"){let H=g[E];w=j.call(b,H),g.splice(E,1),E--}return w}),t.formatArgs.call(b,g),(b.log||t.log).apply(b,g)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==t.namespaces&&(d=t.namespaces,_=t.enabled(c)),_),set:g=>{l=g}}),typeof t.init=="function"&&t.init(m),m}function n(c,h){let l=t(this.namespace+(typeof h>"u"?":":h)+c);return l.log=this.log,l}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=t.skips.length;h<l;h++)if(t.skips[h].test(c))return!1;for(h=0,l=t.names.length;h<l;h++)if(t.names[h].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}ua.exports=oh});var ca=y((ee,gr)=>{ee.formatArgs=uh;ee.save=ch;ee.load=lh;ee.useColors=ah;ee.storage=fh();ee.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ee.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ah(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function uh(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+gr.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),e.splice(n,0,r)}ee.log=console.debug||console.log||(()=>{});function ch(e){try{e?ee.storage.setItem("debug",e):ee.storage.removeItem("debug")}catch{}}function lh(){let e;try{e=ee.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function fh(){try{return localStorage}catch{}}gr.exports=ei()(ee);var{formatters:hh}=gr.exports;hh.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var fa=y((Xd,la)=>{"use strict";la.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":e.length===1?"-":"--",n=r.indexOf(t+e),i=r.indexOf("--");return n!==-1&&(i===-1||n<i)}});var pa=y((Zd,da)=>{"use strict";var dh=C("os"),ha=C("tty"),ie=fa(),{env:V}=process,Se;ie("no-color")||ie("no-colors")||ie("color=false")||ie("color=never")?Se=0:(ie("color")||ie("colors")||ie("color=true")||ie("color=always"))&&(Se=1);"FORCE_COLOR"in V&&(V.FORCE_COLOR==="true"?Se=1:V.FORCE_COLOR==="false"?Se=0:Se=V.FORCE_COLOR.length===0?1:Math.min(parseInt(V.FORCE_COLOR,10),3));function ti(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function ri(e,r){if(Se===0)return 0;if(ie("color=16m")||ie("color=full")||ie("color=truecolor"))return 3;if(ie("color=256"))return 2;if(e&&!r&&Se===void 0)return 0;let t=Se||0;if(V.TERM==="dumb")return t;if(process.platform==="win32"){let n=dh.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in V)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in V)||V.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in V)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(V.TEAMCITY_VERSION)?1:0;if(V.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in V){let n=parseInt((V.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(V.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(V.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(V.TERM)||"COLORTERM"in V?1:t}function ph(e){let r=ri(e,e&&e.isTTY);return ti(r)}da.exports={supportsColor:ph,stdout:ti(ri(!0,ha.isatty(1))),stderr:ti(ri(!0,ha.isatty(2)))}});var ma=y((G,vr)=>{var _h=C("tty"),yr=C("util");G.init=Ah;G.log=vh;G.formatArgs=gh;G.save=bh;G.load=Eh;G.useColors=mh;G.destroy=yr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");G.colors=[6,2,3,4,5,1];try{let e=pa();e&&(e.stderr||e).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,r)=>{let t=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[r];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[t]=n,e},{});function mh(){return"colors"in G.inspectOpts?Boolean(G.inspectOpts.colors):_h.isatty(process.stderr.fd)}function gh(e){let{namespace:r,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${r} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+vr.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=yh()+r+" "+e[0]}function yh(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}function vh(...e){return process.stderr.write(yr.format(...e)+`
`)}function bh(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Eh(){return process.env.DEBUG}function Ah(e){e.inspectOpts={};let r=Object.keys(G.inspectOpts);for(let t=0;t<r.length;t++)e.inspectOpts[r[t]]=G.inspectOpts[r[t]]}vr.exports=ei()(G);var{formatters:_a}=vr.exports;_a.o=function(e){return this.inspectOpts.colors=this.useColors,yr.inspect(e,this.inspectOpts).split(`
`).map(r=>r.trim()).join(" ")};_a.O=function(e){return this.inspectOpts.colors=this.useColors,yr.inspect(e,this.inspectOpts)}});var ii=y((Qd,ni)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ni.exports=ca():ni.exports=ma()});var Aa=fe(Ur());import{join as Oh}from"node:path";var ga=fe(na()),ya=fe(ia()),va=fe(qt()),si=fe(vt()),oi=fe(sa());var Qn=fe(pe()),Zn="schema";var ba=fe(ii()),wt=(0,ba.default)("velocejs:validator:main"),br=class{constructor(r){this._validationRules=new Map;this._validators=new Map;this._plugin=new ya.ExternalPluginLoader;this._astMap=(0,oi.cloneDeep)(r);for(let t in this._astMap)this._validators.set(t,new ga.Validator(this._astMap[t],this._plugin))}getValidator(r){if(this._validators.has(r)){let t=this._validators.get(r);return{addValidationRules:this._addValidationRules(r,t),validate:t.validate.bind(t),prepareArgValues:t.prepareArgValues.bind(t)}}throw new va.default(`${r} validator is not registered!`)}addRules(r,t){let n=this.getValidator(r);return n.addValidationRules(t),n}registerPlugin(r,t){this._plugin.registerPlugin(r,t)}export(){let r={};this._validationRules.forEach((n,i)=>{let s=this._validators.get(i);r[i]={[Qn.RULES_KEY]:n,[Zn]:s[Zn]}}),wt("export schema",r);let t=this._plugin.export();return wt("plugin configs",t),{schema:r,plugins:t}}checkRuleCanExport(r){let t=r.filter(n=>n.external).map(n=>n.name);return wt("available externals",t),n=>{let{plugin:i}=n;return i?(wt("check plugin can export",i),this._plugin.isBuiltIn(i)||t.includes(i)):!1}}_appendRules(r,t){if(this._validationRules.has(r)){let n=this._validationRules.get(r);for(let i in n)t[i]&&(n[i]=n[i].concat((0,si.toArray)(t[i])));this._validationRules.set(r,n)}else{let n={};for(let i in t)n[i]=(0,si.toArray)(t[i]);wt("adding new rule",t,n),this._validationRules.set(r,n)}}_addValidationRules(r,t){return n=>{let i=this._checkInput(n);return this._appendRules(r,i),Reflect.apply(t.addValidationRules,t,[i])}}_checkInput(r){let{name:t}=r;if(t){let n=(0,oi.cloneDeep)(r);return delete n.name,{[t]:n}}return r}};var Oa=fe(ii()),Ch=(0,Oa.default)("jsonql:valdiators-server"),Ea=class extends br{constructor(r){super(r)}loadExternalPlugins(r){return Or(this,null,function*(){return(yield this._importExternalPlugins(r)).map(n=>{Ch("loaded plugin",n);let i=this._getPluginValue(n);return this._plugin.registerExternalPlugin(i.name,i),i})})}registerPlugins(r){r.forEach((t,n)=>{this.registerPlugin(n,t)})}_getPluginValue(r){let t=r.default;return t.default?t.default:t}_importExternalPlugins(r){return Or(this,null,function*(){return new Promise((t,n)=>{(0,Aa.default)(Oh(r,"*.js"),(i,s)=>{if(i)return n(`Something went wrong ${i}`);if(s.length===0)return n("No plugin file found, we only support js files at the moment!");Promise.all(s.map(o=>import(o))).then(o=>{t(o)})})})})}};export{Ea as ValidatorsServer};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=esm.js.map
