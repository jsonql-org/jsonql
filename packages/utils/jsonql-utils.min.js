(()=>{function g(e,n=!1){let t=parseFloat(e);if(!isNaN(t))return t;if(n)throw new Error(`${e} is not number like`);return e}function R(e,n=!1){let t=e.toLowerCase();if(t==="false")return!1;if(t==="true")return!0;if(n)throw new Error(`${e} is not boolean like`);return e}function D(e,n){if(n.indexOf(".")>-1){let t=n.split(".").map(p=>g(p)),r=t.length,s=null;for(let p=0;p<r;++p){let a=t[p];s!==null?s=s[a]:s=e[a]}return s}return e[n]}function c(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var b=(e,...n)=>e.length<=n.length?e(...n):(...t)=>b(e,...n,...t),u=(e,...n)=>{if(!n.length)return e;let t=n.shift();if(m(e)&&m(t))for(let r in t)m(t[r])?(e[r]||Object.assign(e,{[r]:{}}),u(e[r],t[r])):Object.assign(e,{[r]:t[r]});return u(e,...n)},m=e=>c(e)==="object"&&!Array.isArray(e);function T(e,n){return n||(n=t=>t),e.flatMap(n)}function y(e){return Object.prototype.toString.call(e)==="[object Object]"}function l(e){return c(e)==="string"}function B(e,n){try{return JSON.stringify(e)===JSON.stringify(n)}catch(t){return!1}}function x(e,n){function t(o){return Object.prototype.toString.call(o).slice(8,-1).toLowerCase()}function r(){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(!x(e[o],n[o]))return!1;return!0}function s(){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&!x(e[o],n[o]))return!1;return!0}function p(){return e.toString()===n.toString()}function a(){return e===n}let A=t(e);switch(A){case"array":return r();case"object":return s();case"function":return p();default:return A!==t(n)?!1:a()}}var h=(e,n)=>!!e.filter(t=>t===n).length,O=e=>Array.isArray(e)?e:[e],M=(e,n=!0)=>{try{return l(e)?JSON.parse(e):JSON.parse(JSON.stringify(e))}catch(t){if(n)return e;throw t}},v=(...e)=>e.join("_"),U=()=>!1,L=e=>{console.dir(e,{depth:null})};function _(e,...n){return e.replace(/{([0-9]+)}/g,(t,r)=>typeof n[r]=="undefined"?t:n[r])}var G=(e,...n)=>(...t)=>n.reduce((r,s)=>Reflect.apply(s,null,O(r)),Reflect.apply(e,null,t));function H(e,n=!1){return e.reduce((t,r)=>t.then(s=>r.then(p=>n===!1?[...s,p]:u(s,p))),Promise.resolve(n===!1?[]:y(n)?n:{}))}function d(e,...n){return(...t)=>n.reduce((r,s)=>r.then(p=>s(p)),Reflect.apply(e,null,t))}function $(e,...n){let t=T(e),r=Reflect.apply(d,null,t);return Reflect.apply(r,null,n)}var z=e=>W(e.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()),W=e=>{let n=e.substring(0,1);return n!=="_"&&n!=="-"?e:e.substring(1)};var P=e=>e&&e.constructor===Object&&Object.keys(e).length===0,k=e=>e!=null&&(e+"").trim()!=="";function E(e,n=!1){return Array.isArray(e)?n?!!e.length:!1:y(e)?n?!P(e):!1:k(e)}var K=(e,n)=>!E(e,n);var Q=(e,n)=>n&&y(n)&&e in n?n[e]:void 0,j=(...e)=>Reflect.apply(Object.assign,Object,e),V=(e,n,t={})=>e.map(n).reduce((r,s)=>j(r,s),t),I=(e,n)=>{try{let t=Object.keys(e);return h(t,n)}catch(t){return!1}},Z=e=>Object.freeze(e);var S=["asyncfunction","function"],X=function(e,n=!1){let t=c(e);return S.includes(t)?!0:(n&&console.error(`Expect to be Function type! Got ${typeof e}`),!1)};function Y(e){return c(e)===S[0]}var ee=e=>JSON.parse(JSON.stringify(e));function f(e){function n(o){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=f(e[i]))}function t(){let o={};return n(o),o}function r(){return e.map(function(o){return f(o)})}function s(){let o=new Map;for(let[i,F]of e)o.set(i,f(F));return o}function p(){let o=new Set;for(let i of e)o.add(f(i));return o}function a(){let o=this,i=e.bind(o);return n(i),i}switch(c(e)){case"object":return t();case"array":return r();case"map":return s();case"set":return p();case"function":return a();default:return e}}function ne(...e){try{window&&window.DEBUG&&Reflect.apply(console.log,console,e)}catch(n){return}}var te=e=>{let n=[e];return(...t)=>{try{window&&window.JSONQL_DEBUG&&Reflect.apply(console.info,console,n.concat(t))}catch(r){return}}};function re(e,n,t,r=null){return Object.getOwnPropertyDescriptor(e,n)===void 0&&Object.defineProperty(e,n,{set:t,get:r===null?function(){return null}:r}),e}function J(e,n){let t=Object.getOwnPropertyDescriptor(e,n);return t!==void 0&&t.value?t.value:t}function oe(e,n,t,r=!1){let s=J(e,n);return r===!1&&s!==void 0||Object.defineProperty(e,n,{value:t,writable:r}),e}function C(e){return e instanceof RegExp}function se(e){switch(!0){case C(e):return e;case l(e):return new RegExp(e);default:return!1}}var w=(e=!1)=>{let n=Date.now();return e?Math.floor(n/1e3):n};var N=(e,n)=>{let t=[];for(let r in n)t.push([r,n[r]].join("="));return[e,t.join("&")].join("?")},pe=e=>N(e,q()),q=()=>({_cb:w()});function ie(e){let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(r)}})();
/*!
 * Create an immutable clone of data (an array, object, map, set, etc.)
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * (c) 2022 Joel Chu rewritten in Typescript and fix a lot of coding style
 */
/*!
 * More accurately check the type of a JavaScript object
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 */
//# sourceMappingURL=jsonql-utils.min.js.map
