!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).JsonqlUtils={})}(this,(function(t){"use strict";function e(t,e=!1){const n=parseFloat(t);if(!isNaN(n))return n;if(e)throw new Error(`${t} is not number like`);return t}function n(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const r=(t,e)=>t.includes(e),o=t=>Array.isArray(t)?t:[t];function c(t){return"object"===n(t)}function i(t){if(c(t)){const e=t.constructor.prototype,n="[Object: null prototype]";return e.toString().substring(0,n.length)===n||!1!==c(e)&&Reflect.apply(e.hasOwnProperty,e,["isPrototypeOf"])}return!1}const s=(...t)=>Reflect.apply(Object.assign,Object,t),u=(t,...e)=>t.length<=e.length?t(...e):(...n)=>u(t,...e,...n),l=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(c(t)&&c(n))for(const e in n)c(n[e])?(t[e]||Object.assign(t,{[e]:{}}),l(t[e],n[e])):Object.assign(t,{[e]:n[e]});return l(t,...e)};function a(t,e){return e||(e=t=>t),t.flatMap(e)}function f(t){return"string"===n(t)}function p(t,...e){return(...n)=>e.reduce(((t,e)=>t.then((t=>e(t)))),Reflect.apply(t,null,n))}const y=t=>{const e=t.substring(0,1);return"_"!==e&&"-"!==e?t:t.substring(1)},g=t=>t&&i(t)&&0===Object.keys(t).length,h=t=>null!=t&&""!==(t+"").trim();function b(t,e=!1){return Array.isArray(t)?!!e&&!!t.length:i(t)?!!e&&!g(t):h(t)}const d=["asyncfunction","function"];function O(t,e){const n=Object.getOwnPropertyDescriptor(t,e);return void 0!==n&&n.value?n.value:n}function j(t){return t instanceof RegExp}const w=(t=!1)=>{const e=Date.now();return t?Math.floor(e/1e3):e},m=(t,e)=>{const n=[];for(const t in e)n.push([t,e[t]].join("="));return[t,n.join("&")].join("?")},P=(t="_cb")=>({[t]:w()});t.accessByPath=function(t,n){if(n.indexOf(".")>-1){const r=n.split(".").map((t=>e(t))),o=r.length;let c=null;for(let e=0;e<o;++e){const n=r[e];c=null!==c?c[n]:t[n]}return c}return t[n]},t.arrToObj=(t,e,n={})=>t.map(e).reduce(((t,e)=>s(t,e)),n),t.assign=s,t.cacheBurst=P,t.cacheBurstUrl=t=>m(t,P()),t.chainFns=(t,...e)=>(...n)=>e.reduce(((t,e)=>Reflect.apply(e,null,o(t))),Reflect.apply(t,null,n)),t.chainProcessPromises=p,t.chainPromises=function(t,e=!1){return t.reduce(((t,n)=>t.then((t=>n.then((n=>!1===e?[...t,n]:l(t,n)))))),Promise.resolve(!1===e?[]:i(e)?e:{}))},t.cloneDeep=function t(e){function r(n){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t(e[r]))}switch(n(e)){case"object":return function(){const t={};return r(t),t}();case"array":return e.map((function(e){return t(e)}));case"map":return function(){const n=new Map;for(const[r,o]of e)n.set(r,t(o));return n}();case"set":return function(){const n=new Set;for(const r of e)n.add(t(r));return n}();case"function":return function(){const t=e.bind(this);return r(t),t}();default:return e}},t.cloneDeepCheap=t=>JSON.parse(JSON.stringify(t)),t.createEvtName=(...t)=>t.join("_"),t.curry=u,t.dasherize=t=>y(t.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()),t.flatMap=a,t.formatStr=function(t,...e){return t.replace(/{([0-9]+)}/g,((t,n)=>void 0===e[n]?t:e[n]))},t.getConfigValue=(t,e)=>e&&i(e)&&t in e?e[t]:void 0,t.getLogger=t=>{const e=[t];return(...t)=>{try{window&&window.JSONQL_DEBUG&&Reflect.apply(console.info,console,e.concat(t))}catch(t){return}}},t.getRegex=function(t){switch(!0){case j(t):return t;case f(t):return new RegExp(t);default:return!1}},t.inArray=r,t.injectToFn=function(t,e,n,r=!1){const o=O(t,e);return!1===r&&void 0!==o||Object.defineProperty(t,e,{value:n,writable:r}),t},t.isAsyncFunction=function(t){return n(t)===d[0]},t.isClass=t=>!i(t),t.isEmpty=(t,e)=>!b(t,e),t.isEmptyObj=g,t.isEqual=function t(e,n){function r(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const o=r(e);switch(o){case"array":return function(){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}();case"object":return function(){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!t(e[r],n[r]))return!1;return!0}();case"function":return e.toString()===n.toString();default:return o===r(n)&&e===n}},t.isEqualCheap=function(t,e){try{return JSON.stringify(t)===JSON.stringify(e)}catch(t){return!1}},t.isFunction=function(t,e=!1){const r=n(t);return!!d.includes(r)||(e&&console.error("Expect to be Function type! Got "+typeof t),!1)},t.isNotEmpty=h,t.isObject=c,t.isPlainObject=i,t.isRegExp=j,t.isString=f,t.logger=function(...t){try{window&&window.DEBUG&&Reflect.apply(console.log,console,t)}catch(t){return}},t.merge=l,t.nil=()=>!1,t.notEmpty=b,t.objDefineProps=function(t,e,n,r=null){return void 0===Object.getOwnPropertyDescriptor(t,e)&&Object.defineProperty(t,e,{set:n,get:null===r?function(){return null}:r}),t},t.objHasProp=O,t.objectHasKey=(t,e)=>{try{const n=Object.keys(t);return r(n,e)}catch(t){return!1}},t.parseJWT=function(t){const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)},t.parseJson=(t,e=!0)=>{try{return"string"===n(t)?JSON.parse(t):JSON.parse(JSON.stringify(t))}catch(n){if(e)return t;throw n}},t.queuePromisesProcess=function(t,...e){const n=a(t),r=Reflect.apply(p,null,n);return Reflect.apply(r,null,e)},t.readOnly=t=>Object.freeze(t),t.showDeep=t=>{console.dir(t,{depth:null})},t.strToBool=function(t,e=!1){const n=t.toLowerCase();if("false"===n)return!1;if("true"===n)return!0;if(e)throw new Error(`${t} is not boolean like`);return t},t.strToNum=e,t.timestamp=w,t.toArray=o,t.trueTypeOf=n,t.urlParams=m,Object.defineProperty(t,"__esModule",{value:!0})}));
