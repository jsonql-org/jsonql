!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).JsonqlUtils={})}(this,(function(t){"use strict";function n(t,n=!1){const e=parseFloat(t);if(!isNaN(e))return e;if(n)throw new Error(`${t} is not number like`);return t}function e(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const r=(t,n)=>t.includes(n),o=t=>Array.isArray(t)?t:[t];const c=(t,...n)=>(...e)=>n.reduce(((t,n)=>Reflect.apply(n,null,o(t))),Reflect.apply(t,null,e));function i(t){return"object"===e(t)}function s(t){if(i(t)){const n=t.constructor.prototype,e="[Object: null prototype]";return n.toString().substring(0,e.length)===e||!1!==i(n)&&Reflect.apply(n.hasOwnProperty,n,["isPrototypeOf"])}return!1}const u=(...t)=>Reflect.apply(Object.assign,Object,t),l=(t,...n)=>t.length<=n.length?t(...n):(...e)=>l(t,...n,...e),a=(t,...n)=>{if(!n.length)return t;const e=n.shift();if(i(t)&&i(e))for(const n in e)i(e[n])?(t[n]||Object.assign(t,{[n]:{}}),a(t[n],e[n])):Object.assign(t,{[n]:e[n]});return a(t,...n)};function f(t,n){return n||(n=t=>t),t.flatMap(n)}function p(t){return"string"===e(t)}function y(t,...n){return(...e)=>n.reduce(((t,n)=>t.then((t=>n(t)))),Reflect.apply(t,null,e))}const g=t=>{const n=t.substring(0,1);return"_"!==n&&"-"!==n?t:t.substring(1)},h=t=>t&&s(t)&&0===Object.keys(t).length,d=t=>null!=t&&""!==(t+"").trim();function b(t,n=!1){return Array.isArray(t)?!!n&&!!t.length:s(t)?!!n&&!h(t):d(t)}function O(t,n,e,r){return new(e||(e=Promise))((function(o,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function s(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}u((r=r.apply(t,n||[])).next())}))}const j=["asyncfunction","function"];function w(t,n){const e=Object.getOwnPropertyDescriptor(t,n);return void 0!==e&&e.value?e.value:e}function m(t){return t instanceof RegExp}const P=(t=!1)=>{const n=Date.now();return t?Math.floor(n/1e3):n},S=(t,n)=>{const e=[];for(const t in n)e.push([t,n[t]].join("="));return[t,e.join("&")].join("?")},v=(t="_cb")=>({[t]:P()});t.accessByPath=function(t,e){if(e.indexOf(".")>-1){const r=e.split(".").map((t=>n(t))),o=r.length;let c=null;for(let n=0;n<o;++n){const e=r[n];c=null!==c?c[e]:t[e]}return c}return t[e]},t.arrToObj=(t,n,e={})=>t.map(n).reduce(((t,n)=>u(t,n)),e),t.assign=u,t.cacheBurst=v,t.cacheBurstUrl=t=>S(t,v()),t.chainArrayFns=t=>Reflect.apply(c,null,t),t.chainFns=c,t.chainProcessPromises=y,t.chainPromises=function(t,n=!1){return t.reduce(((t,e)=>t.then((t=>e.then((e=>!1===n?[...t,e]:a(t,e)))))),Promise.resolve(!1===n?[]:s(n)?n:{}))},t.cloneDeep=function t(n){function r(e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=t(n[r]))}switch(e(n)){case"object":return function(){const t={};return r(t),t}();case"array":return n.map((function(n){return t(n)}));case"map":return function(){const e=new Map;for(const[r,o]of n)e.set(r,t(o));return e}();case"set":return function(){const e=new Set;for(const r of n)e.add(t(r));return e}();case"function":return function(){const t=n.bind(this);return r(t),t}();default:return n}},t.cloneDeepCheap=t=>JSON.parse(JSON.stringify(t)),t.createEvtName=(...t)=>t.join("_"),t.curry=l,t.dasherize=t=>g(t.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()),t.flatMap=f,t.formatStr=function(t,...n){return t.replace(/{([0-9]+)}/g,((t,e)=>void 0===n[e]?t:n[e]))},t.getConfigValue=(t,n)=>n&&s(n)&&t in n?n[t]:void 0,t.getLogger=t=>{const n=[t];return(...t)=>{try{window&&window.JSONQL_DEBUG&&Reflect.apply(console.info,console,n.concat(t))}catch(t){return}}},t.getRegex=function(t){switch(!0){case m(t):return t;case p(t):return new RegExp(t);default:return!1}},t.inArray=r,t.injectToFn=function(t,n,e,r=!1){const o=w(t,n);return!1===r&&void 0!==o||Object.defineProperty(t,n,{value:e,writable:r}),t},t.isAsyncFunction=function(t){return e(t)===j[0]},t.isClass=t=>!s(t),t.isEmpty=(t,n)=>!b(t,n),t.isEmptyObj=h,t.isEqual=function t(n,e){function r(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const o=r(n);switch(o){case"array":return function(){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}();case"object":return function(){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&!t(n[r],e[r]))return!1;return!0}();case"function":return n.toString()===e.toString();default:return o===r(e)&&n===e}},t.isEqualCheap=function(t,n){try{return JSON.stringify(t)===JSON.stringify(n)}catch(t){return!1}},t.isFunction=function(t,n=!1){const r=e(t);return!!j.includes(r)||(n&&console.error("Expect to be Function type! Got "+typeof t),!1)},t.isNotEmpty=d,t.isObject=i,t.isPlainObject=s,t.isRegExp=m,t.isString=p,t.logger=function(...t){try{window&&window.DEBUG&&Reflect.apply(console.log,console,t)}catch(t){return}},t.merge=a,t.nil=()=>!1,t.notEmpty=b,t.objDefineProps=function(t,n,e,r=null){return void 0===Object.getOwnPropertyDescriptor(t,n)&&Object.defineProperty(t,n,{set:e,get:null===r?function(){return null}:r}),t},t.objHasProp=w,t.objectHasKey=(t,n)=>{try{const e=Object.keys(t);return r(e,n)}catch(t){return!1}},t.parseJWT=function(t){const n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(n).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)},t.parseJson=(t,n=!0)=>{try{return"string"===e(t)?JSON.parse(t):JSON.parse(JSON.stringify(t))}catch(e){if(n)return t;throw e}},t.promise=t=>O(void 0,void 0,void 0,(function*(){return new Promise(t)})),t.queuePromisesProcess=function(t,...n){const e=f(t),r=Reflect.apply(y,null,e);return Reflect.apply(r,null,n)},t.readOnly=t=>Object.freeze(t),t.showDeep=t=>{console.dir(t,{depth:null})},t.strToBool=function(t,n=!1){const e=t.toLowerCase();if("false"===e)return!1;if("true"===e)return!0;if(n)throw new Error(`${t} is not boolean like`);return t},t.strToNum=n,t.timestamp=P,t.toArray=o,t.trueTypeOf=e,t.urlParams=S,Object.defineProperty(t,"__esModule",{value:!0})}));
