!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).JsonqlUtils={})}(this,(function(t){"use strict";function e(t,e=!1){const n=parseFloat(t);if(!isNaN(n))return n;if(e)throw new Error(`${t} is not number like`);return t}const n=(t,e)=>t.includes(e),r=t=>Array.isArray(t)?t:[t],o=(t,...e)=>(...n)=>e.reduce(((t,e)=>Reflect.apply(e,null,r(t))),Reflect.apply(t,null,n));function c(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function i(t){return"object"===c(t)}function s(t){if(i(t)){const e=t.constructor.prototype,n="[Object: null prototype]";return e.toString().substring(0,n.length)===n||!1!==i(e)&&Reflect.apply(e.hasOwnProperty,e,["isPrototypeOf"])}return!1}const u=(...t)=>Reflect.apply(Object.assign,Object,t),l=u,a=(t,...e)=>t.length<=e.length?t(...e):(...n)=>a(t,...e,...n),f=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(i(t)&&i(n))for(const e in n)i(n[e])?(t[e]||Object.assign(t,{[e]:{}}),f(t[e],n[e])):Object.assign(t,{[e]:n[e]});return f(t,...e)};function p(t,e){return e||(e=t=>t),t.flatMap(e)}function y(t){return"string"===c(t)}function g(t,...e){return(...n)=>e.reduce(((t,e)=>t.then((t=>e(t)))),Reflect.apply(t,null,n))}const h=t=>{const e=t.substring(0,1);return"_"!==e&&"-"!==e?t:t.substring(1)};const d=t=>t&&s(t)&&0===Object.keys(t).length,b=t=>null!=t&&""!==(t+"").trim();function O(t,e=!1){return Array.isArray(t)?!!e&&!!t.length:s(t)?!!e&&!d(t):b(t)}function j(t,e,n,r){return new(n||(n=Promise))((function(o,c){function i(t){try{u(r.next(t))}catch(t){c(t)}}function s(t){try{u(r.throw(t))}catch(t){c(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))}const w=["asyncfunction","function"];function m(t,e){const n=Object.getOwnPropertyDescriptor(t,e);return void 0!==n&&n.value?n.value:n}function P(t){return t instanceof RegExp}const S=(t=!1)=>{const e=Date.now();return t?Math.floor(e/1e3):e},v=(t,e)=>{const n=[];for(const t in e)n.push([t,e[t]].join("="));return[t,n.join("&")].join("?")},E=(t="_cb")=>({[t]:S()});t.accessByPath=function(t,n){if(n.indexOf(".")>-1){const r=n.split(".").map((t=>e(t))),o=r.length;let c=null;for(let e=0;e<o;++e){const n=r[e];c=null!==c?c[n]:t[n]}return c}return t[n]},t.arrToObj=(t,e,n={})=>t.map(e).reduce(((t,e)=>u(t,e)),n),t.assign=u,t.cacheBurst=E,t.cacheBurstUrl=t=>v(t,E()),t.chainArrayFns=t=>Reflect.apply(o,null,t),t.chainFns=o,t.chainProcessPromises=g,t.chainPromises=function(t,e=!1){return t.reduce(((t,n)=>t.then((t=>n.then((n=>!1===e?[...t,n]:f(t,n)))))),Promise.resolve(!1===e?[]:s(e)?e:{}))},t.cloneDeep=function t(e){function n(n){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t(e[r]))}switch(c(e)){case"object":return function(){const t={};return n(t),t}();case"array":return e.map((function(e){return t(e)}));case"map":return function(){const n=new Map;for(const[r,o]of e)n.set(r,t(o));return n}();case"set":return function(){const n=new Set;for(const r of e)n.add(t(r));return n}();case"function":return function(){const t=e.bind(this);return n(t),t}();default:return e}},t.cloneDeepCheap=t=>JSON.parse(JSON.stringify(t)),t.compact=t=>t.filter(Boolean),t.createEvtName=(...t)=>t.join("_"),t.curry=a,t.dasherize=t=>h(t.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()),t.extend=l,t.flatMap=p,t.formatStr=function(t,...e){return t.replace(/{([0-9]+)}/g,((t,n)=>void 0===e[n]?t:e[n]))},t.getConfigValue=(t,e)=>e&&s(e)&&t in e?e[t]:void 0,t.getLogger=t=>{const e=[t];return(...t)=>{try{window&&window.JSONQL_DEBUG&&Reflect.apply(console.info,console,e.concat(t))}catch(t){return}}},t.getRegex=function(t){switch(!0){case P(t):return t;case y(t):return new RegExp(t);default:return!1}},t.inArray=n,t.injectToFn=function(t,e,n,r=!1){const o=m(t,e);return!1===r&&void 0!==o||Object.defineProperty(t,e,{value:n,writable:r}),t},t.isAsyncFunction=function(t){return c(t)===w[0]},t.isClass=t=>!s(t),t.isEmpty=(t,e)=>!O(t,e),t.isEmptyObj=d,t.isEqual=function t(e,n){function r(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}const o=r(e);switch(o){case"array":return function(){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}();case"object":return function(){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!t(e[r],n[r]))return!1;return!0}();case"function":return e.toString()===n.toString();default:return o===r(n)&&e===n}},t.isEqualCheap=function(t,e){try{return JSON.stringify(t)===JSON.stringify(e)}catch(t){return!1}},t.isFunction=function(t,e=!1){const n=c(t);return!!w.includes(n)||(e&&console.error("Expect to be Function type! Got "+typeof t),!1)},t.isNotEmpty=b,t.isObject=i,t.isPlainObject=s,t.isRegExp=P,t.isString=y,t.logger=function(...t){try{window&&window.DEBUG&&Reflect.apply(console.log,console,t)}catch(t){return}},t.merge=f,t.nil=()=>!1,t.notEmpty=O,t.objDefineProps=function(t,e,n,r=null){return void 0===Object.getOwnPropertyDescriptor(t,e)&&Object.defineProperty(t,e,{set:n,get:null===r?function(){return null}:r}),t},t.objHasProp=m,t.objectHasKey=(t,e)=>{try{const r=Object.keys(t);return n(r,e)}catch(t){return!1}},t.parseJWT=function(t){const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)},t.parseJson=(t,e=!0)=>{try{return"string"===c(t)?JSON.parse(t):JSON.parse(JSON.stringify(t))}catch(n){if(e)return t;throw n}},t.promise=t=>j(void 0,void 0,void 0,(function*(){return new Promise(t)})),t.queuePromisesProcess=function(t,...e){const n=p(t),r=Reflect.apply(g,null,n);return Reflect.apply(r,null,e)},t.readOnly=t=>Object.freeze(t),t.showDeep=t=>{console.dir(t,{depth:null})},t.strToBool=function(t,e=!1){const n=t.toLowerCase();if("false"===n)return!1;if("true"===n)return!0;if(e)throw new Error(`${t} is not boolean like`);return t},t.strToNum=e,t.timestamp=S,t.toArray=r,t.trueTypeOf=c,t.urlParams=v,Object.defineProperty(t,"__esModule",{value:!0})}));
